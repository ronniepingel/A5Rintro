<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 5 Binära variabler | Tillämpad statistik med R</title>
  <meta name="description" content="Kapitel 5 Binära variabler | Tillämpad statistik med R" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 5 Binära variabler | Tillämpad statistik med R" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 5 Binära variabler | Tillämpad statistik med R" />
  
  
  

<meta name="author" content="Ronnie Pingel och Valentin Zulj" />


<meta name="date" content="2020-11-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="läsa-in-och-spara-data.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduktion</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#om-statistisk-programmering-med-r"><i class="fa fa-check"></i><b>1.1</b> Om statistisk programmering med R</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#allmänna-tips-om-r-på-kursen"><i class="fa fa-check"></i><b>1.2</b> Allmänna tips om R på kursen</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#sammanfattning"><i class="fa fa-check"></i><b>1.3</b> Sammanfattning</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#referenser"><i class="fa fa-check"></i><b>1.4</b> Referenser</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html"><i class="fa fa-check"></i><b>2</b> Att börja använda R</a><ul>
<li class="chapter" data-level="2.1" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#installation-av-r-och-rstudio"><i class="fa fa-check"></i><b>2.1</b> Installation av R och RStudio</a><ul>
<li class="chapter" data-level="2.1.1" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#installation-av-r-på-macos"><i class="fa fa-check"></i><b>2.1.1</b> Installation av R på MacOS</a></li>
<li class="chapter" data-level="2.1.2" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#installation-av-r-på-windows"><i class="fa fa-check"></i><b>2.1.2</b> Installation av R på Windows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#installation-av-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installation av RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#första-sessionen"><i class="fa fa-check"></i><b>2.3</b> Första sessionen</a></li>
<li class="chapter" data-level="2.4" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#paket"><i class="fa fa-check"></i><b>2.4</b> Paket</a></li>
<li class="chapter" data-level="2.5" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#sammanfattning-1"><i class="fa fa-check"></i><b>2.5</b> Sammanfattning</a></li>
<li class="chapter" data-level="2.6" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övningar"><i class="fa fa-check"></i><b>2.6</b> Övningar</a><ul>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.1"><i class="fa fa-check"></i>Övning 2.1</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.2"><i class="fa fa-check"></i>Övning 2.2</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.3"><i class="fa fa-check"></i>Övning 2.3</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.4"><i class="fa fa-check"></i>Övning 2.4</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.5"><i class="fa fa-check"></i>Övning 2.5</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.6"><i class="fa fa-check"></i>Övning 2.6</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.7"><i class="fa fa-check"></i>Övning 2.7</a></li>
<li class="chapter" data-level="" data-path="att-börja-använda-r.html"><a href="att-börja-använda-r.html#övning-2.8"><i class="fa fa-check"></i>Övning 2.8</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html"><i class="fa fa-check"></i><b>3</b> Data, objekt och funktioner</a><ul>
<li class="chapter" data-level="3.1" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#data-och-objekt"><i class="fa fa-check"></i><b>3.1</b> Data och objekt</a></li>
<li class="chapter" data-level="3.2" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#vektorer"><i class="fa fa-check"></i><b>3.2</b> Vektorer</a><ul>
<li class="chapter" data-level="3.2.1" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#vektorer-och-indexering"><i class="fa fa-check"></i><b>3.2.1</b> Vektorer och indexering</a></li>
<li class="chapter" data-level="3.2.2" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#vektorer-och-logiska-operatorer"><i class="fa fa-check"></i><b>3.2.2</b> Vektorer och logiska operatorer</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#matriser"><i class="fa fa-check"></i><b>3.3</b> Matriser</a></li>
<li class="chapter" data-level="3.4" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#data-frames"><i class="fa fa-check"></i><b>3.4</b> Data frames</a></li>
<li class="chapter" data-level="3.5" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#funktioner"><i class="fa fa-check"></i><b>3.5</b> Funktioner</a></li>
<li class="chapter" data-level="3.6" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#sammanfattning-2"><i class="fa fa-check"></i><b>3.6</b> Sammanfattning</a></li>
<li class="chapter" data-level="3.7" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övningar-1"><i class="fa fa-check"></i><b>3.7</b> Övningar</a><ul>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.1"><i class="fa fa-check"></i>Övning 3.1</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.2"><i class="fa fa-check"></i>Övning 3.2</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.3"><i class="fa fa-check"></i>Övning 3.3</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.4"><i class="fa fa-check"></i>Övning 3.4</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.5"><i class="fa fa-check"></i>Övning 3.5</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.6"><i class="fa fa-check"></i>Övning 3.6</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.7"><i class="fa fa-check"></i>Övning 3.7</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.8"><i class="fa fa-check"></i>Övning 3.8</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.9"><i class="fa fa-check"></i>Övning 3.9</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.10"><i class="fa fa-check"></i>Övning 3.10</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.11"><i class="fa fa-check"></i>Övning 3.11</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.12"><i class="fa fa-check"></i>Övning 3.12</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.13"><i class="fa fa-check"></i>Övning 3.13</a></li>
<li class="chapter" data-level="" data-path="data-objekt-och-funktioner.html"><a href="data-objekt-och-funktioner.html#övning-3.14"><i class="fa fa-check"></i>Övning 3.14</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html"><i class="fa fa-check"></i><b>4</b> Läsa in och spara data</a><ul>
<li class="chapter" data-level="4.1" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#principer-för-organiserade-datamaterial"><i class="fa fa-check"></i><b>4.1</b> Principer för organiserade datamaterial</a></li>
<li class="chapter" data-level="4.2" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#working-directory"><i class="fa fa-check"></i><b>4.2</b> Working directory</a></li>
<li class="chapter" data-level="4.3" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#läsa-in-datamaterial-med-hjälp-av-kod"><i class="fa fa-check"></i><b>4.3</b> Läsa in datamaterial med hjälp av kod</a><ul>
<li class="chapter" data-level="4.3.1" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#text--och-csv-filer"><i class="fa fa-check"></i><b>4.3.1</b> Text- och CSV-filer</a></li>
<li class="chapter" data-level="4.3.2" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#excel-filer"><i class="fa fa-check"></i><b>4.3.2</b> Excel-filer</a></li>
<li class="chapter" data-level="4.3.3" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övriga-format"><i class="fa fa-check"></i><b>4.3.3</b> Övriga format</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#läsa-in-datamaterial-med-hjälp-av-menyerna-i-rstudio"><i class="fa fa-check"></i><b>4.4</b> Läsa in datamaterial med hjälp av menyerna i RStudio</a><ul>
<li class="chapter" data-level="4.4.1" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#läsa-in-data-från-working-directory"><i class="fa fa-check"></i><b>4.4.1</b> Läsa in data från working directory</a></li>
<li class="chapter" data-level="4.4.2" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#läsa-in-data-med-import-dataset"><i class="fa fa-check"></i><b>4.4.2</b> Läsa in data med “Import Dataset”</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#spara-datamaterial-med-hjälp-av-r"><i class="fa fa-check"></i><b>4.5</b> Spara datamaterial med hjälp av R</a></li>
<li class="chapter" data-level="4.6" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övningar-2"><i class="fa fa-check"></i><b>4.6</b> Övningar</a><ul>
<li class="chapter" data-level="" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övning-4.1"><i class="fa fa-check"></i>Övning 4.1</a></li>
<li class="chapter" data-level="" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övning-4.2"><i class="fa fa-check"></i>Övning 4.2</a></li>
<li class="chapter" data-level="" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övning-4.3"><i class="fa fa-check"></i>Övning 4.3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="binära-variabler.html"><a href="binära-variabler.html"><i class="fa fa-check"></i><b>5</b> Binära variabler</a><ul>
<li class="chapter" data-level="5.1" data-path="binära-variabler.html"><a href="binära-variabler.html#deskription-av-en-binär-variabel"><i class="fa fa-check"></i><b>5.1</b> Deskription av en binär variabel</a></li>
<li class="chapter" data-level="5.2" data-path="binära-variabler.html"><a href="binära-variabler.html#tabeller-och-en-binär-variabel"><i class="fa fa-check"></i><b>5.2</b> Tabeller och en binär variabel</a></li>
<li class="chapter" data-level="5.3" data-path="binära-variabler.html"><a href="binära-variabler.html#figurer-och-en-binär-variabel"><i class="fa fa-check"></i><b>5.3</b> Figurer och en binär variabel</a></li>
<li class="chapter" data-level="5.4" data-path="binära-variabler.html"><a href="binära-variabler.html#inferens-för-binär-variabel"><i class="fa fa-check"></i><b>5.4</b> Inferens för binär variabel</a></li>
<li class="chapter" data-level="5.5" data-path="binära-variabler.html"><a href="binära-variabler.html#deskription-av-två-binära-variabler"><i class="fa fa-check"></i><b>5.5</b> Deskription av två binära variabler</a></li>
<li class="chapter" data-level="5.6" data-path="binära-variabler.html"><a href="binära-variabler.html#tabeller-och-två-binära-variabler"><i class="fa fa-check"></i><b>5.6</b> Tabeller och två binära variabler</a></li>
<li class="chapter" data-level="5.7" data-path="binära-variabler.html"><a href="binära-variabler.html#kvantifiering-av-samband-mellan-två-binära-variabler"><i class="fa fa-check"></i><b>5.7</b> Kvantifiering av samband mellan två binära variabler</a></li>
<li class="chapter" data-level="5.8" data-path="binära-variabler.html"><a href="binära-variabler.html#figurer-och-två-binära-variabler"><i class="fa fa-check"></i><b>5.8</b> Figurer och två binära variabler</a></li>
<li class="chapter" data-level="5.9" data-path="binära-variabler.html"><a href="binära-variabler.html#inferens-för-två-binära-variabler"><i class="fa fa-check"></i><b>5.9</b> Inferens för två binära variabler</a></li>
<li class="chapter" data-level="5.10" data-path="binära-variabler.html"><a href="binära-variabler.html#övningar-3"><i class="fa fa-check"></i><b>5.10</b> Övningar</a><ul>
<li class="chapter" data-level="" data-path="binära-variabler.html"><a href="binära-variabler.html#övning-5.1"><i class="fa fa-check"></i>Övning 5.1</a></li>
<li class="chapter" data-level="" data-path="binära-variabler.html"><a href="binära-variabler.html#övning-5.2"><i class="fa fa-check"></i>Övning 5.2</a></li>
<li class="chapter" data-level="" data-path="binära-variabler.html"><a href="binära-variabler.html#övning-5.3"><i class="fa fa-check"></i>Övning 5.3</a></li>
<li class="chapter" data-level="" data-path="binära-variabler.html"><a href="binära-variabler.html#övning-5.4"><i class="fa fa-check"></i>Övning 5.4</a></li>
<li class="chapter" data-level="" data-path="binära-variabler.html"><a href="binära-variabler.html#övning-5.5"><i class="fa fa-check"></i>Övning 5.5</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="binära-variabler.html"><a href="binära-variabler.html#referenser-1"><i class="fa fa-check"></i><b>5.11</b> Referenser</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tillämpad statistik med R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="binära-variabler" class="section level1">
<h1><span class="header-section-number">Kapitel 5</span> Binära variabler</h1>
<p>En nödvändig färdighet vid arbete med data är att kunna hantera och analysera kategorivariabler. Vi börjar i detta kapitel med det enkla fallet binära variabler för att i ett senare kapitel övergå till att studera hur man arbetar med variabler som har fler än två kategorier.</p>
<div id="deskription-av-en-binär-variabel" class="section level2">
<h2><span class="header-section-number">5.1</span> Deskription av en binär variabel</h2>
<p>Detta avsnitt fokuserar på analys av <strong>binära</strong> kategorivariabler. I princip alla datamaterial innehåller variabler med två kategorier och även om data inledningsvis inte innehåller binära variabler är det vanligt att av olika skäl omkoda kvantitativa variabler till variabler med två kategorier. För nybörjaren kan det vara förvirrande att det finns åtminstone två alternativ, som bägge är viktiga, för hur man arbetar med binära variabler.</p>
<ul>
<li><strong>Alternativ 1</strong>. En binär kategorivariabel hanteras som en numerisk variabel efter att kategorierna tilldelats numeriska värden. Exempelvis kan vi ange att värdena 0 och 1 representerar två kategorier. Observera att val värden påverkar hur variabeln används i analysen.</li>
<li><strong>Alternativ 2</strong>. En binär kategoriabel definieras med funktionen <strong>factor()</strong>som datatypen <strong>faktor</strong>. En faktors kategorier benämns i R för <strong>levels</strong> (nivåer). Fördelen med att definiera en variabel som faktor är att R kan använda information om den binära variabeln i analyser och resultat. Till exempel kan kategoriernas namn presenteras i resultat. Dessutom kräver en del metoder i R en faktor-variabel. Observera att det, av förklarliga skäl, inte går att utföra räkneoperationer på variabler definierade som datatypen faktor.</li>
</ul>
<p>Eftersom bägge varianterna har för- och nackdelar återfinns ofta <strong>bägge varianter</strong> av kodning för en och samma binära variabel i ett dataset — en numerisk version kodad 0-1 kallad för <strong>variabelnamn_bin</strong> och version kodad som faktor kallad <strong>variabelnamn_cat</strong>.</p>
<p>Oavsett om en binär variabel har kategorier som inte går att rangordna (till exempel variabeln <span class="math inline">\(kön\)</span> med kategorierna <span class="math inline">\(kvinna\)</span> och <span class="math inline">\(man\)</span>) eller har kategorier som går att rangordna (till exempel <span class="math inline">\(utbildning\)</span> med kategorierna <span class="math inline">\(låg\)</span> och <span class="math inline">\(hög\)</span>) beskrivs en binär variabel på samma sätt. Vi ska nu presentera visa hur man beskriver en binär variabel, utifrån de tidigare två nämnda alternativen.</p>
<p>Vi exemplifierar med att beskriva variabel som heter <span class="math inline">\(education\)</span> som har två kategorier, <span class="math inline">\(low\)</span> och <span class="math inline">\(high\)</span> och som vi läser in nedan. Med kommandot <strong>str()</strong> identifieras att education är en variabel med datatypen <em>character</em>. Det är alltid viktigt att undersöka variablers datatyp, emellertid är detta ingen kod som sedan sparas i scriptet. Efter datatypen är undersökt kan denna rad med kod tas bort från scriptet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Ursprungsvariabel</span>
  education &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>,  
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>,  
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>,  
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, 
               <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>,  
               <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>, <span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,
               <span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>,<span class="st">&quot;low&quot;</span>)
  <span class="kw">str</span>(education)
<span class="op">&gt;</span><span class="st">  </span>chr [<span class="dv">1</span><span class="op">:</span><span class="dv">280</span>] <span class="st">&quot;high&quot;</span> <span class="st">&quot;high&quot;</span> <span class="st">&quot;low&quot;</span> <span class="st">&quot;high&quot;</span> <span class="st">&quot;high&quot;</span> <span class="st">&quot;low&quot;</span> <span class="st">&quot;high&quot;</span> <span class="st">&quot;low&quot;</span> ...</code></pre></div>
<p>Med <strong>Alternativ 1</strong> tilldelas de två kategorierna i den binära variabeln numeriska värden och variabeln analyseras sedan som en numerisk variabel. Det är vanligast att ge kategorierna värdena 0 och 1. En anledning är tolkningen blir i termer av andelar av den kategori som är kodad 1.</p>
<p>Exemplet nedan illustrerar hur man med det numeriska alternativet kan beskriva den ursprungliga variabeln <span class="math inline">\(education\)</span> som har kategorierna <span class="math inline">\(low\)</span> och <span class="math inline">\(high\)</span>. Den uppenbara fördelen med att kodningen 0-1, jämfört med 1-2, är att 0-1 ger en bekväm tolkning eftersom medelvärdet då är proportionen.</p>
<p>Kommandot <strong>str()</strong> identifierar nu att både <em>edu_bin</em> och <em>edu_12</em> är av typen <em>numeric</em>.</p>
<p>Med <strong>mean()</strong> och <strong>summary()</strong> erhålls information som beskriver <em>edu_bin</em> och <em>edu_12</em>. Vi ser att 41% har hög utbildning. Däremot ser vi inte hur många som har låg respektive hög utbildning.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Numerisk kodning: 0 = low, 1 = high</span>
  edu_bin &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(education))
  edu_bin[education <span class="op">==</span><span class="st"> &quot;high&quot;</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
  edu_bin[education <span class="op">==</span><span class="st"> &quot;low&quot;</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
  <span class="kw">str</span>(edu_bin)
<span class="op">&gt;</span><span class="st">  </span>num [<span class="dv">1</span><span class="op">:</span><span class="dv">280</span>] <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">1</span> <span class="dv">0</span> <span class="dv">0</span> <span class="dv">1</span> ...
  <span class="kw">mean</span>(edu_bin)
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="fl">0.4142857</span>
  <span class="kw">summary</span>(edu_bin)
<span class="op">&gt;</span><span class="st">    </span>Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
<span class="op">&gt;</span><span class="st">  </span><span class="fl">0.0000</span>  <span class="fl">0.0000</span>  <span class="fl">0.0000</span>  <span class="fl">0.4143</span>  <span class="fl">1.0000</span>  <span class="fl">1.0000</span>
<span class="co"># Numerisk kodning: 1 = low, 2 = high</span>
  edu_<span class="dv">12</span> &lt;-<span class="st"> </span><span class="kw">rep</span>(<span class="ot">NA</span>, <span class="kw">length</span>(education))
  edu_<span class="dv">12</span>[education <span class="op">==</span><span class="st"> &quot;high&quot;</span>] &lt;-<span class="st"> </span><span class="dv">2</span>
  edu_<span class="dv">12</span>[education <span class="op">==</span><span class="st"> &quot;low&quot;</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
  <span class="kw">str</span>(edu_<span class="dv">12</span>)
<span class="op">&gt;</span><span class="st">  </span>num [<span class="dv">1</span><span class="op">:</span><span class="dv">280</span>] <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> ...
  <span class="kw">mean</span>(edu_bin)
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="fl">0.4142857</span>
  <span class="kw">summary</span>(edu_bin)
<span class="op">&gt;</span><span class="st">    </span>Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
<span class="op">&gt;</span><span class="st">  </span><span class="fl">0.0000</span>  <span class="fl">0.0000</span>  <span class="fl">0.0000</span>  <span class="fl">0.4143</span>  <span class="fl">1.0000</span>  <span class="fl">1.0000</span></code></pre></div>
<p>Med <strong>Alternativ 2</strong> används funktionen <strong>factor()</strong> för skapa en faktorvariabel <strong>edu_cat</strong></p>
<p>Kommandot <strong>str()</strong> identifierar nu att <strong>edu_cat</strong> har två nivåer med kategorinamnen<br />
<em>“low”</em> and <em>“high”</em>. R tilldelar automatiskt kategorierna <em>nivåer</em>, där “high” är level 1 och “low” är level 2. Observera att nivåer används för att bestämma en rangordning och kan inte användas i aritmetiska beräkningar. Även om valet av nominal- eller ordinalskala i teorin saknar betydelse för en binär variabel är det viktigt att veta ordningen på nivåerna om man hanterar variabeln som en faktor.Det finns nämligen analyser i R där ordningen spelar roll. Nivåerna bestäms utifrån den ordning kategorierna dyker upp i variabeln <em>såvida inte en numerisk variabel görs om till en faktor</em>.</p>
<p>Faktorvariabeln kan beskrivas med <strong>summary()</strong> som redovisar antalet inom respektive utbildningskategori. Däremot kan vi inte använda <strong>mean()</strong> och därmed inte fram andelen med denna funktion.</p>
<p>Det går att i funktionen <strong>factor()</strong> använda argumentet <strong>levels</strong> för att manuellt ange nivåerna. Dessutom kan det i detta exempel uppfattas som förvirrande för användaren att “high” har tilldelats nivå 1 medan “low” är nivå 2. Av dessa skäl ändras därför ordningen med hjälp av argumentet <em>levels</em>.</p>
<p>Vid arbete med faktorer används ofta en funktion (ej att förväxla med <em>argumententet</em> <strong>levels()</strong> för att ändra kategorinamn.I exemplet nedan används denna funktion för att ändra kategorinamn på <span class="math inline">\(edu_cat\)</span>. Koden för att ändra namn är inte uppenbar för nybörjaren och det är enklast om du kopierar koden nedan och ändrar den efter dina behov.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Skapa en faktorvariabel  </span>
  edu_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(education)
  <span class="kw">str</span>(edu_cat)
<span class="op">&gt;</span><span class="st">  </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;high&quot;</span>,<span class="st">&quot;low&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> ...
  <span class="kw">mean</span>(edu_cat)
<span class="op">&gt;</span><span class="st"> </span>Warning <span class="cf">in</span> <span class="kw">mean.default</span>(edu_cat)<span class="op">:</span><span class="st"> </span>argument is not numeric or logical<span class="op">:</span>
<span class="er">&gt;</span><span class="st"> </span>returning <span class="ot">NA</span>
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="ot">NA</span>
  <span class="kw">summary</span>(edu_cat)
<span class="op">&gt;</span><span class="st"> </span>high  low 
<span class="op">&gt;</span><span class="st">  </span><span class="dv">116</span>  <span class="dv">164</span>
<span class="co"># Test att utföra en räkneoperation på en faktorvariabel</span>
  <span class="kw">mean</span>(edu_cat)
<span class="op">&gt;</span><span class="st"> </span>Warning <span class="cf">in</span> <span class="kw">mean.default</span>(edu_cat)<span class="op">:</span><span class="st"> </span>argument is not numeric or logical<span class="op">:</span>
<span class="er">&gt;</span><span class="st"> </span>returning <span class="ot">NA</span>
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="ot">NA</span>
<span class="co"># Ändra ordningen på nivåerna </span>
  edu_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(education, <span class="dt">levels =</span> <span class="kw">c</span>(<span class="st">&quot;low&quot;</span>, <span class="st">&quot;high&quot;</span>))
  <span class="kw">str</span>(edu_cat)
<span class="op">&gt;</span><span class="st">  </span>Factor w<span class="op">/</span><span class="st"> </span><span class="dv">2</span> levels <span class="st">&quot;low&quot;</span>,<span class="st">&quot;high&quot;</span><span class="op">:</span><span class="st"> </span><span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">2</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">2</span> ...
  <span class="kw">summary</span>(edu_cat)
<span class="op">&gt;</span><span class="st">  </span>low high 
<span class="op">&gt;</span><span class="st">  </span><span class="dv">164</span>  <span class="dv">116</span>
<span class="co"># Ändra för valt element namn i vektor levels(education_cat)  </span>
  <span class="kw">levels</span>(edu_cat)[<span class="kw">levels</span>(edu_cat) <span class="op">==</span><span class="st"> &quot;low&quot;</span>] &lt;-<span class="st"> &quot;Låg utbildning&quot;</span>
  <span class="kw">levels</span>(edu_cat)[<span class="kw">levels</span>(edu_cat) <span class="op">==</span><span class="st"> &quot;high&quot;</span>] &lt;-<span class="st"> &quot;Hög utbildning&quot;</span>
  edu_cat
<span class="op">&gt;</span><span class="st">   </span>[<span class="dv">1</span>] Hög utbildning Hög utbildning Låg utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">   </span>[<span class="dv">5</span>] Hög utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">   </span>[<span class="dv">9</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">13</span>] Hög utbildning Hög utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">17</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">21</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">25</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">29</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">33</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">37</span>] Låg utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">41</span>] Hög utbildning Hög utbildning Låg utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">45</span>] Hög utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">49</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">53</span>] Hög utbildning Hög utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">57</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">61</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">65</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">69</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">73</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">77</span>] Låg utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">81</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">85</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">89</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">93</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st">  </span>[<span class="dv">97</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">101</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">105</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">109</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">113</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">117</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">121</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">125</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">129</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">133</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">137</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">141</span>] Hög utbildning Hög utbildning Låg utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">145</span>] Hög utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">149</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">153</span>] Hög utbildning Hög utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">157</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">161</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">165</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">169</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">173</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">177</span>] Låg utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">181</span>] Hög utbildning Hög utbildning Låg utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">185</span>] Hög utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">189</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">193</span>] Hög utbildning Hög utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">197</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">201</span>] Hög utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">205</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">209</span>] Hög utbildning Låg utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">213</span>] Låg utbildning Hög utbildning Hög utbildning Hög utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">217</span>] Låg utbildning Låg utbildning Hög utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">221</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">225</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">229</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">233</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">237</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">241</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">245</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">249</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">253</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">257</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">261</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">265</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">269</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">273</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">277</span>] Låg utbildning Låg utbildning Låg utbildning Låg utbildning
<span class="op">&gt;</span><span class="st"> </span>Levels<span class="op">:</span><span class="st"> </span>Låg utbildning Hög utbildning</code></pre></div>
<p>Avslutningsvis ska vi på betydelsen av <strong>bortfall</strong>. I exemplet nedan skapas bortfall genom att på några ställen lägga bortfall kodat <em>NA</em> för observation 3 och 10. Vi ser att med <strong>summary()</strong> hanteras bortfallet i bägge fallen, men med <strong>mean()</strong> måste argumentet <strong>na.rm</strong> användas.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Skapa en variabel med missing data (NA) i element 3, 10 i den numeriska</span>
<span class="co"># variabeln edu_bin och genomför samma analys som förut</span>
 edu_bin_mis &lt;-<span class="st"> </span>edu_bin
 edu_bin_mis[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="ot">NA</span>
 edu_bin_mis[<span class="dv">10</span>] &lt;-<span class="st"> </span><span class="ot">NA</span>
 <span class="kw">mean</span>(edu_bin_mis)
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="ot">NA</span>
 <span class="kw">mean</span>(edu_bin_mis, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)
<span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="fl">0.4136691</span>
 <span class="kw">summary</span>(edu_bin_mis)
<span class="op">&gt;</span><span class="st">    </span>Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA<span class="st">&#39;s </span>
<span class="st">&gt;  0.0000  0.0000  0.0000  0.4137  1.0000  1.0000       2</span>

<span class="st"># Skapa en variabel med missing data (NA) i element 3, 10 i faktor-variabeln</span>
<span class="st"># edu_cat och genomför samma analys som förut </span>
<span class="st"> edu_cat_mis &lt;- edu_cat</span>
<span class="st"> edu_cat_mis[3] &lt;- NA</span>
<span class="st"> edu_cat_mis[10] &lt;- NA</span>
<span class="st"> summary(edu_cat_mis)</span>
<span class="st">&gt; Låg utbildning Hög utbildning           NA&#39;</span>s 
<span class="op">&gt;</span><span class="st">            </span><span class="dv">163</span>            <span class="dv">115</span>              <span class="dv">2</span></code></pre></div>
</div>
<div id="tabeller-och-en-binär-variabel" class="section level2">
<h2><span class="header-section-number">5.2</span> Tabeller och en binär variabel</h2>
<p>Tabeller och kategorivariabler är starkt relaterade och vi ska nu se hur man kan redovisa en binär variabel med hjälp av funktionen <strong>table()</strong>, som är en grundläggande funktion för att skapa tabeller. Denna funktion hanterar både en och flera variabler med olika antal kategorier. Vi börjar med att använda <strong>table()</strong> på de tidigare skapade binära variablerna.</p>
<p>Vi kan se att <strong>table()</strong> ger frekvenser för både numeriska variabler och på faktorvariabler. Det gäller dock att vara uppmärksam på bortfall när <strong>table()</strong> och för att presentera frekvenser även för bortfall används argumentet <strong>useNA</strong>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">  <span class="kw">table</span>(edu_bin)
<span class="op">&gt;</span><span class="st"> </span>edu_bin
<span class="op">&gt;</span><span class="st">   </span><span class="dv">0</span>   <span class="dv">1</span> 
<span class="op">&gt;</span><span class="st"> </span><span class="dv">164</span> <span class="dv">116</span>
  <span class="kw">table</span>(edu_cat)
<span class="op">&gt;</span><span class="st"> </span>edu_cat
<span class="op">&gt;</span><span class="st"> </span>Låg utbildning Hög utbildning 
<span class="op">&gt;</span><span class="st">            </span><span class="dv">164</span>            <span class="dv">116</span>
  <span class="kw">table</span>(edu_bin_mis)
<span class="op">&gt;</span><span class="st"> </span>edu_bin_mis
<span class="op">&gt;</span><span class="st">   </span><span class="dv">0</span>   <span class="dv">1</span> 
<span class="op">&gt;</span><span class="st"> </span><span class="dv">163</span> <span class="dv">115</span>
  <span class="kw">table</span>(edu_bin_mis, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>edu_bin_mis
<span class="op">&gt;</span><span class="st">    </span><span class="dv">0</span>    <span class="dv">1</span> <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st">  </span><span class="dv">163</span>  <span class="dv">115</span>    <span class="dv">2</span>
  <span class="kw">table</span>(edu_cat_mis)
<span class="op">&gt;</span><span class="st"> </span>edu_cat_mis
<span class="op">&gt;</span><span class="st"> </span>Låg utbildning Hög utbildning 
<span class="op">&gt;</span><span class="st">            </span><span class="dv">163</span>            <span class="dv">115</span>
  <span class="kw">table</span>(edu_cat_mis, <span class="dt">useNA =</span> <span class="st">&quot;ifany&quot;</span>)
<span class="op">&gt;</span><span class="st"> </span>edu_cat_mis
<span class="op">&gt;</span><span class="st"> </span>Låg utbildning Hög utbildning           <span class="op">&lt;</span><span class="ot">NA</span><span class="op">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st">            </span><span class="dv">163</span>            <span class="dv">115</span>              <span class="dv">2</span></code></pre></div>
<p>Varför vill man då använda <strong>table()</strong>? Genom att skapa ett tabell-objekt erhålls en flexibilitet genom att funktioner anpassade för tabeller kan användas. En viktig sådan funktion är <strong>prop.table()</strong> som beräknar andelar (relativa frekvenser, proportioner) baserat på tabellobjektets frekvenser.</p>
<p>I exemplet nedan skapar vi med tabell-objekt med frekvenser, sedan tillämpar vi <strong>prop.table()</strong> för att få fram andelarna, som är 0.414 respektive 0.586 för respektive utbildningsnivå.</p>
<p>Genom att använda <strong>str()</strong> ser vi bägge objekten är tabell-objekt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa tabell-objekt med frekvenser från tabell-objektetet</span>
<span class="er">&gt;</span><span class="st">  </span>freq_table_edu_cat &lt;-<span class="st"> </span><span class="kw">table</span>(edu_cat)
<span class="op">&gt;</span><span class="st">  </span>freq_table_edu_cat
<span class="op">&gt;</span><span class="st"> </span>edu_cat
<span class="op">&gt;</span><span class="st"> </span>Låg utbildning Hög utbildning 
<span class="op">&gt;</span><span class="st">            </span><span class="dv">164</span>            <span class="dv">116</span>
<span class="op">&gt;</span><span class="st">  </span><span class="kw">str</span>(freq_table_edu_cat)
<span class="op">&gt;</span><span class="st">  &#39;table&#39;</span> int [<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>(1d)] <span class="dv">164</span> <span class="dv">116</span>
<span class="op">&gt;</span><span class="st">  </span><span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">&quot;dimnames&quot;</span>)=List of <span class="dv">1</span>
<span class="op">&gt;</span><span class="st">   </span>..<span class="op">$</span><span class="st"> </span>edu_cat<span class="op">:</span><span class="st"> </span>chr [<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] <span class="st">&quot;Låg utbildning&quot;</span> <span class="st">&quot;Hög utbildning&quot;</span>
<span class="op">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span><span class="co"># Skapa tabell med andelar från tabell-objektetet</span>
<span class="er">&gt;</span><span class="st">  </span>prop_table_edu_cat &lt;-<span class="st"> </span><span class="kw">prop.table</span>(freq_table_edu_cat)
<span class="op">&gt;</span><span class="st">  </span>prop_table_edu_cat
<span class="op">&gt;</span><span class="st"> </span>edu_cat
<span class="op">&gt;</span><span class="st"> </span>Låg utbildning Hög utbildning 
<span class="op">&gt;</span><span class="st">      </span><span class="fl">0.5857143</span>      <span class="fl">0.4142857</span>
<span class="op">&gt;</span><span class="st">  </span><span class="kw">str</span>(freq_table_edu_cat)
<span class="op">&gt;</span><span class="st">  &#39;table&#39;</span> int [<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>(1d)] <span class="dv">164</span> <span class="dv">116</span>
<span class="op">&gt;</span><span class="st">  </span><span class="op">-</span><span class="st"> </span><span class="kw">attr</span>(<span class="op">*</span>, <span class="st">&quot;dimnames&quot;</span>)=List of <span class="dv">1</span>
<span class="op">&gt;</span><span class="st">   </span>..<span class="op">$</span><span class="st"> </span>edu_cat<span class="op">:</span><span class="st"> </span>chr [<span class="dv">1</span><span class="op">:</span><span class="dv">2</span>] <span class="st">&quot;Låg utbildning&quot;</span> <span class="st">&quot;Hög utbildning&quot;</span></code></pre></div>
<p>Det är viktigt att beskriva <em>både frekvenser och andelar</em>. Ett kompakt sätt är att kombiinera tabell-objekten med <strong>cbind()</strong>. I exemplet nedan namnger vi sedan kolumnerna. Vi kan se att eftersom <strong>edu_cat</strong> redan har kategorierna namngivna behöver vi inte namnge raderna. Det är en fördel med att arbeta med faktor-variabler istället för numeriska variabler.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="op">&gt;</span><span class="st">  </span><span class="co"># Kombinera frekvenser och andelar. Passa samtidigt på att avrunda till en decimal och göra om variabeln till procent. </span>
<span class="er">&gt;</span><span class="st">  </span>table_edu &lt;-<span class="st"> </span><span class="kw">cbind</span>(freq_table_edu_cat, <span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>prop_table_edu_cat, <span class="dv">1</span>))
<span class="op">&gt;</span><span class="st"> </span><span class="co"># Ge tabellens kolumner namn </span>
<span class="er">&gt;</span><span class="st">  </span><span class="kw">colnames</span>(table_edu) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Frekvens&quot;</span>, <span class="st">&quot;Procent (%)&quot;</span>)
<span class="op">&gt;</span><span class="st">  </span>table_edu
<span class="op">&gt;</span><span class="st">                </span>Frekvens <span class="kw">Procent</span> (%)
<span class="op">&gt;</span><span class="st"> </span>Låg utbildning      <span class="dv">164</span>        <span class="fl">58.6</span>
<span class="op">&gt;</span><span class="st"> </span>Hög utbildning      <span class="dv">116</span>        <span class="fl">41.4</span></code></pre></div>
<p>Avslutningsvis kan det vara värt att notera att tabell-objekt ibland är svåra att arbeta med. En lösning om man hämta enskilda frekvenser från tabell-objekt är då konvertera tabellen till en data frame.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> freq_table_edu_df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(freq_table_edu_cat)
 freq_table_edu_df
<span class="op">&gt;</span><span class="st">          </span>edu_cat Freq
<span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> Låg utbildning  <span class="dv">164</span>
<span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> Hög utbildning  <span class="dv">116</span></code></pre></div>
</div>
<div id="figurer-och-en-binär-variabel" class="section level2">
<h2><span class="header-section-number">5.3</span> Figurer och en binär variabel</h2>
<p>Ett alternativ till tabeller är att använda sig av figurer. För att illustrera kategorivariabler används <strong>stapeldiagram</strong> som man i R konstruerar med funktionen <strong>barplot()</strong>. Använd <em>inte</em> cirkeldiagram för detta syfte. Det går att betrakta stapeldiagram som en grafisk representation av en tabell. Utgångspunkten när man arbetar med <strong>barplot()</strong> i R är därför ofta att först skapa ett tabell-objekt.</p>
<p>Nedan konstrueras två figurer, en baserad på tabell-objektet med frekvenser och en baserad på den med andelar. Observera att nedanstående är avsett att illustrera stapeldiagram och ett <strong>stapeldiagram tillför i fallet med en enda binär variabel ingen information.</strong> Det räcker nästan alltid med att istället bara ange numeriska värden.</p>
<p>Det du också ska uppmärksamma i exemplet är axlarna på ett tydligt sätt namngivna! Glöm inte ange axlarna!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))
<span class="co"># stapeldiagram baserat på tabellen med frekvenser</span>
<span class="kw">barplot</span>(freq_table_edu_cat, 
        <span class="dt">ylab =</span> <span class="st">&quot;Antal&quot;</span>,  
        <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;brown1&quot;</span>, <span class="st">&quot;brown1&quot;</span>))
<span class="co"># stapeldiagram baserat på tabellen med andelar</span>
<span class="kw">barplot</span>(prop_table_edu_cat, 
        <span class="dt">ylab =</span> <span class="st">&quot;Procent (%)&quot;</span>,  
        <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;brown1&quot;</span>, <span class="st">&quot;brown1&quot;</span>))</code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-177-1.png" width="960" /></p>
</div>
<div id="inferens-för-binär-variabel" class="section level2">
<h2><span class="header-section-number">5.4</span> Inferens för binär variabel</h2>
<p>Antar att observationerna är dragna med ett OSU och att vi vill uttala om populationen. Antingen vill vi med viss säkerheter få en uppfattning om andelen i populationen, <span class="math inline">\(p\)</span> eller så vill vi se i vilken utsträckning vårt data stämmer överens med hypotes om populationen. Huruvida urvalet är gjort med eller utan återlägning saknar praktisk betydelse då urvalsstorleken antas vara liten relativt populationsstorleken.</p>
<p>Vi börjar med att se hur vi kan konstruera ett <strong>konfidensintervall</strong> för andelen <span class="math inline">\(p\)</span> i en <strong>stor population</strong> och givet OSU gäller följande:</p>
<ul>
<li>Stickprovsandelen <span class="math inline">\(\hat{p}\)</span> är en väntevärdesriktig skattning av <span class="math inline">\(p\)</span>. Andelen beräknas med <span class="math inline">\(\hat{p}=\dfrac{k}{n}\)</span> där <span class="math inline">\(n\)</span> är antal försök (antalet observationer) och <span class="math inline">\(x\)</span> är antalet lyckade försök (antalet 1or).</li>
<li>Andelsestimatorns varians <span class="math display">\[V(\hat{p}) = \dfrac{p(1-p)}{n}\]</span> skattas med <span class="math display">\[\hat{V}(\hat{p}) = \dfrac{\hat{p}(1-\hat{p})}{n} \]</span>. I Triola (s. 300) skrivs <span class="math inline">\(1 - \hat{p} = \hat{q}\)</span>.</li>
<li>För konfidensintervall krävs att samplingfördelningen är känd. Om <span class="math inline">\(np(1-p)&gt;5\)</span> är andelsestimatorn approximativt normalfördelad. Ett konfidensintervall ges då av <span class="math display">\[
\hat{p}\pm z_{\alpha/2}\sqrt{\hat{V}(\hat{p})}
\]</span></li>
</ul>
<p>Anta att urvalet är från en stor population och vi vill skatta andelen högutbildade i populationen med ett tillhörande 95% konfidensintervall. I Triola (s. 330) skrivs felmarginalen <span class="math inline">\(E=z_{\alpha/2}\sqrt{\hat{V}(\hat{p})}\)</span>.</p>
<p>Anta nu observationerna i <strong>education</strong> är mätningar på individer dragna med OSU från en stor population. Vi vill skapa ett 95% konfidensintervall för andelen i populationen som har hög utbildning, <span class="math inline">\(p\)</span>. Genom att implementera ovanstående formler kan detta enkelt beräknas i R.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Beräkna antalet lyckade försök (antal 1or)</span>
  x &lt;-<span class="st"> </span><span class="kw">sum</span>(edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)  
<span class="co"># Beräkna antal försök (1or or 0r). Denna kodning gör att eventuella NA inte tas med i beräkningen av n</span>
  n &lt;-<span class="st"> </span><span class="kw">sum</span>(edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">1</span>) <span class="op">+</span><span class="st"> </span><span class="kw">sum</span>(edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)
  <span class="co"># Skattning av andelen med hög utbildning. Det går även att använda mean(edu_bin)</span>
  phat &lt;-<span class="st"> </span>x<span class="op">/</span>n   
<span class="co"># Skatta variansen</span>
  vphat &lt;-<span class="st"> </span>phat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>phat)<span class="op">/</span>n
<span class="co"># Välja konfidensgrad 100*(1-alpha)%</span>
  alpha &lt;-<span class="st"> </span><span class="fl">0.05</span>
  z_alpha &lt;-<span class="st"> </span><span class="kw">qnorm</span>((<span class="dv">1</span><span class="op">-</span>alpha<span class="op">/</span><span class="dv">2</span>))
  LB &lt;-<span class="st"> </span>phat <span class="op">-</span><span class="st"> </span>z_alpha<span class="op">*</span><span class="kw">sqrt</span>(vphat)
  UB &lt;-<span class="st"> </span>phat <span class="op">+</span><span class="st"> </span>z_alpha<span class="op">*</span><span class="kw">sqrt</span>(vphat)
  p_KI &lt;-<span class="st"> </span><span class="kw">c</span>(LB, UB)
  p_KI
[<span class="dv">1</span>] <span class="fl">0.3565876</span> <span class="fl">0.4719839</span>
<span class="co"># Undersöker förutsättningen </span>
  n<span class="op">*</span>phat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>phat)
[<span class="dv">1</span>] <span class="fl">67.94286</span></code></pre></div>
<p>Vi skattar att 41.4% är högutbildade i populationen. Med 95% säkerhet är andelen högutbildade i populationen mellan 35.7% och 47.2%</p>
<p>Vi ska nu se på hur inferens kan göras i form av <strong>hypotesprövning</strong>. Givet samma förutsättningar som för skapandet av konfidensintervall ovan gäller följande:</p>
<ul>
<li>Vid hypotesprövning av <span class="math inline">\(H_0: p = p_{H_0}\)</span> är under nollhypotesen</li>
</ul>
<p><span class="math display">\[z = \dfrac{\hat{p} - p_{H_0}}{\sqrt{\dfrac{p_{H_0}(1-p_{H_0})}{n}}}\]</span> approximativt <span class="math inline">\(N(0,1)\)</span> om <span class="math inline">\(np(1-p)&gt;5\)</span>.</p>
<p>Vi exemplifierar med utbildningsexemplet. Anta att vi vill undersöka det är rimligt att 40% i populationen har hög utbildning, men vi har ingen uppfattning om andelen högutbildade är färre eller fler. Vi sätter då upp hypoteserna <span class="math inline">\(H_0: p = 0.4\)</span> vs <span class="math inline">\(H_0: p \neq 0.4\)</span>. Vi kan implementera ovanstående formel, beräkna observerat <span class="math inline">\(z\)</span>-värde och se hur extremt det är i en standardnormalfördelning för att få fram <span class="math inline">\(p\)</span>-värdet. Om vi önskar fatta ett beslut jämför vi sedan <span class="math inline">\(p\)</span>-värdet mot en förvald signifikansnivå.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># p givet nollhypotesen</span>
  pH0 &lt;-<span class="st"> </span><span class="fl">0.4</span>
<span class="co"># Variansen givet nollhypotesen</span>
  vpH0 &lt;-<span class="st"> </span>pH0<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>pH0)<span class="op">/</span>n
<span class="co"># Teststatistika</span>
  zobs &lt;-<span class="st"> </span>(phat <span class="op">-</span><span class="st"> </span>pH0)<span class="op">/</span><span class="kw">sqrt</span>(vpH0)
  zobs
[<span class="dv">1</span>] <span class="fl">0.48795</span>
<span class="co"># zobs pnorm ger vänstersvans-sannolikhet.</span>
  p_value &lt;-<span class="st"> </span><span class="dv">2</span><span class="op">*</span>(<span class="dv">1</span> <span class="op">-</span><span class="st"> </span><span class="kw">pnorm</span>(zobs)) 
  p_value
[<span class="dv">1</span>] <span class="fl">0.6255852</span></code></pre></div>
<p>Vi erhåller att <span class="math inline">\(p=\)</span> 0.626. Tolkningen är att <em>givet att andelen högutbildade i populationen skulle vara 40% är sannolikheten 0.63 att observera andelen som observeras eller mer extrem.</em> Data stämmer alltså ganska väl överens med nollhypotesen. Ett beslut på 5% signifikansnivå innebär att vi inte kan förkasta nollhypotesen. Huruvida vi vill fatta ett beslut eller inte beror på målet för analysen.</p>
<p>Det finns dock en inbyggd funktion i R för att göra motsvarande analys, nämligen <strong>prop.test()</strong>. Vi ska nu se hur du kan använda denna funktion för att skapa ett konfidensintervall för andelen <span class="math inline">\(p\)</span> i en stor population samt genomföra en hypotesprövning.</p>
<p>I funktionen <strong>prop.test()</strong> anges först antalet lyckade försök (1or) samt det totala antalet försök (1or och 0r). Med argumentet <strong>p</strong> anges nollhypotesen och med argumentet <strong>alternative</strong> specificeras mothypotesen. Argumentet <strong>conf.level</strong> anger konfidensgrad för konfidensintervallet. Slutligen bestämmer argumentet <strong>correct</strong> kontinuitetsskorrektion ska användas. Vi använder inte kontinuitetskorrektion på denna kurs och sätter denna till <em>FALSE</em>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Använd funktionen prop.test() för att skapa konfidensintervall utan korrigering</span>
  edu_analysis &lt;-<span class="st"> </span><span class="kw">prop.test</span>(<span class="dt">x =</span> x, <span class="dt">n =</span> n, <span class="dt">p =</span> <span class="fl">0.4</span>, <span class="dt">alternative =</span> <span class="st">&quot;two.sided&quot;</span>, <span class="dt">correct =</span> <span class="ot">FALSE</span>)
  edu_analysis

    <span class="dv">1</span><span class="op">-</span>sample proportions test without continuity correction

data<span class="op">:</span><span class="st">  </span>x out of n, null probability <span class="fl">0.4</span>
X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">0.2381</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value =<span class="st"> </span><span class="fl">0.6256</span>
alternative hypothesis<span class="op">:</span><span class="st"> </span>true p is not equal to <span class="fl">0.4</span>
<span class="dv">95</span> percent confidence interval<span class="op">:</span>
<span class="st"> </span><span class="fl">0.3581276</span> <span class="fl">0.4727639</span>
sample estimates<span class="op">:</span>
<span class="st">        </span>p 
<span class="fl">0.4142857</span> </code></pre></div>
<p>Vi börjar med att se på resultatet från hypotesprövningen och upptäcker exakt samma <span class="math inline">\(p\)</span>-värde som förut! Vårt tidigare observerade <span class="math inline">\(z\)</span>-värde, 0.488 erhålls genom att ta roten ur 0.2380952.</p>
<p>Vidare är konfidensintervallet mycket likt det tidigare framräknade intervallet. De överensstämmer dock inte exakt, vilket beror på att R använder en annan formel för konfidensintervallet som har något bättre egenskaper om andelen är nära 0 eller 1 och stickprovet är litet.</p>
<p>Fördelen med normalapproximationen är pedagogisk, dvs samma formler återkommer senare på kursen.</p>
<hr />
<p><img src="docs/images/warning.png" width="5%" /></p>
<style>
div.green{ background-color:#abd4b3; border-radius: 5px; padding: 20px;}
</style>
<div class="green">
<p><font size="5"> Inferens när <span class="math inline">\(p\)</span> är nära 0 eller 1 </font></p>
<ul>
<li>Om andelen i populationen är nära 0 eller 1 krävs stort stickprov för att inferensen ska bli korrekt! Visserligen har vi tumregeln <span class="math inline">\(np(1-p)&gt;5\)</span>, men om andelen i populationen är mycket nära 0 eller 1 fungerar denna tumregel inte väl om inte stickprovsstorleken är stor.</li>
</ul>
<p>Beträffande konfidensintervall är då Wilson score interval, som R använder i <strong>prop.test</strong>, ett något bättre alternativ än den formeln som vi använder. I de absolut flesta fall har det inget betydelse om vi väljer <strong>prop.test()</strong> eller intervallet som baseras på normalapproximation (vilket vi såg eftersom intervallen var så lika).</p>
<p>För hypotesprövning finns alternativet att använda ett så kallat exakt binomial-test. Detta test introduceras emellertid inte här utan vi hänvisar till funktionen <strong>binom.test()</strong> och tillhörande dokumentation.</p>
<p>Var som sagt uppmärksam om andelen är nära 0 eller nära 1!</p>
<p><strong>Testa med följande app!</strong></p>
<p><a href="https://jetty.im.uu.se/shiny/ConfidenceIntervals_prop/" class="uri">https://jetty.im.uu.se/shiny/ConfidenceIntervals_prop/</a></p>
</div>
<hr />
<p><img src="docs/images/note.png" width="5%" /></p>
<style>
div.yellow{ background-color:#FFFA94; border-radius: 5px; padding: 20px;}
</style>
<div class="yellow">
<p><font size="5"> <span class="math inline">\(\chi^2\)</span>-test och test av <span class="math inline">\(p\)</span> </font></p>
<ul>
<li>I <strong>prop.test()</strong> används <span class="math inline">\(\chi^2\)</span>-test för test av andelar. <span class="math inline">\(\chi^2\)</span>-testet är nämligen direkt relaterat till det <span class="math inline">\(z\)</span>-test som vi använder vid test av andelar (vilket vi såg när vi förut tog roten ur <span class="math inline">\(\chi^2\)</span>-värdet!). Problemet med test av <span class="math inline">\(p\)</span> kan nämligen formuleras utifrån observerade frekvenser (<span class="math inline">\(116\)</span> 1or och <span class="math inline">\(164\)</span> 0or) och under nollhypotesen förväntade frekvenser (<span class="math inline">\(np_{H_0}=112\)</span> 1or och <span class="math inline">\(n(1-p_{H_0})=168\)</span> 0r). Vi illusterar i en tabell:</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="center">1or</th>
<th align="center">0or</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">116 (112)</td>
<td align="center">164 (168)</td>
</tr>
</tbody>
</table>
<p>Formeln för <span class="math inline">\(\chi^2\)</span>-testet går det sedan att tillämpa <span class="math display">\[\chi^2 = \sum \dfrac{(O_i-E_i)^2}{E_i} = \dfrac{(116-112)^2}{112} + \dfrac{(164-168)^2}{168}=0.2381\]</span> vilket i detta fall jämförs med en <span class="math inline">\(\chi^2\)</span>-fördelning med 1 frihetsgrad. Notera att mothypotesen vid <span class="math inline">\(\chi^2\)</span>-testet alltid är två-sidig.</p>
</div>
<hr />
</div>
<div id="deskription-av-två-binära-variabler" class="section level2">
<h2><span class="header-section-number">5.5</span> Deskription av två binära variabler</h2>
<p>När vi har två binära variabler finns fler möjligheter för dessa ska analyseras. Man kan välja att analysera dem var för sig eller så vill man peka hur variablerna är relaterade till varandra. För att göra två binära variabler</p>
</div>
<div id="tabeller-och-två-binära-variabler" class="section level2">
<h2><span class="header-section-number">5.6</span> Tabeller och två binära variabler</h2>
<p>Även om funktionen <strong>table()</strong> kan användas vid analys av en enda variabel, så är den framför allt användbar för att skapa korstabeller, dvs analys av två kategorivariabler samtidigt. I <strong>table()</strong> anges variabeln som ska finnas på raden först, sedan variabeln redovisas. Tabellen som erhålls kallas i fallet med två variabler för tvåvägs-korstabell. Om det går att översätta variablerna i termer av oberoende variabel och beroende variabel, sätts den oberoende variabeln i regel kolumnsvis (x-axel) och den beroende variabeln radvis (y-axel).</p>
<p>Vi exemplifierar nedan med R-kod och vi ska nu beskriva sambandet mellan utbildningsnivå och rökning. Först skapas en korstabell med frekvenser och baserat på denna skapas en korstabell med relativa frekvenser baserat på kolumnprocent. Notera att det kräver en del pusslande, men i gengäld erhålls stor flexibilitet vad gäller den slutliga utformningen av tabellen.</p>
<p>Vi börjar med att skapa en rudimentär korstabell som anger frekvenserna i de fyra cellerna.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Skapa en variabel smoker som är 1 om rökare och 0 om icke-rökare  </span>
  smoker &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,
              <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, 
              <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">0</span>, <span class="dv">1</span>,
              <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,
              <span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">1</span>)
<span class="co"># Korstabulering av edu_bin och smoker (rökning radvis och utbildning kolumnvis)</span>
  freq_table_edu_smoke &lt;-<span class="st"> </span><span class="kw">table</span>(smoker, edu_bin)
  freq_table_edu_smoke
<span class="op">&gt;</span><span class="st">       </span>edu_bin
<span class="op">&gt;</span><span class="st"> </span>smoker  <span class="dv">0</span>  <span class="dv">1</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">0</span> <span class="dv">76</span> <span class="dv">80</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">1</span> <span class="dv">88</span> <span class="dv">36</span></code></pre></div>
<p>För att använda tabellen måste den emellertid modifieras. Dels måste rader och kolumner tydligare namnges så att inga missförstånd uppstår vad gäller tolkning, dels måste sambandet tydliggöras om detta är målet för analys. Det är nämligen svårt att beskriva samband med enbart frekvenser, därför måste vi på ett lämpligt sätt ange andelar (procent). Precis som tidigare används därför funktionen <strong>prop.table()</strong> på ett objekt från <strong>table()</strong>. Eftersom vi nu har en två-vägs kortstabell ger <strong>prop.table()</strong> tre möjligheter att beräkna andelar:</p>
<ul>
<li>Andelar baserade på totala antalet (default)</li>
<li>Andelar beräknade utifrån radvisa totaler i nämnarna, genom att sätta argumentet <strong>margin = 1</strong></li>
<li>Andelar baserade på kolumnvisa totaler i nämnarna, genom sätta argumentet <strong>margin = 2</strong>.</li>
</ul>
<p>Notera att det är mycket viktigt att välja rätt andelar att beräkna eftersom dessa styr tolkningen av resultaten. Vi illustrerar nu hur andelarna beräknas i R och tolkar dem sen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Andelar baserat alla</span>
  table_all &lt;-<span class="st"> </span><span class="kw">prop.table</span>(freq_table_edu_smoke)
  table_all
<span class="op">&gt;</span><span class="st">       </span>edu_bin
<span class="op">&gt;</span><span class="st"> </span>smoker         <span class="dv">0</span>         <span class="dv">1</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">0</span> <span class="fl">0.2714286</span> <span class="fl">0.2857143</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">1</span> <span class="fl">0.3142857</span> <span class="fl">0.1285714</span>
<span class="co"># Andelar baserat rader</span>
  table_row_prop &lt;-<span class="st"> </span><span class="kw">prop.table</span>(freq_table_edu_smoke, <span class="dt">margin =</span> <span class="dv">1</span>)
  table_row_prop 
<span class="op">&gt;</span><span class="st">       </span>edu_bin
<span class="op">&gt;</span><span class="st"> </span>smoker         <span class="dv">0</span>         <span class="dv">1</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">0</span> <span class="fl">0.4871795</span> <span class="fl">0.5128205</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">1</span> <span class="fl">0.7096774</span> <span class="fl">0.2903226</span>
<span class="co"># Andelar baserat kolumner</span>
  table_column_prop &lt;-<span class="st"> </span><span class="kw">prop.table</span>(freq_table_edu_smoke, <span class="dt">margin =</span> <span class="dv">2</span>)
  table_column_prop  
<span class="op">&gt;</span><span class="st">       </span>edu_bin
<span class="op">&gt;</span><span class="st"> </span>smoker         <span class="dv">0</span>         <span class="dv">1</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">0</span> <span class="fl">0.4634146</span> <span class="fl">0.6896552</span>
<span class="op">&gt;</span><span class="st">      </span><span class="dv">1</span> <span class="fl">0.5365854</span> <span class="fl">0.3103448</span></code></pre></div>
<p>Spendera tid med att tolka vad de olika tabellerna säger!</p>
<p>För att förenkla resonemangen beskriver vi sambanden i termer av sannolikheter.</p>
<ul>
<li>Den första tabellen visar att av alla i undersökningen är 27.1% icke-rökare och har låg utbildning. Om urvalet är slumpmässigt är detta således en skattning av sannolikheten <span class="math inline">\(\Pr(\text{Icke-rökare}\,\, \&amp; \,\, \text{Låg utbildning})\)</span>. På motsvarande sätt är 28.6%, 31.4% och 12.9% skattningar av <span class="math inline">\(\Pr(\text{Icke-rökare}\,\, \&amp; \,\, \text{Hög utbildning})\)</span>, <span class="math inline">\(\Pr(\text{Rökare}\,\, \&amp; \,\, \text{Låg utbildning})\)</span> och <span class="math inline">\(\Pr(\text{Rökare}\,\, \&amp; \,\, \text{Hög utbildning})\)</span>. Huruvida dessa skattningar är relevanta beror på syftet med undersökningen, men oftast är det mer relevant att skatta de betingade sannolikheter och sedan jämföra dessa.</li>
<li>Den andra tabellen visar, genom att beräkna radprocent, att bland icke-rökarna har 48.7% låg utbildning. Det innebär naturligtvis att bland icke-rökarna har 51.3% hög utbildning. Om urvalet är slumpmässigt är dessa skattningar av <span class="math inline">\(\Pr(\text{Låg utbildning}|\text{Icke-rökare})\)</span> och <span class="math inline">\(\Pr(\text{Hög utbildning}|\text{Icke-rökare})\)</span>. På motsvarande sätt har 71% låg utbildning respektive 29% hög utbildning bland rökarna. <span class="math inline">\(\Pr(\text{Låg utbildning}|\text{Rökare})\)</span> och <span class="math inline">\(\Pr(\text{Hög utbildning}|\text{Rökare})\)</span>. Vi kan alltså med denna analys jämföra utbildningsnivån bland icke-rökare och rökare.</li>
<li>Den tredje tabellen visar, genom att beräkna kolumnprocent, att bland de lågutbildade röker 53.7% medan bland de högutbildade röker 31%. Detta är således skattningar av <span class="math inline">\(\Pr(\text{Rökare} | \text{Låg utbildning})\)</span> respektive <span class="math inline">\(\Pr(\text{Rökare} | \text{Hög utbildning})\)</span>. På motsvarande sätt är 46.3% och 69% skattningar av <span class="math inline">\(\Pr(\text{Icke-rökare}|\text{Låg utbildning})\)</span> och <span class="math inline">\(\Pr(\text{Icke-rökare}|\text{Hög utbildning})\)</span>. Vi kan konstatera att i stickprovet är andelen rökare större bland lågutbildade än högutbildade.</li>
</ul>
<p>Vilken tabell vi väljer att redovisa beror således på frågeställningen. Om vi tänker oss att vi vill studera om utbildning påverkar benägenheten att röka, vilket förmodligen är den frågan som ställs, så är den tredje tabellen den som ska redovisas. Det är då enkelt att jämföra andelarna som röker i respektive utbildningskategori.</p>
<p>Vi konstruerar därför en korstabell som på beskriver sambandet i den tredje varianten och som, för fullständighets skull, innehåller <em>både</em> frekvenser och andelar. Tabellen konstrueras på motsvarande sätt som när vi konstruerade en tabell med en enda binär variabel.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Skapa tabell för presentation av analys</span>
  table_edu_smoke &lt;-<span class="st"> </span><span class="kw">cbind</span>(freq_table_edu_smoke[,<span class="dv">1</span>], <span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>table_column_prop[,<span class="dv">1</span>], <span class="dv">1</span>),
                           freq_table_edu_smoke[,<span class="dv">2</span>], <span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>table_column_prop[,<span class="dv">2</span>], <span class="dv">1</span>))
  <span class="kw">colnames</span>( table_edu_smoke ) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Låg (n)&quot;</span>, <span class="st">&quot;Låg (%)&quot;</span>, <span class="st">&quot;Hög (n)&quot;</span>, <span class="st">&quot;Låg (%)&quot;</span>)
  <span class="kw">rownames</span>( table_edu_smoke ) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Icke-rökare&quot;</span>, <span class="st">&quot;Rökare&quot;</span>)
  table_edu_smoke
<span class="op">&gt;</span><span class="st">             </span>Lå<span class="kw">g</span> (n) Lå<span class="kw">g</span> (<span class="op">%) Hög (n) Låg (%</span>)
<span class="op">&gt;</span><span class="st"> </span>Icke<span class="op">-</span>rökare      <span class="dv">76</span>    <span class="fl">46.3</span>      <span class="dv">80</span>      <span class="dv">69</span>
<span class="op">&gt;</span><span class="st"> </span>Rökare           <span class="dv">88</span>    <span class="fl">53.7</span>      <span class="dv">36</span>      <span class="dv">31</span></code></pre></div>
<p>Avslutningsvis, för fullständighetens skull, använder vi funktionen <strong>addmargins()</strong> på tabellobjektet för att addera marginalsummor till tabellen. Genom att anges 1 är det kolumnsvisa summor, men det går att för andra tabeller använda 2 eller inte för att addera radvis eller både kolumner och rader.</p>
<p>Nu är vi klara med tabellen! Det som återstår är att exportera den till ett ordbehandlingsprogram eller ett bildspel, men detta beskrivs i ett senare avsnitt.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"> table_edu_smoke_final &lt;-<span class="st"> </span><span class="kw">addmargins</span>(table_edu_smoke, <span class="dv">1</span>) 
 <span class="kw">rownames</span>( table_edu_smoke_final ) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Icke-rökare&quot;</span>, <span class="st">&quot;Rökare&quot;</span>, <span class="st">&quot;Summa&quot;</span>)
 table_edu_smoke_final 
<span class="op">&gt;</span><span class="st">             </span>Lå<span class="kw">g</span> (n) Lå<span class="kw">g</span> (<span class="op">%) Hög (n) Låg (%</span>)
<span class="op">&gt;</span><span class="st"> </span>Icke<span class="op">-</span>rökare      <span class="dv">76</span>    <span class="fl">46.3</span>      <span class="dv">80</span>      <span class="dv">69</span>
<span class="op">&gt;</span><span class="st"> </span>Rökare           <span class="dv">88</span>    <span class="fl">53.7</span>      <span class="dv">36</span>      <span class="dv">31</span>
<span class="op">&gt;</span><span class="st"> </span>Summa           <span class="dv">164</span>   <span class="fl">100.0</span>     <span class="dv">116</span>     <span class="dv">100</span></code></pre></div>
</div>
<div id="kvantifiering-av-samband-mellan-två-binära-variabler" class="section level2">
<h2><span class="header-section-number">5.7</span> Kvantifiering av samband mellan två binära variabler</h2>
<p>Från tabellen kan vi välja att kvantifiera sambandet mellan två binär variabler med olika mått (även kallat effektstorlekar) och de tre vanligaste måtten är:</p>
<ul>
<li>Skillnaden i andelar: <span class="math display">\[p_{diff} = \Pr(Y=1|X=1) - \Pr(Y=0|X=1)\]</span>. Skillnaden i andelar kan anta värdena <span class="math inline">\(-1 \leq p_{diff} \leq1\)</span>. Även ofta kallat riskdifferens.</li>
<li>Kvoten av andelar: <span class="math display">\[p_{kvot} = \Pr(Y=1|X=1)/\Pr(Y=0|X=1)\]</span>. Kvoten av andelar kan anta värdena <span class="math inline">\(0 \leq p_{kvot} &lt; \infty\)</span>. Även ofta kallat relativ risk.</li>
<li>Oddskvoten: <span class="math display">\[p_{OR} = \dfrac{Odds(X=1)}{Odds(X=0)}=\dfrac{\dfrac{\Pr(Y=1|X=1)}{1 - \Pr(Y=1|X=1)}}{\dfrac{\Pr(Y=1|X=0)}{1 - \Pr(Y=1|X=0)}},\]</span>, där oddset för en händelse givet <span class="math inline">\(x\)</span> är <span class="math display">\[Odds(X=x)=\dfrac{\Pr(Y=1|X=x)}{1-(\Pr(Y=1|X=x)}=\dfrac{\Pr(Y=1|X=x)}{\Pr(Y=0|X=x)}.\]</span> Oddskvoten kan anta värdena <span class="math inline">\(0 \leq p_{OR} &lt; \infty\)</span>. (Även ofta kallat oddsratio). Se Triola (s143) för en definition av oddset.</li>
</ul>
<p>Alla dessa mått går mycket enkelt att beräkna efter beräkning av av <span class="math inline">\(\Pr(Y=1|X=1)\)</span> samt <span class="math inline">\(\Pr(Y=1|X=0)\)</span> i tabellen. Vilket mått som är mest relevant att presentera beror på syftet med undersökningen, men ofta är skillnaden i andelar mest policy-relevant, medan kvoten av andelar risk är relevant för individen. Oddskvoten är ett mått som också som vi har olika skäl måste använda eftersom det finns studiedesigner och statistiska metoder som ger oss denna typ av samband.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Beräkna andelen rökare bland högutbildade </span>
<span class="co"># (Alternativt hämta andelarna från tabellen med table_row_prop[2,2])</span>
phat1 &lt;-<span class="st"> </span><span class="kw">mean</span>( smoker[edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">1</span>] )  
<span class="co"># Beräkna andelen rökare bland lågutbildade </span>
<span class="co"># (Alternativt hämta andelarna från tabellen med table_row_prop[2,1])</span>
phat0 &lt;-<span class="st"> </span><span class="kw">mean</span>( smoker[edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">0</span>] )
<span class="co"># Skillnad i andelar (riskdifferens)</span>
phat_diff &lt;-<span class="st"> </span>phat1 <span class="op">-</span><span class="st"> </span>phat0
<span class="co"># kvot av andelar (relativ risk)</span>
phat_kvot &lt;-<span class="st"> </span>phat1<span class="op">/</span>phat0
<span class="co"># oddskvot</span>
phat_or &lt;-<span class="st"> </span>(phat1<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>phat1)) <span class="op">/</span><span class="st"> </span>((phat0<span class="op">/</span>(<span class="dv">1</span><span class="op">-</span>phat0)))
phat_diff
[<span class="dv">1</span>] <span class="op">-</span><span class="fl">0.2262405</span>
phat_kvot
[<span class="dv">1</span>] <span class="fl">0.5783699</span>
phat_kvot
[<span class="dv">1</span>] <span class="fl">0.5783699</span></code></pre></div>
<p>Hur tolkar du resultatet? Vad gäller tolkning av resultat borde det kanske vara rimligt ur presentationsperspektiv att vända på analysen, dvs i vilken utsträckning ökar låg utbildning benägenheten att röka?</p>
</div>
<div id="figurer-och-två-binära-variabler" class="section level2">
<h2><span class="header-section-number">5.8</span> Figurer och två binära variabler</h2>
<p>Relationen mellan tabeller och figurer blir tydlig när man skapar diagram. Återigen tillämpar vi <strong>barplot()</strong> på tabellobjekten.</p>
<ul>
<li>Med <em>freq_table_edu_smoke</em> skapas en stapeldiagram som redovisar antalet i respektive kategori. Vad denna figur visar är att det finns fler lågutbildade än högutbildade. Dessutom ser vi hur storleken på hur många som finns i varje cell i tabellen. Denna figur är kan vara relevant i en del fall, men oftas blir det svårt att utläsa samband.</li>
<li>Med <em>table_row_prop</em> blir figuren meninglös eftersom andelarna i tabellen ska summeras radvis och stapeldiagrammet utgår från kolumner eftersom . Enligt tabellen skulle alltså andelen lågutbildade vara mer än 1!</li>
<li>Med <em>table_col_prop</em> ges en tydlig bild av om andelen rökare inom respektive utbildning. Om vi däremot önskar få en uppfattning om hur många som finns i respektive kategori är denna figu otillräcklig.</li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>( freq_table_edu_smoke, <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;Låg utbildning&quot;</span>, <span class="st">&quot;Hög utbildning&quot;</span>), 
         <span class="dt">ylab =</span> <span class="st">&quot;Antal&quot;</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Icke-rökare&quot;</span>, <span class="st">&quot;Rökare&quot;</span>) )</code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-188-1.png" width="576" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">barplot</span>( table_row_prop, <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;Låg utbildning&quot;</span>, <span class="st">&quot;Hög utbildning&quot;</span>), 
         <span class="dt">ylab =</span> <span class="st">&quot;Andel&quot;</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Icke-rökare&quot;</span>, <span class="st">&quot;Rökare&quot;</span>))</code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-188-2.png" width="576" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="kw">barplot</span>( table_column_prop, <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;Låg utbildning&quot;</span>, <span class="st">&quot;Hög utbildning&quot;</span>), 
         <span class="dt">ylab =</span> <span class="st">&quot;Andel&quot;</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Icke-rökare&quot;</span>, <span class="st">&quot;Rökare&quot;</span>))</code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-188-3.png" width="576" /></p>
<p>Anta att väljer det tredje alternativet eftersom vill studera andelen rökare inom respektive utbildningskategori. Då kan man använda argumentet <strong>beside</strong> och lägga staplarna bredvid varandra för tydligare åskådliga sambandet. Alternativt redovisar vi enbart rad 2 från tabellen, dvs andelen rökare, i figuren.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>( table_column_prop, <span class="dt">beside=</span><span class="ot">TRUE</span>, <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;Låg utbildning&quot;</span>, <span class="st">&quot;Hög utbildning&quot;</span>), 
         <span class="dt">ylab =</span> <span class="st">&quot;Andel&quot;</span>, <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Icke-rökare&quot;</span>, <span class="st">&quot;Rökare&quot;</span>))</code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-189-1.png" width="576" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">barplot</span>( table_row_prop[<span class="dv">2</span>,], <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;Låg utbildning&quot;</span>, <span class="st">&quot;Hög utbildning&quot;</span>), <span class="dt">ylab =</span> <span class="st">&quot;Andel rökare&quot;</span>)</code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-189-2.png" width="576" /></p>
<p>Figuren är i stort sätt korrekt, men det kan behövas ytterligare arbete för att få figuren publikationsredo.</p>
<ol style="list-style-type: decimal">
<li>Vi lägger till procent ovanför staplarna med hjälp av funktionen <strong>text()</strong>. I denna funktion anges koordinater (x,y) för var texten ska in, där x-koordinaten är staplarnas placering i objektet my_bar och ofta får man testa sig fram. Med argumentet <strong>labels</strong> bestäms vad som ska stå över staplarna. Funktionen <strong>paste</strong> används för att sammanfoga numeriska värden och text, i detta fall procenttecknet.</li>
<li>Vi ändrar också färg på figuren samt gränserna för y-axeln med argumentet <strong>ylim</strong>. Annars får inte procentsiffrorna plats.</li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Gör om andelar till procent </span>
  percentages_smoker &lt;-<span class="st"> </span><span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>table_row_prop[<span class="dv">2</span>,], <span class="dv">1</span>)
<span class="co"># Skapa objekt så vi kan hämta information från figurobjekt </span>
  my_bar &lt;-<span class="st"> </span><span class="kw">barplot</span>(  percentages_smoker, 
                      <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;Låg utbildning&quot;</span>, <span class="st">&quot;Hög utbildning&quot;</span>), 
                      <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">80</span>), 
                      <span class="dt">col =</span> <span class="st">&quot;lightblue&quot;</span>,
                      <span class="dt">border =</span> <span class="st">&quot;lightblue&quot;</span>,
                      <span class="dt">ylab =</span> <span class="st">&quot;Röker (%)&quot;</span>)
<span class="co"># Lägg till text i figuren  </span>
  <span class="kw">text</span>(<span class="dt">x =</span> my_bar, <span class="dt">y =</span> percentages_smoker <span class="op">+</span><span class="st"> </span><span class="dv">6</span>, <span class="dt">labels =</span> <span class="kw">paste</span>(percentages_smoker, <span class="st">&quot;%&quot;</span>,  <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)) </code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-190-1.png" width="576" /></p>
<p>Notera att figuren inte redovisar basen, dvs <span class="math inline">\(n\)</span>-talet som andelarna baseras på. En förutsätting för denna figur är att vi har tillräckligt många observationer så att det är värdefullt att redovisa andelar.</p>
</div>
<div id="inferens-för-två-binära-variabler" class="section level2">
<h2><span class="header-section-number">5.9</span> Inferens för två binära variabler</h2>
<p>Anta nu att vi antar att vi vill jämföra andelen i två populationer med proportionerna <span class="math inline">\(p_1\)</span> och <span class="math inline">\(p_0\)</span>. Vi drar två oberoende OSU.</p>
<p>Precis som förut inleder vi med att titta på konfidensintervall och vi nöjer oss med konfidensintervall för skillnaden i andelar. Ni kommer senare få konfidensintervall för de andra två måtten. Givet att förutsättningarna för normalapproximation håller ges ett konfidensintervall av:</p>
<ul>
<li><span class="math display">\[\hat{p_1} - \hat{p_0}\pm  z_{\alpha/2}\sqrt{\dfrac{\hat{p_1}(1-\hat{p_1})}{n_1} + \dfrac{\hat{p_0}(1-\hat{p_0})}{n_0}}\]</span></li>
</ul>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Version 1</span>
x0 &lt;-<span class="st">  </span>freq_table_edu_smoke[<span class="dv">2</span>,<span class="dv">1</span>]
x1 &lt;-<span class="st">  </span>freq_table_edu_smoke[<span class="dv">2</span>,<span class="dv">2</span>]
n0 &lt;-<span class="st"> </span><span class="kw">sum</span>(freq_table_edu_smoke[,<span class="dv">1</span>])
n1 &lt;-<span class="st"> </span><span class="kw">sum</span>(freq_table_edu_smoke[,<span class="dv">2</span>])
resultat &lt;-<span class="st"> </span><span class="kw">prop.test</span>(<span class="kw">c</span>(x1, x0), <span class="kw">c</span>(n1, n0), <span class="dt">correct =</span> <span class="ot">FALSE</span>)
p_differens &lt;-<span class="st"> </span>resultat<span class="op">$</span>estimate[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>resultat<span class="op">$</span>estimate[<span class="dv">2</span>]

<span class="co"># Version 2</span>
phat1 &lt;-<span class="st"> </span><span class="kw">mean</span>(smoker[edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">1</span>])
phat0 &lt;-<span class="st"> </span><span class="kw">mean</span>(smoker[edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">0</span>])
phatdiff &lt;-<span class="st"> </span>phat1 <span class="op">-</span><span class="st"> </span>phat0
n1 &lt;-<span class="st"> </span><span class="kw">sum</span>(edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">1</span>)
n0 &lt;-<span class="st"> </span><span class="kw">sum</span>(edu_bin <span class="op">==</span><span class="st"> </span><span class="dv">0</span>)
vhat_pdiff &lt;-<span class="st"> </span>phat1<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>phat1)<span class="op">/</span>n1 <span class="op">+</span><span class="st"> </span>phat0<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>phat0)<span class="op">/</span>n0 
z_alpha &lt;-<span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)
ll &lt;-<span class="st"> </span>phat_diff <span class="op">-</span><span class="st"> </span>z_alpha<span class="op">*</span><span class="kw">sqrt</span>(vhat_pdiff)
ul &lt;-<span class="st"> </span>phat_diff <span class="op">+</span><span class="st"> </span>z_alpha<span class="op">*</span><span class="kw">sqrt</span>(vhat_pdiff)
ll
[<span class="dv">1</span>] <span class="op">-</span><span class="fl">0.3398732</span>
ul
[<span class="dv">1</span>] <span class="op">-</span><span class="fl">0.1126079</span></code></pre></div>
<p>Om vi vill genomföra hypotesprövning och testa <span class="math inline">\(H_0: p_1 = p_0\)</span> mot en två-sidig mothypotes, <span class="math inline">\(H_0: p_1 \neq p_0\)</span> är ett <span class="math inline">\(\chi^2\)</span>-test likvärdigt med att använda testfunktionen <span class="math display">\[ z = \dfrac{\hat{p}_1 - \hat{p}_0}{\hat{p}_{pool}(1- \hat{p}_{pool})\left(\dfrac{1}{n_1} + \dfrac{1}{n_0}\right)}\]</span> där <span class="math display">\[\hat{p}_{pool} = \dfrac{n_1\hat{p}_1 + n_0 \hat{p}_0}{n_1 + n_0}\]</span>. Testfunktionen är <span class="math inline">\(N(0,1)\)</span> om nollhypotesen är sann och att normalapproximation (CGS) gäller, dvs <span class="math inline">\(n_1p_1(1-p_1) &gt; 5\)</span> och <span class="math inline">\(n_0p_0(1-p_0) &gt; 5\)</span>. Fördelen med test-funktionen är att man kan ställa en en-sidig mothypotes och hypotesen är tydligare formulerade. Den underlättar också beräkningar för stickprovsstorlek.</p>
<p>En aspekt är testfunktionens utseende skiljer sig åt från konfidensintervallet. Anledningen är att nollhypotesen bestämmer variansen.</p>
<p>Vi jämför nedan tre olika att genomföra en hypotesprövning. Alla <span class="math inline">\(p\)</span>-värden är samma och tolkas som att givet att andelen rökare är lika stor i bägge grupperna av utbildning i populationen så är det 0.002 sannolikhet att hitta en så stor skillnad i andelar eller större än det resultat vi har erhållit. Data stämmer alltså inte särskilt väl överens med nollhypotesen.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">c</span>(x1, x0), <span class="kw">c</span>(n1, n0), <span class="dt">correct =</span> <span class="ot">FALSE</span>)

    <span class="dv">2</span><span class="op">-</span>sample test <span class="cf">for</span> equality of proportions without continuity
    correction

data<span class="op">:</span><span class="st">  </span><span class="kw">c</span>(x1, x0) out of <span class="kw">c</span>(n1, n0)
X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">14.095</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value =<span class="st"> </span><span class="fl">0.0001738</span>
alternative hypothesis<span class="op">:</span><span class="st"> </span>two.sided
<span class="dv">95</span> percent confidence interval<span class="op">:</span>
<span class="st"> </span><span class="op">-</span><span class="fl">0.3398732</span> <span class="op">-</span><span class="fl">0.1126079</span>
sample estimates<span class="op">:</span>
<span class="st">   </span>prop <span class="dv">1</span>    prop <span class="dv">2</span> 
<span class="fl">0.3103448</span> <span class="fl">0.5365854</span> 

<span class="kw">chisq.test</span>( <span class="kw">table</span>(edu_bin, smoker), <span class="dt">correct =</span> <span class="ot">FALSE</span> )

    Pearson<span class="st">&#39;s Chi-squared test</span>

<span class="st">data:  table(edu_bin, smoker)</span>
<span class="st">X-squared = 14.095, df = 1, p-value = 0.0001738</span>

<span class="st">pooled_phat &lt;- (n1*phat1 + n0*phat0)/(n1 + n0)</span>
<span class="st">z &lt;- (phat1 - phat0)/sqrt( pooled_phat*(1-pooled_phat)*(1/n1 + 1/n0))</span>
<span class="st">z</span>
<span class="st">[1] -3.754285</span>
<span class="st">z^2</span>
<span class="st">[1] 14.09465</span>
<span class="st">2*pnorm(z)</span>
<span class="st">[1] 0.0001738371</span></code></pre></div>
<p>Ensidig hypotesprövning <span class="math inline">\(H_1: p_1 &lt; p_0\)</span>, dvs att vi testar att i populationen så är andelen rökare färre i gruppen högutbildade, skulle ge följande resultat. Nu får vi <span class="math inline">\(p&lt;0.001\)</span>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">prop.test</span>(<span class="kw">c</span>(x1, x0), <span class="kw">c</span>(n1, n0), <span class="dt">alternativ =</span> <span class="st">&quot;less&quot;</span>, <span class="dt">correct =</span> <span class="ot">FALSE</span>)

    <span class="dv">2</span><span class="op">-</span>sample test <span class="cf">for</span> equality of proportions without continuity
    correction

data<span class="op">:</span><span class="st">  </span><span class="kw">c</span>(x1, x0) out of <span class="kw">c</span>(n1, n0)
X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">14.095</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value =<span class="st"> </span><span class="fl">8.692e-05</span>
alternative hypothesis<span class="op">:</span><span class="st"> </span>less
<span class="dv">95</span> percent confidence interval<span class="op">:</span>
<span class="st"> </span><span class="op">-</span><span class="fl">1.000000</span> <span class="op">-</span><span class="fl">0.130877</span>
sample estimates<span class="op">:</span>
<span class="st">   </span>prop <span class="dv">1</span>    prop <span class="dv">2</span> 
<span class="fl">0.3103448</span> <span class="fl">0.5365854</span> 

pooled_phat &lt;-<span class="st"> </span>(n1<span class="op">*</span>phat1 <span class="op">+</span><span class="st"> </span>n0<span class="op">*</span>phat0)<span class="op">/</span>(n1 <span class="op">+</span><span class="st"> </span>n0)
z &lt;-<span class="st"> </span>(phat1 <span class="op">-</span><span class="st"> </span>phat0)<span class="op">/</span><span class="kw">sqrt</span>( pooled_phat<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>pooled_phat)<span class="op">*</span>(<span class="dv">1</span><span class="op">/</span>n1 <span class="op">+</span><span class="st"> </span><span class="dv">1</span><span class="op">/</span>n0))
z
[<span class="dv">1</span>] <span class="op">-</span><span class="fl">3.754285</span>
z<span class="op">^</span><span class="dv">2</span>
[<span class="dv">1</span>] <span class="fl">14.09465</span>
<span class="kw">pnorm</span>(z)
[<span class="dv">1</span>] <span class="fl">8.691855e-05</span></code></pre></div>
</div>
<div id="övningar-3" class="section level2">
<h2><span class="header-section-number">5.10</span> Övningar</h2>
<div id="övning-5.1" class="section level3 unnumbered">
<h3>Övning 5.1</h3>
<p>En undersökning ville testa jämföra andelen vänsterhänta bland män och kvinnor. I studien drogs ett OSU av med 30 kvinnor varav 6 var vänsterhänta samt ett OSU med 29 män varav 4 är vänsterhänta. Är andelen vänsterhänta mellan kvinnor och män samma? Redovisa p-värdet som du erhåller från ett test av nollhypotesen. Tolka resultatet.</p>
<button title="q501" type="button" onclick="if(document.getElementById('q501') .style.display=='none')
              {document.getElementById('q501') .style.display=''}
            else{document.getElementById('q501') .style.display='none'}">
Visa svar
</button>
<div id="q501" style="display:none">
<div class="alert alert-info">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x_f &lt;-<span class="st"> </span><span class="dv">6</span>
n_f &lt;-<span class="st"> </span><span class="dv">30</span>
x_m &lt;-<span class="st"> </span><span class="dv">4</span>
n_m&lt;-<span class="st"> </span><span class="dv">29</span>
<span class="kw">prop.test</span>(<span class="kw">c</span>(x_f,x_m), <span class="kw">c</span>(n_f, n_m), <span class="dt">correct =</span> <span class="ot">FALSE</span>)
<span class="op">&gt;</span><span class="st"> </span>Warning <span class="cf">in</span> <span class="kw">prop.test</span>(<span class="kw">c</span>(x_f, x_m), <span class="kw">c</span>(n_f, n_m), <span class="dt">correct =</span> <span class="ot">FALSE</span>)<span class="op">:</span><span class="st"> </span>Chi<span class="op">-</span>
<span class="er">&gt;</span><span class="st"> </span>squared approximation may be incorrect
<span class="op">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st">   </span><span class="dv">2</span><span class="op">-</span>sample test <span class="cf">for</span> equality of proportions without continuity
<span class="op">&gt;</span><span class="st">   </span>correction
<span class="op">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st"> </span>data<span class="op">:</span><span class="st">  </span><span class="kw">c</span>(x_f, x_m) out of <span class="kw">c</span>(n_f, n_m)
<span class="op">&gt;</span><span class="st"> </span>X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">0.40357</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value =<span class="st"> </span><span class="fl">0.5252</span>
<span class="op">&gt;</span><span class="st"> </span>alternative hypothesis<span class="op">:</span><span class="st"> </span>two.sided
<span class="op">&gt;</span><span class="st"> </span><span class="dv">95</span> percent confidence interval<span class="op">:</span>
<span class="er">&gt;</span><span class="st">  </span><span class="op">-</span><span class="fl">0.1282953</span>  <span class="fl">0.2524333</span>
<span class="op">&gt;</span><span class="st"> </span>sample estimates<span class="op">:</span>
<span class="er">&gt;</span><span class="st">   </span>prop <span class="dv">1</span>   prop <span class="dv">2</span> 
<span class="op">&gt;</span><span class="st"> </span><span class="fl">0.200000</span> <span class="fl">0.137931</span>

<span class="co"># Undersök de förväntade frekvenserna</span>
test &lt;-<span class="st"> </span><span class="kw">chisq.test</span>( <span class="kw">as.table</span>( <span class="kw">matrix</span>( <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">24</span>, <span class="dv">4</span>, <span class="dv">25</span>), <span class="dv">2</span>, <span class="dv">2</span>) ), <span class="dt">correct =</span> <span class="ot">FALSE</span>)
<span class="op">&gt;</span><span class="st"> </span>Warning <span class="cf">in</span> <span class="kw">chisq.test</span>(<span class="kw">as.table</span>(<span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">24</span>, <span class="dv">4</span>, <span class="dv">25</span>), <span class="dv">2</span>, <span class="dv">2</span>)), <span class="dt">correct =</span>
<span class="op">&gt;</span><span class="st"> </span><span class="ot">FALSE</span>)<span class="op">:</span><span class="st"> </span>Chi<span class="op">-</span>squared approximation may be incorrect
test
<span class="op">&gt;</span><span class="st"> </span>
<span class="er">&gt;</span><span class="st">   </span>Pearson<span class="st">&#39;s Chi-squared test</span>
<span class="st">&gt; </span>
<span class="st">&gt; data:  as.table(matrix(c(6, 24, 4, 25), 2, 2))</span>
<span class="st">&gt; X-squared = 0.40357, df = 1, p-value = 0.5252</span>
<span class="st">test$expected</span>
<span class="st">&gt;           A         B</span>
<span class="st">&gt; A  5.084746  4.915254</span>
<span class="st">&gt; B 24.915254 24.084746</span></code></pre></div>
<p>Chi-tvåtest går alltså inte att använda! Det finns alternativa test som Fishers exakta test (se Triola, s583), men detta är inget som ingår på kursen.</p>
</div>
</div>
<p></br></p>
</div>
<div id="övning-5.2" class="section level3 unnumbered">
<h3>Övning 5.2</h3>
<p>Raghubir &amp; Srivastava (2009) undersökte effekten av storleken på sedlar och mynt på i vilken utsträckning pengarna används. Ett experiment genomfördes där 46 studenter fick en endollarssedel och 43 stycken studenter fick 4 stycken amerikanska 25 cents mynt, så kallade quarters. Studenterna fick sedan välja mellan att spara pengarna eller spendera dem på tuggummi och mintpastiller.</p>
<p>Nedan redovisas en sammanfattning av studien.</p>
<table>
<thead>
<tr class="header">
<th></th>
<th align="center">1 dollar sedel</th>
<th align="center">4 quarters</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Spenderade pengarna</td>
<td align="center">12</td>
<td align="center">27</td>
</tr>
<tr class="even">
<td>Sparade pengarna</td>
<td align="center">34</td>
<td align="center">16</td>
</tr>
</tbody>
</table>
<ol style="list-style-type: lower-alpha">
<li><p>Skapa en tabell som deskriptivt redovisar sambandet</p></li>
<li><p>Skapa en figur som deskriptivt redovisar sambandet</p></li>
<li><p>Skatta skillnaden i andelar</p></li>
<li><p>Beräkna <span class="math inline">\(p\)</span>-värdet om givet att det inte finns någon skillnad mellan grupperna vad gäller andelen som spenderar pengarna.</p></li>
</ol>
<button title="q502" type="button" onclick="if(document.getElementById('q502') .style.display=='none')
              {document.getElementById('q502') .style.display=''}
            else{document.getElementById('q502') .style.display='none'}">
Visa svar
</button>
<div id="q502" style="display:none">
<div class="alert alert-info">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())
<span class="co"># a)</span>
freq_table &lt;-<span class="st"> </span><span class="kw">as.table</span>( <span class="kw">matrix</span>( <span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">34</span>, <span class="dv">27</span>, <span class="dv">16</span>), <span class="dv">2</span>, <span class="dv">2</span>))
<span class="kw">colnames</span>(freq_table) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1 dollarsedel&quot;</span>, <span class="st">&quot;4 quarters&quot;</span>)
<span class="kw">rownames</span>(freq_table) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Spenderade pengarna&quot;</span>, <span class="st">&quot;Sparade pengarna&quot;</span>)
prop_table &lt;-<span class="st"> </span><span class="kw">prop.table</span>(freq_table, <span class="dv">2</span>)
table_bill_spending &lt;-<span class="st"> </span><span class="kw">cbind</span>(freq_table[,<span class="dv">1</span>], <span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>prop_table[,<span class="dv">1</span>], <span class="dv">1</span>),
                             freq_table[,<span class="dv">2</span>], <span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>prop_table[,<span class="dv">2</span>], <span class="dv">1</span>))
<span class="kw">colnames</span>(table_bill_spending) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1 dollar (n)&quot;</span>, <span class="st">&quot;1 dollarsedel (%)&quot;</span>, <span class="st">&quot;4 quarters (n)&quot;</span>, <span class="st">&quot;4 quarters (%)&quot;</span>)
<span class="kw">rownames</span>(table_bill_spending) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Spenderade pengarna&quot;</span>, <span class="st">&quot;Sparade pengarna&quot;</span>)

<span class="co"># b)</span>
percentages_spending&lt;-<span class="st"> </span><span class="kw">round</span>(<span class="dv">100</span><span class="op">*</span>prop_table[<span class="dv">1</span>,], <span class="dv">1</span>)
my_bar &lt;-<span class="st"> </span><span class="kw">barplot</span>(  percentages_spending, 
                    <span class="dt">names.arg =</span> <span class="kw">c</span>(<span class="st">&quot;1 dollarsedel&quot;</span>, <span class="st">&quot;4 quarters&quot;</span>), 
                    <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">80</span>), 
                    <span class="dt">col =</span> <span class="st">&quot;lightblue&quot;</span>,
                    <span class="dt">border =</span> <span class="st">&quot;lightblue&quot;</span>,
                    <span class="dt">ylab =</span> <span class="st">&quot;Spenderade pengarna (%)&quot;</span>)
<span class="kw">text</span>(<span class="dt">x =</span> my_bar, <span class="dt">y =</span> percentages_spending <span class="op">+</span><span class="st"> </span><span class="dv">6</span>, <span class="dt">labels =</span> <span class="kw">paste</span>(percentages_spending, <span class="st">&quot;%&quot;</span>,  <span class="dt">sep=</span><span class="st">&quot;&quot;</span>)) </code></pre></div>
<p><img src="dpk_files/figure-html/unnamed-chunk-195-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># c) </span>
<span class="co"># Version 1</span>
x1 &lt;-<span class="st"> </span>freq_table[<span class="dv">1</span>,<span class="dv">1</span>]
x0 &lt;-<span class="st"> </span>freq_table[<span class="dv">1</span>,<span class="dv">2</span>]
n1 &lt;-<span class="st"> </span><span class="kw">sum</span>(freq_table[,<span class="dv">1</span>])
n0 &lt;-<span class="st"> </span><span class="kw">sum</span>(freq_table[,<span class="dv">2</span>])
resultat &lt;-<span class="st"> </span><span class="kw">prop.test</span>(<span class="kw">c</span>(x1, x0), <span class="kw">c</span>(n1, n0), <span class="dt">correct =</span> <span class="ot">FALSE</span>)
p_differens &lt;-<span class="st"> </span>resultat<span class="op">$</span>estimate[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>resultat<span class="op">$</span>estimate[<span class="dv">2</span>]

<span class="co"># Version 2</span>
p1 &lt;-<span class="st"> </span>prop_table[<span class="dv">1</span>,<span class="dv">1</span>]
p0 &lt;-<span class="st"> </span>prop_table[<span class="dv">1</span>,<span class="dv">2</span>]
n1 &lt;-<span class="st">  </span><span class="kw">sum</span>(freq_table[,<span class="dv">1</span>])
n0 &lt;-<span class="st"> </span><span class="kw">sum</span>(freq_table[,<span class="dv">2</span>])
p_diff &lt;-<span class="st"> </span>p1 <span class="op">-</span><span class="st"> </span>p0
v_diff &lt;-<span class="st"> </span>p1<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>p1)<span class="op">/</span>n1 <span class="op">+</span><span class="st"> </span>p0<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>p0)<span class="op">/</span>n0
z &lt;-<span class="st"> </span><span class="kw">qnorm</span>(<span class="fl">0.975</span>)
ll &lt;-<span class="st"> </span>p_diff <span class="op">-</span><span class="st"> </span>z<span class="op">*</span><span class="kw">sqrt</span>(v_diff)
ul &lt;-<span class="st"> </span>p_diff <span class="op">+</span><span class="st"> </span>z<span class="op">*</span><span class="kw">sqrt</span>(v_diff)

<span class="co"># d)</span>
<span class="co"># Version 1</span>
resultat

    <span class="dv">2</span><span class="op">-</span>sample test <span class="cf">for</span> equality of proportions without continuity
    correction

data<span class="op">:</span><span class="st">  </span><span class="kw">c</span>(x1, x0) out of <span class="kw">c</span>(n1, n0)
X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">12.162</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value =<span class="st"> </span><span class="fl">0.0004877</span>
alternative hypothesis<span class="op">:</span><span class="st"> </span>two.sided
<span class="dv">95</span> percent confidence interval<span class="op">:</span>
<span class="st"> </span><span class="op">-</span><span class="fl">0.5593253</span> <span class="op">-</span><span class="fl">0.1747496</span>
sample estimates<span class="op">:</span>
<span class="st">   </span>prop <span class="dv">1</span>    prop <span class="dv">2</span> 
<span class="fl">0.2608696</span> <span class="fl">0.6279070</span> 
<span class="co"># Version 2</span>
<span class="kw">chisq.test</span>(freq_table, <span class="dt">correct =</span> <span class="ot">FALSE</span>)

    Pearson<span class="st">&#39;s Chi-squared test</span>

<span class="st">data:  freq_table</span>
<span class="st">X-squared = 12.162, df = 1, p-value = 0.0004877</span></code></pre></div>
</div>
</div>
<p></br></p>
</div>
<div id="övning-5.3" class="section level3 unnumbered">
<h3>Övning 5.3</h3>
<p>Rosa et al. (1998) undersökte om en typ av ‘’healers’’ hade förmåga att känna kroppens energifält. Forskarna besökte en mässa för alternativmedicin och gjorde ett experiment som gick ut på att healern skulle identifiera om undersökarens vänstra eller högre hand var närmst healern. Totalt genomfördes 130 försök av dessa lyckades healers identifera rätt hand 53 gånger. Undersök det finns belägg för denna förmåga bland healers.</p>
<button title="q503" type="button" onclick="if(document.getElementById('q503') .style.display=='none')
              {document.getElementById('q503') .style.display=''}
            else{document.getElementById('q503') .style.display='none'}">
Visa svar
</button>
<div id="q503" style="display:none">
<div class="alert alert-info">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())
<span class="co"># Version 1</span>
x &lt;-<span class="st"> </span><span class="dv">53</span>
n &lt;-<span class="st"> </span><span class="dv">130</span>
<span class="kw">prop.test</span>(<span class="dv">53</span>, <span class="dv">130</span>, <span class="dt">p =</span> <span class="fl">0.5</span>, <span class="dt">correct =</span> <span class="ot">FALSE</span>)

    <span class="dv">1</span><span class="op">-</span>sample proportions test without continuity correction

data<span class="op">:</span><span class="st">  </span><span class="dv">53</span> out of <span class="dv">130</span>, null probability <span class="fl">0.5</span>
X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">4.4308</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value =<span class="st"> </span><span class="fl">0.0353</span>
alternative hypothesis<span class="op">:</span><span class="st"> </span>true p is not equal to <span class="fl">0.5</span>
<span class="dv">95</span> percent confidence interval<span class="op">:</span>
<span class="st"> </span><span class="fl">0.3270479</span> <span class="fl">0.4936355</span>
sample estimates<span class="op">:</span>
<span class="st">        </span>p 
<span class="fl">0.4076923</span> 

<span class="co"># Version 2</span>
phat &lt;-<span class="st"> </span>x<span class="op">/</span>n
pH0 &lt;-<span class="st"> </span><span class="fl">0.5</span>
z &lt;-<span class="st"> </span>(phat <span class="op">-</span><span class="st"> </span><span class="fl">0.5</span>)<span class="op">/</span><span class="kw">sqrt</span>(pH0<span class="op">*</span>(<span class="dv">1</span><span class="op">-</span>pH0)<span class="op">/</span>n)
<span class="dv">2</span><span class="op">*</span><span class="kw">pnorm</span>(z)
[<span class="dv">1</span>] <span class="fl">0.0352966</span></code></pre></div>
<p>Givet att healers inte är bättre än slumpen, dvs <span class="math inline">\(H_0: p = 0.5\)</span>, så är sannolikheten <span class="math inline">\(p=0.035\)</span> att observera så extremt värde som det studien ger. Hur tolkar vi detta rent praktiskt? För det första ser vi att om det vore så att det finns en skillnad så verkar det snarare vara i en riktning att healers presterar sämre än slumpen. För det andra är detta ett exempel på hur man inte ska förlita sig på enskilda studier och hypotesprövning allena. Det är rimligt att tro att resultat helt enkelt är ett slumpfynd och att healers presterar varken bättre eller sämre än slumpen.</p>
</div>
</div>
<p></br></p>
</div>
<div id="övning-5.4" class="section level3 unnumbered">
<h3>Övning 5.4</h3>
<p>Gerritsen et al. (1998) ville jämföra kiurgi med spjälning för att hantera det som kallas karpaltunnelsyndrom, dvs nerver som kläms i handleden. Du erhåller följande datamaterial från studien. Undersökarna vill beräkna kvoten andelar lyckade behandlingar (relativ risk). Använd spjälning som referensgrupp. Eftersom forskarna vill fatta beslut genomförs en hypotesprövnig på 5% signifikansnivå.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">treatment =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;splint&quot;</span>, <span class="dv">60</span>), <span class="kw">rep</span>(<span class="st">&quot;splint&quot;</span>, <span class="dv">23</span>), <span class="kw">rep</span>(<span class="st">&quot;surgery&quot;</span>, <span class="dv">67</span>), <span class="kw">rep</span>(<span class="st">&quot;surgery&quot;</span>, <span class="dv">6</span>)), 
                 <span class="dt">y =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;succesful&quot;</span>, <span class="dv">60</span>), <span class="kw">rep</span>(<span class="st">&quot;unsucsessful&quot;</span>,<span class="dv">23</span>), <span class="kw">rep</span>(<span class="st">&quot;succesful&quot;</span>, <span class="dv">67</span>), <span class="kw">rep</span>(<span class="st">&quot;unsucsessful&quot;</span>,<span class="dv">6</span>)))</code></pre></div>
<button title="q504" type="button" onclick="if(document.getElementById('q504') .style.display=='none')
              {document.getElementById('q504') .style.display=''}
            else{document.getElementById('q504') .style.display='none'}">
Visa svar
</button>
<div id="q504" style="display:none">
<div class="alert alert-info">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())
df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="dt">treatment =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;splint&quot;</span>, <span class="dv">60</span>), <span class="kw">rep</span>(<span class="st">&quot;splint&quot;</span>, <span class="dv">23</span>), <span class="kw">rep</span>(<span class="st">&quot;surgery&quot;</span>, <span class="dv">67</span>), <span class="kw">rep</span>(<span class="st">&quot;surgery&quot;</span>, <span class="dv">6</span>)), 
                 <span class="dt">y =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;succesful&quot;</span>, <span class="dv">60</span>), <span class="kw">rep</span>(<span class="st">&quot;unsucsessful&quot;</span>,<span class="dv">23</span>), <span class="kw">rep</span>(<span class="st">&quot;succesful&quot;</span>, <span class="dv">67</span>), <span class="kw">rep</span>(<span class="st">&quot;unsucsessful&quot;</span>,<span class="dv">6</span>)))
freq_table &lt;-<span class="st"> </span><span class="kw">table</span>(df<span class="op">$</span>y, df<span class="op">$</span>treatment)
prop_table &lt;-<span class="st"> </span><span class="kw">prop.table</span>(freq_table, <span class="dv">2</span>) 


phat_splint &lt;-<span class="st"> </span>prop_table[<span class="dv">1</span>,<span class="dv">1</span>]
phat_surgery &lt;-<span class="st"> </span>prop_table[<span class="dv">1</span>,<span class="dv">2</span>]
p_kvot &lt;-<span class="st"> </span>phat_surgery<span class="op">/</span>phat_splint 
<span class="kw">chisq.test</span>(freq_table, <span class="dt">correct =</span> <span class="ot">FALSE</span>)

    Pearson<span class="st">&#39;s Chi-squared test</span>

<span class="st">data:  freq_table</span>
<span class="st">X-squared = 9.7504, df = 1, p-value = 0.001793</span></code></pre></div>
<p>En patient har 27% (p = 0.002) större chans till lyckad behandling om patienten genomgår kirurgi istället för behandling. Eftersom <span class="math inline">\(p&lt;0.05\)</span> förkastar vi på 5% signifikansnivå nollhypotesen.</p>
</div>
</div>
<p></br></p>
</div>
<div id="övning-5.5" class="section level3 unnumbered">
<h3>Övning 5.5</h3>
<p>En sjuksköterska är anklagad för att ha mördat ett antal patienter. Som bevis jämför man dödligheten på skift där den anklagade har arbetat med skift där den anklagade inte har arbetat. Anta nu att du är domare i fallet och ska döma. Ladda in nedanstående tabell. Ställ upp en nollhypotes och analysera där efter data och bilda dig en uppfattning om den anklagades oskyldighet.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">accused &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;accused was working&quot;</span>, <span class="dv">40</span>), 
             <span class="kw">rep</span>(<span class="st">&quot;accused was working&quot;</span>, <span class="dv">217</span>), 
             <span class="kw">rep</span>(<span class="st">&quot;accused was not working&quot;</span>, <span class="dv">34</span>), 
             <span class="kw">rep</span>(<span class="st">&quot;accused was not working&quot;</span>, <span class="dv">1350</span>)) 
death &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;shifts with a death&quot;</span>, <span class="dv">40</span>), 
           <span class="kw">rep</span>(<span class="st">&quot;shifts without a death&quot;</span>,<span class="dv">217</span>), 
           <span class="kw">rep</span>(<span class="st">&quot;shifts with a death&quot;</span>, <span class="dv">34</span>), 
           <span class="kw">rep</span>(<span class="st">&quot;shifts without a death&quot;</span>, <span class="dv">1350</span>))
<span class="kw">table</span>(accused, death)</code></pre></div>
<button title="q505" type="button" onclick="if(document.getElementById('q505') .style.display=='none')
              {document.getElementById('q505') .style.display=''}
            else{document.getElementById('q505') .style.display='none'}">
Visa svar
</button>
<div id="q505" style="display:none">
<div class="alert alert-info">
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">accused &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;accused was working&quot;</span>, <span class="dv">40</span>), 
             <span class="kw">rep</span>(<span class="st">&quot;accused was working&quot;</span>, <span class="dv">217</span>), 
             <span class="kw">rep</span>(<span class="st">&quot;accused was not working&quot;</span>, <span class="dv">34</span>), 
             <span class="kw">rep</span>(<span class="st">&quot;accused was not working&quot;</span>, <span class="dv">1350</span>)) 
death &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;shifts with a death&quot;</span>, <span class="dv">40</span>), 
           <span class="kw">rep</span>(<span class="st">&quot;shifts without a death&quot;</span>,<span class="dv">217</span>), 
           <span class="kw">rep</span>(<span class="st">&quot;shifts with a death&quot;</span>, <span class="dv">34</span>), 
           <span class="kw">rep</span>(<span class="st">&quot;shifts without a death&quot;</span>, <span class="dv">1350</span>))
freq_table &lt;-<span class="st"> </span><span class="kw">table</span>(accused, death)
freq_table
                         death
accused                   shifts with a death shifts without a death
  accused was not working                  <span class="dv">34</span>                   <span class="dv">1350</span>
  accused was working                      <span class="dv">40</span>                    <span class="dv">217</span>
<span class="kw">chisq.test</span>(freq_table)

    Pearson<span class="st">&#39;s Chi-squared test with Yates&#39;</span> continuity correction

data<span class="op">:</span><span class="st">  </span>freq_table
X<span class="op">-</span>squared =<span class="st"> </span><span class="fl">83.464</span>, df =<span class="st"> </span><span class="dv">1</span>, p<span class="op">-</span>value <span class="op">&lt;</span><span class="st"> </span><span class="fl">2.2e-16</span></code></pre></div>
<p>Kristen Gilbert var en amerikansk sjuksköterska som fick smeknamnet “Angel Death” efter ett antal misstänkta dödsfall på psykiatriska avdelningar där hon arbetade. Hon blev så småningom dömd för mord och avtjänar livstids fängelsestraff utan möjlighet till benådning.</p>
<ul>
<li>Ett litet <span class="math inline">\(p\)</span>-värde tyder på något avvikande</li>
<li>Ett litet <span class="math inline">\(p\)</span>-värde talar inte om VARFÖR det är litet. För detta krävs antaganden. Till exempel randomiserades inte Gilbert till avdelningarna. Låt säg att ventilationen på hennes skift alltid var sämre, med högre partikelhalter. Då skulle detta vara orsaken. För att vara säker på att det är Gilbert som orsakat dödsfallen krävs att vissa förutsättningar är uppfyllda, t ex att skiften är slumpmässigt tilldelade. Domstolen beaktade därför inte statsitiken som bevis. Vad som skedde var dock att statistiken avslöjade ett mönster som gjorde att man undersökte fallen ytterligare och därför kunde gripa Gilbert.</li>
</ul>
<p>Den intresserade kan läsa här om hur statistiken användes i just detta fall: <a href="http://www.stat.ucla.edu/~nchristo/statistics100B/article.pdf" class="uri">http://www.stat.ucla.edu/~nchristo/statistics100B/article.pdf</a></p>
</div>
</div>
<p></br></p>
</div>
</div>
<div id="referenser-1" class="section level2">
<h2><span class="header-section-number">5.11</span> Referenser</h2>
<p>Gerritsen, A. A., De Vet, H. C., Scholten, R. J., Bertelsmann, F. W., De Krom, M. C., &amp; Bouter, L. M. (2002). Splinting vs surgery in the treatment of carpal tunnel syndrome: a randomized controlled trial. Jama, 288(10), 1245-1251.</p>
<p>Raghubir, P., &amp; Srivastava, J. (2009). <em>The denomination effect.</em> Journal of Consumer Research, 36(4), 701-713</p>
<p>Rosa, L., Rosa, E., Sarner, L., &amp; Barrett, S. (1998). A close look at therapeutic touch. Jama, 279(13), 1005-1010.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="läsa-in-och-spara-data.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
