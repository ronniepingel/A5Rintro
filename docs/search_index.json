[
["läsa-in-och-spara-data.html", "Kapitel 6 Läsa in och spara data 6.1 Text- och CSV-filer 6.2 Excel-filer 6.3 Övriga format", " Kapitel 6 Läsa in och spara data Det finns många typer av dataformat och avsikten här är att beskriva principerna för hur datamaterial är organiserade, ge tips på hur dessa bör se ut, samt presentera de vanligaste sätten att läsa in och spara data. För nybörjaren kan det vara uppmuntrande att känna till att datainläsning i en del fall kan vara omständligt och frustrerande om data från början inte organiserat på ett korrekt sätt. Misströsta därför inte ifall det dyker upp svårigheter. Det ofta bästa sättet att importera och spara data är i en textfil. Genom att spara data i textformat blir datamaterialet dessutom program- och plattformsoberoende, vilket i högsta grad är önskvärt. Det är viktigt att organisera data på ett bra sätt och nedan följer några allmänna tips: Många program (t ex Excel) gör det möjligt att spara data som ren text istället för i progammets eget format. Spara alltid en kopia i textformat. Organisera data med kolumner som korresponderar till olika variabler. Använd semi-kolon för att avgränsa kolumner. Eftersom komma används som decimaltecken på svenska och avstånd eller TAB är svåra att se i en textfil eftersom de påminner om blanksteg undviks enkla problem. Försök att inte ändra något i ursprungsfilen. Det är bättre att, om möjligt, importera till R och göra ändringarna där. 6.1 Text- och CSV-filer CSV står för “comma separated values”, vilket även referar till semi-kolon eftersom många länder använder komma som decimaltecken. De två funktionerna som används för att läsa in CSV-filer är read.csv() och read.csv2(). CSV.filer är textfiler och mer generellt kan text-filer läsas in med read.table(). De bägge read.csv() och read.csv2() baseras nämligen på read.table(), men med förspecificerade argument. Funktionernas vanligaste argument presenteras nedan, men det går att specificera funktionerna i stor detalj beroende på hur datafilen ser ut. read.csv(file, header = TRUE, sep = &quot;,&quot;, quote = &quot;\\&quot;&quot;, dec = &quot;.&quot;) read.csv2(file, header = TRUE, sep = &quot;;&quot;, quote = &quot;\\&quot;&quot;, dec = &quot;,&quot;) read.table(file, header = TRUE, sep=&quot; &quot;, quote = &quot;\\&quot;&quot;, dec = &quot;.&quot;) file anger filnamnet header om variablerna har variabelnamn på första raden sep anger typ av separarering mellan kolumner. quote anger citationstecken för text-variabler dec anger typ av decimal-tecken För att läsa in nedanstående text-fil animals1.csv som kan vi använda read.csv(). Skriv in df1 &lt;- read.csv(file=&quot;D:/animals1.csv&quot;) Eftersom det är en textfil kan filen öppnas i Notepad eller Textredigerare (eller mosvarande). Då är det tydligt att kolumnerna är separerade med komma och att decimaltecken används punkt. Raden längst till vänster är radnamn, vilket är default. Citationstecken hanterar textvariabler. &quot;&quot;,&quot;animal&quot;,&quot;body&quot;,&quot;brain&quot; &quot;1&quot;,&quot;Lesser short-tailed shrew&quot;,0.005,0.14 &quot;2&quot;,&quot;Little brown bat&quot;,0.01,0.25 &quot;3&quot;,&quot;Big brown bat&quot;,0.023,0.3 &quot;4&quot;,&quot;Mouse&quot;,0.023,0.4 &quot;5&quot;,&quot;Musk shrew&quot;,0.048,0.33 &quot;6&quot;,&quot;Star-nosed mole&quot;,0.06,1 &quot;7&quot;,&quot;E. American mole&quot;,0.075,1.2 &quot;8&quot;,&quot;Ground squirrel&quot;,0.101,4 &quot;9&quot;,&quot;Tree shrew&quot;,0.104,2.5 &quot;10&quot;,&quot;Golden hamster&quot;,0.12,1 &quot;11&quot;,&quot;Mole&quot;,0.122,3 &quot;12&quot;,&quot;Galago&quot;,0.2,5 &quot;13&quot;,&quot;Rat&quot;,0.28,1.9 &quot;14&quot;,&quot;Chinchilla&quot;,0.425,6.4 &quot;15&quot;,&quot;Owl monkey&quot;,0.48,15.5 &quot;16&quot;,&quot;Desert hedgehog&quot;,0.55,2.4 &quot;17&quot;,&quot;Rockhyraxa&quot;,0.75,12.3 &quot;18&quot;,&quot;European hedgehog&quot;,0.785,3.5 &quot;19&quot;,&quot;Tenrec&quot;,0.9,2.6 &quot;20&quot;,&quot;Arctic ground squirrel&quot;,0.92,5.7 &quot;21&quot;,&quot;African giant pouched rat&quot;,1,6.6 &quot;22&quot;,&quot;Guinea pig&quot;,1.04,5.5 &quot;23&quot;,&quot;Mountain beaver&quot;,1.35,8.1 &quot;24&quot;,&quot;Slow loris&quot;,1.4,12.5 &quot;25&quot;,&quot;Genet&quot;,1.41,17.5 &quot;26&quot;,&quot;Phalanger&quot;,1.62,11.4 &quot;27&quot;,&quot;N.A. opossum&quot;,1.7,6.3 &quot;28&quot;,&quot;Tree hyrax&quot;,2,12.3 &quot;29&quot;,&quot;Rabbit&quot;,2.5,12.1 &quot;30&quot;,&quot;Echidna&quot;,3,25 &quot;31&quot;,&quot;Cat&quot;,3.3,25.6 &quot;32&quot;,&quot;Arctic fox&quot;,3.385,44.5 &quot;33&quot;,&quot;Water opossum&quot;,3.5,3.9 &quot;34&quot;,&quot;Nine-banded armadillo&quot;,3.5,10.8 &quot;35&quot;,&quot;Rock yrax-b&quot;,3.6,21 &quot;36&quot;,&quot;Yellow-bellied marmot&quot;,4.05,17 &quot;37&quot;,&quot;Verbet&quot;,4.19,58 &quot;38&quot;,&quot;Red fox&quot;,4.235,50.4 &quot;39&quot;,&quot;Raccoon&quot;,4.288,39.2 &quot;40&quot;,&quot;Rhesus monkey&quot;,6.8,179 &quot;41&quot;,&quot;Potarmonkey&quot;,10,115 &quot;42&quot;,&quot;Baboon&quot;,10.55,179.5 &quot;43&quot;,&quot;Roe deer&quot;,14.83,98.2 &quot;44&quot;,&quot;Goat&quot;,27.66,115 &quot;45&quot;,&quot;Kangaroo&quot;,35,56 &quot;46&quot;,&quot;Grey wolf&quot;,36.33,119.5 &quot;47&quot;,&quot;Chimpanzee&quot;,52.16,440 &quot;48&quot;,&quot;Sheep&quot;,55.5,175 &quot;49&quot;,&quot;Giantarmadillo&quot;,60,81 &quot;50&quot;,&quot;Human&quot;,62,1320 &quot;51&quot;,&quot;Grey seal&quot;,85,325 &quot;52&quot;,&quot;Jaguar&quot;,100,157 &quot;53&quot;,&quot;Brazilian tapir&quot;,160,169 &quot;54&quot;,&quot;Donkey&quot;,187.1,419 &quot;55&quot;,&quot;Pig&quot;,192,180 &quot;56&quot;,&quot;Gorilla&quot;,207,406 &quot;57&quot;,&quot;Okapi&quot;,250,490 &quot;58&quot;,&quot;Cow&quot;,465,423 &quot;59&quot;,&quot;Horse&quot;,521,655 &quot;60&quot;,&quot;Giraffe&quot;,529,680 &quot;61&quot;,&quot;Asian elephant&quot;,2547,4603 &quot;62&quot;,&quot;African elephant&quot;,6654,5712 &quot;63&quot;,&quot;Triceratops&quot;,9400,70 &quot;64&quot;,&quot;Dipliodocus&quot;,11700,50 &quot;65&quot;,&quot;Brachiosaurus&quot;,87000,154.5 Läs nu in animals2.csv med read.csv2(), det skriv in df2 &lt;- read.csv2(file=&quot;D:/animals2.csv&quot;). I denna textfilen är kolumnerna separerade med semi-kolon och komma är decimaltecken. &quot;&quot;;&quot;animal&quot;;&quot;body&quot;;&quot;brain&quot; &quot;1&quot;;&quot;Lesser short-tailed shrew&quot;;0,005;0,14 &quot;2&quot;;&quot;Little brown bat&quot;;0,01;0,25 &quot;3&quot;;&quot;Big brown bat&quot;;0,023;0,3 &quot;4&quot;;&quot;Mouse&quot;;0,023;0,4 &quot;5&quot;;&quot;Musk shrew&quot;;0,048;0,33 &quot;6&quot;;&quot;Star-nosed mole&quot;;0,06;1 &quot;7&quot;;&quot;E. American mole&quot;;0,075;1,2 &quot;8&quot;;&quot;Ground squirrel&quot;;0,101;4 &quot;9&quot;;&quot;Tree shrew&quot;;0,104;2,5 &quot;10&quot;;&quot;Golden hamster&quot;;0,12;1 &quot;11&quot;;&quot;Mole&quot;;0,122;3 &quot;12&quot;;&quot;Galago&quot;;0,2;5 &quot;13&quot;;&quot;Rat&quot;;0,28;1,9 &quot;14&quot;;&quot;Chinchilla&quot;;0,425;6,4 &quot;15&quot;;&quot;Owl monkey&quot;;0,48;15,5 &quot;16&quot;;&quot;Desert hedgehog&quot;;0,55;2,4 &quot;17&quot;;&quot;Rockhyraxa&quot;;0,75;12,3 &quot;18&quot;;&quot;European hedgehog&quot;;0,785;3,5 &quot;19&quot;;&quot;Tenrec&quot;;0,9;2,6 &quot;20&quot;;&quot;Arctic ground squirrel&quot;;0,92;5,7 &quot;21&quot;;&quot;African giant pouched rat&quot;;1;6,6 &quot;22&quot;;&quot;Guinea pig&quot;;1,04;5,5 &quot;23&quot;;&quot;Mountain beaver&quot;;1,35;8,1 &quot;24&quot;;&quot;Slow loris&quot;;1,4;12,5 &quot;25&quot;;&quot;Genet&quot;;1,41;17,5 &quot;26&quot;;&quot;Phalanger&quot;;1,62;11,4 &quot;27&quot;;&quot;N.A. opossum&quot;;1,7;6,3 &quot;28&quot;;&quot;Tree hyrax&quot;;2;12,3 &quot;29&quot;;&quot;Rabbit&quot;;2,5;12,1 &quot;30&quot;;&quot;Echidna&quot;;3;25 &quot;31&quot;;&quot;Cat&quot;;3,3;25,6 &quot;32&quot;;&quot;Arctic fox&quot;;3,385;44,5 &quot;33&quot;;&quot;Water opossum&quot;;3,5;3,9 &quot;34&quot;;&quot;Nine-banded armadillo&quot;;3,5;10,8 &quot;35&quot;;&quot;Rock yrax-b&quot;;3,6;21 &quot;36&quot;;&quot;Yellow-bellied marmot&quot;;4,05;17 &quot;37&quot;;&quot;Verbet&quot;;4,19;58 &quot;38&quot;;&quot;Red fox&quot;;4,235;50,4 &quot;39&quot;;&quot;Raccoon&quot;;4,288;39,2 &quot;40&quot;;&quot;Rhesus monkey&quot;;6,8;179 &quot;41&quot;;&quot;Potarmonkey&quot;;10;115 &quot;42&quot;;&quot;Baboon&quot;;10,55;179,5 &quot;43&quot;;&quot;Roe deer&quot;;14,83;98,2 &quot;44&quot;;&quot;Goat&quot;;27,66;115 &quot;45&quot;;&quot;Kangaroo&quot;;35;56 &quot;46&quot;;&quot;Grey wolf&quot;;36,33;119,5 &quot;47&quot;;&quot;Chimpanzee&quot;;52,16;440 &quot;48&quot;;&quot;Sheep&quot;;55,5;175 &quot;49&quot;;&quot;Giantarmadillo&quot;;60;81 &quot;50&quot;;&quot;Human&quot;;62;1320 &quot;51&quot;;&quot;Grey seal&quot;;85;325 &quot;52&quot;;&quot;Jaguar&quot;;100;157 &quot;53&quot;;&quot;Brazilian tapir&quot;;160;169 &quot;54&quot;;&quot;Donkey&quot;;187,1;419 &quot;55&quot;;&quot;Pig&quot;;192;180 &quot;56&quot;;&quot;Gorilla&quot;;207;406 &quot;57&quot;;&quot;Okapi&quot;;250;490 &quot;58&quot;;&quot;Cow&quot;;465;423 &quot;59&quot;;&quot;Horse&quot;;521;655 &quot;60&quot;;&quot;Giraffe&quot;;529;680 &quot;61&quot;;&quot;Asian elephant&quot;;2547;4603 &quot;62&quot;;&quot;African elephant&quot;;6654;5712 &quot;63&quot;;&quot;Triceratops&quot;;9400;70 &quot;64&quot;;&quot;Dipliodocus&quot;;11700;50 &quot;65&quot;;&quot;Brachiosaurus&quot;;87000;154,5 Läs nu in animals.txt med read.table(), dvs använd df3 &lt;- read.table(file=&quot;D:/animals.txt&quot;, header=TRUE) Kolumnerna är i denna textfil är separerade med mellanslag och punkt används som decimaltecken. Här finns inga radnamn. &quot;animal&quot; &quot;body&quot; &quot;brain&quot; &quot;Lesser short-tailed shrew&quot; 0.005 0.14 &quot;Little brown bat&quot; 0.01 0.25 &quot;Big brown bat&quot; 0.023 0.3 &quot;Mouse&quot; 0.023 0.4 &quot;Musk shrew&quot; 0.048 0.33 &quot;Star-nosed mole&quot; 0.06 1 &quot;E. American mole&quot; 0.075 1.2 &quot;Ground squirrel&quot; 0.101 4 &quot;Tree shrew&quot; 0.104 2.5 &quot;Golden hamster&quot; 0.12 1 &quot;Mole&quot; 0.122 3 &quot;Galago&quot; 0.2 5 &quot;Rat&quot; 0.28 1.9 &quot;Chinchilla&quot; 0.425 6.4 &quot;Owl monkey&quot; 0.48 15.5 &quot;Desert hedgehog&quot; 0.55 2.4 &quot;Rockhyraxa&quot; 0.75 12.3 &quot;European hedgehog&quot; 0.785 3.5 &quot;Tenrec&quot; 0.9 2.6 &quot;Arctic ground squirrel&quot; 0.92 5.7 &quot;African giant pouched rat&quot; 1 6.6 &quot;Guinea pig&quot; 1.04 5.5 &quot;Mountain beaver&quot; 1.35 8.1 &quot;Slow loris&quot; 1.4 12.5 &quot;Genet&quot; 1.41 17.5 &quot;Phalanger&quot; 1.62 11.4 &quot;N.A. opossum&quot; 1.7 6.3 &quot;Tree hyrax&quot; 2 12.3 &quot;Rabbit&quot; 2.5 12.1 &quot;Echidna&quot; 3 25 &quot;Cat&quot; 3.3 25.6 &quot;Arctic fox&quot; 3.385 44.5 &quot;Water opossum&quot; 3.5 3.9 &quot;Nine-banded armadillo&quot; 3.5 10.8 &quot;Rock yrax-b&quot; 3.6 21 &quot;Yellow-bellied marmot&quot; 4.05 17 &quot;Verbet&quot; 4.19 58 &quot;Red fox&quot; 4.235 50.4 &quot;Raccoon&quot; 4.288 39.2 &quot;Rhesus monkey&quot; 6.8 179 &quot;Potarmonkey&quot; 10 115 &quot;Baboon&quot; 10.55 179.5 &quot;Roe deer&quot; 14.83 98.2 &quot;Goat&quot; 27.66 115 &quot;Kangaroo&quot; 35 56 &quot;Grey wolf&quot; 36.33 119.5 &quot;Chimpanzee&quot; 52.16 440 &quot;Sheep&quot; 55.5 175 &quot;Giantarmadillo&quot; 60 81 &quot;Human&quot; 62 1320 &quot;Grey seal&quot; 85 325 &quot;Jaguar&quot; 100 157 &quot;Brazilian tapir&quot; 160 169 &quot;Donkey&quot; 187.1 419 &quot;Pig&quot; 192 180 &quot;Gorilla&quot; 207 406 &quot;Okapi&quot; 250 490 &quot;Cow&quot; 465 423 &quot;Horse&quot; 521 655 &quot;Giraffe&quot; 529 680 &quot;Asian elephant&quot; 2547 4603 &quot;African elephant&quot; 6654 5712 &quot;Triceratops&quot; 9400 70 &quot;Dipliodocus&quot; 11700 50 &quot;Brachiosaurus&quot; 87000 154.5 Prova nedanstående kod. Vad händer? df4 &lt;- read.table(file=&quot;D:/animals1.csv&quot;, header=TRUE, sep=&quot;,&quot;, dec=&quot;.&quot;) 6.2 Excel-filer I praktiken är det nödvändigt att importera av Excel-dokument. Nedan följer ett antal tips för när data matas in i Excel. Första raden ska bestå av variabelnamn Första kolumnen bör bestå av observationsid Undvik namn och värden med mellanslag. Risken är att det tolkas som två olika kolumner. Korta variabelnamn är bättre än långa. Undvik tecken som ?, $,%, ^, &amp;, *, (, ),-,#, ?,,,&lt;,&gt;, /, |, , [ ,] ,{, and }; Radera kommentarer som du har i Excelfilen så att dessa inte tolkas som extra data. Målet är nu att läsa in Excel-filerna animal3.xlsx och animal4.xlsx. För att läsa in data från Excel-filer krävs ett paket som heter readxl. Installera paketet med att i Console skriv install.packages(&quot;readxl&quot;) och trycka enter. Skriv nu ett script # Läser in nödvändigt paket library(&quot;readxl) df5 &lt;- read_excel(&quot;animal3.xlsx&quot;) df6 &lt;- read_excel(&quot;animal4.xlsx&quot;) Titta på data frames. Data frame df5 ser ok ut, men för df6 är det något som inte stämmer. Öppnar filen med Excel. Då ser du att Excel-dokumentet består av flera kalkylblad och data finns i blad 2. Dessutom börjar inte data från toppen, utan det finns även annan text i blad två. Genom att vara mer specifik i inläsningen av data väljs exakt varifrån Excel-filen data hämtas. df7 &lt;- read_excel(&quot;animal4.xlsx&quot;, sheet = &quot;Blad2&quot;, range = &quot;A3:D68&quot;) Titta på data frame df7 (som nu förhoppningsvis ska se ok ut). 6.3 Övriga format Det finns ett många specialfall som vi inte tar upp. Främst gäller det: import av andra format (t ex SAS-format, SPSS-format, Minitab). Detta kan lösas med exempelvis paket som foreign. import av stora dataset, där till exempel paketet data.table kan vara till hjälp. "]
]
