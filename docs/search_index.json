[
["variabeltyper.html", "Kapitel 7 Variabeltyper 7.1 Faktorer 7.2 Faktorer på nominalskala 7.3 Faktorer kodade som numriska variabler", " Kapitel 7 Variabeltyper I statistik skiljer vi på kvantitativa variabler (intervall- eller kvotskola) och kategorivariabler (nominal eller ordinalskala). Dessutom kan kvantiativa variabler vara antingen kontinuerliga eller diskreta. I R korresponderar detta till numeriska variabler. Notera att även kvantitaiva variabler kan hanteras som kategorivariabler om vi har få få kategorier. Det finns två typer av kvantitativa variabler i R: numeric eller integer (heltal) Kategorivariabler finns som två typer: factor och ordered factor. För att exemplifiera tittar vi på ett datamaterial. # Skapa en population och urval # Läs in data. Vi ska välja ut födda 1961 och födda 1975. insark &lt;- read.csv2(&quot;D:/conscriptiondata.csv&quot;) # Välja ut insark för födda 1961 insark1 &lt;- insark[insark$year == 1961,] # Välj ut INSARK för födda 1975 insark2 &lt;- insark[insark$year == 1975,] # Skapa ett dataset av INSARK 1961 och 1975. insark3 &lt;- rbind(insark1, insark2) # Skapa nytt rad id baserat på delpopulationen 1961 och 1975 insark3$newid &lt;- 1:length(insark3$id) # Dra urval n &lt;- 1000 set.seed(12345) df &lt;- insark3[sample(insark3$newid, n), ] Du har nu en data frame. Med funktionen str() (Compactly Display the Structure of an Arbitrary R Object) tittar man på ett objekts interna struktur. str(df) &gt; &#39;data.frame&#39;: 1000 obs. of 18 variables: &gt; $ id : int 703699 692123 702781 692870 689627 25548 393 701579 21052 2848 ... &gt; $ year : int 1975 1975 1975 1975 1975 1961 1961 1975 1961 1961 ... &gt; $ height : int 170 189 174 179 183 179 175 168 177 183 ... &gt; $ weight : int 69 69 60 73 74 71 60 62 69 62 ... &gt; $ psych : int 5 7 3 5 2 6 4 5 5 4 ... &gt; $ muscle : int 5 6 6 9 7 6 6 6 4 3 ... &gt; $ armstrength : num 392 335 404 545 451 ... &gt; $ physical : int 8 8 6 8 6 7 5 6 7 5 ... &gt; $ gripstrength: num 554 701 562 693 619 ... &gt; $ legstrength : num 624 601 633 791 646 ... &gt; $ sbp : int 118 141 106 121 130 125 124 151 140 126 ... &gt; $ dbp : int 77 80 63 68 61 55 55 90 78 62 ... &gt; $ officer : int NA 9 0 9 9 8 0 0 0 0 ... &gt; $ testa : int 24 35 25 18 25 27 26 30 27 30 ... &gt; $ testb : int 16 26 24 28 24 20 19 34 26 29 ... &gt; $ testc : int 5 39 18 23 28 16 12 36 20 16 ... &gt; $ testd : int 19 0 24 30 25 37 28 34 26 26 ... &gt; $ newid : int 76440 64864 75522 65611 62368 25548 393 74320 21052 2848 ... I df finns variabler som är heltalint och numeriska num. I allra flesta fall har denna distinktion ingen betydelse, utan detta hur R sparat data. Integer är nämligen inte lika minneskrävande jämfört med numeric. Statistiskt är dock bägge kvantativa variabler. 7.1 Faktorer Faktorer är beteckningen som R använder för kategorivariabler. Faktorer är generellt sett besvärligare att arbeta än numeriska variabler, men oerhört viktigt att vara bekvämt med vid datahantering. Det som inledningsvis är kan vara förvirrande är att finns olika alternativ med hur man arbetar med kategorivariabler. Vi ska titta på ett par sätt. 7.1.1 Faktorer på ordinalskala Vi börjar med att titta på variabler vars kategorier går att rangordna. Variablen psych i INSARK mäter psykisk funktionsförmåga under stressade förhållande på en skala från från 1-9. Värdet är satt av en psykolog och kan betraktas som en variabel på ordinalskala. Därför skapar vi en ny variabel psych_cat som R använder som ordinalskala. För att skapa en kategorivariabel används funktiontn factor() och i detta fall lägger vi till argumentet ordered = TRUE eftersom det är en kategorivariabel som går att rangordna. Kör nedanstående kod och fundera varför R ger felmeddelanden. df$psych &gt; [1] 5 7 3 5 2 6 4 5 5 4 3 6 6 6 5 8 1 4 6 3 8 8 5 5 6 8 6 6 3 2 8 4 7 5 &gt; [35] 2 5 6 9 5 2 5 6 3 4 5 7 2 6 5 5 6 7 2 4 3 5 5 2 4 7 7 5 6 3 5 3 7 6 &gt; [69] 6 2 5 5 3 3 7 3 7 8 6 2 3 5 2 2 6 7 1 6 5 7 7 3 3 6 4 4 6 9 5 7 4 8 &gt; [103] 6 8 4 6 8 2 7 3 7 2 6 6 4 3 6 5 7 3 3 8 5 3 5 5 6 4 5 5 5 7 5 4 6 5 &gt; [137] 2 2 7 5 4 1 5 6 9 2 3 9 3 6 6 7 7 3 3 5 8 4 3 6 6 6 8 3 6 5 7 5 6 4 &gt; [171] 7 6 4 3 5 5 6 8 1 5 5 7 3 6 3 3 4 3 9 5 6 6 4 5 7 3 7 7 6 6 5 7 6 6 &gt; [205] 5 7 1 5 4 3 8 6 2 7 7 5 3 5 2 7 6 4 4 7 5 5 7 3 6 5 6 3 4 4 4 4 3 6 &gt; [239] 4 5 4 9 5 7 8 7 2 2 3 5 5 6 5 7 4 7 3 4 7 4 6 5 4 6 5 5 5 6 2 5 2 8 &gt; [273] 5 2 6 4 8 6 6 7 5 4 5 7 6 4 2 4 6 6 6 3 4 2 3 4 4 3 3 4 7 2 7 6 4 2 &gt; [307] 7 4 7 6 7 4 4 6 5 5 8 6 5 6 6 3 2 6 5 5 6 6 7 7 6 6 3 5 4 3 3 1 5 6 &gt; [341] 3 4 6 5 2 5 4 5 7 6 8 3 8 3 8 7 6 5 6 6 5 8 6 7 5 8 6 5 4 4 3 4 6 7 &gt; [375] 5 5 7 7 4 8 7 7 6 9 7 6 6 4 8 1 2 6 2 4 4 6 6 5 6 3 1 6 6 6 3 7 7 6 &gt; [409] 6 7 5 6 3 5 5 7 5 7 3 1 5 3 6 6 6 2 8 5 4 7 7 5 5 2 5 5 6 4 3 7 8 4 &gt; [443] 3 4 3 6 8 5 6 5 2 3 7 7 9 6 7 5 3 7 1 8 5 2 5 3 6 3 3 6 5 7 3 3 6 6 &gt; [477] 5 6 5 3 5 5 3 4 4 6 4 3 4 3 6 4 4 5 5 3 5 4 5 7 2 7 8 3 5 6 5 6 5 6 &gt; [511] 7 6 1 7 5 6 6 4 6 7 5 6 4 6 6 2 1 6 8 8 2 4 4 1 5 5 6 5 6 7 5 5 4 3 &gt; [545] 7 5 4 3 6 4 2 6 6 3 3 6 9 6 5 5 5 3 8 4 7 6 5 6 7 6 5 7 6 2 5 3 3 5 &gt; [579] 5 6 6 6 8 7 5 6 5 1 5 7 7 4 5 4 6 7 4 8 6 5 7 3 4 5 4 2 4 5 9 2 7 5 &gt; [613] 5 4 5 4 4 4 5 7 2 3 5 2 5 5 4 5 4 8 3 3 4 7 3 5 9 5 3 4 4 7 9 2 6 4 &gt; [647] 3 2 7 3 6 5 2 8 5 1 4 5 8 7 5 5 5 5 4 5 4 4 5 5 3 7 6 5 6 6 8 4 6 4 &gt; [681] 4 4 7 6 4 4 6 7 5 4 7 6 3 5 7 4 2 7 8 4 3 4 7 6 6 4 3 7 4 5 6 6 8 4 &gt; [715] 8 4 7 7 8 6 3 7 3 4 5 8 8 7 6 5 2 5 3 5 6 6 7 4 5 5 6 4 6 8 2 6 5 7 &gt; [749] 5 2 5 3 4 8 3 5 5 2 7 5 4 4 7 6 7 8 5 4 1 5 2 3 7 4 2 3 5 6 6 8 6 2 &gt; [783] 5 7 7 8 4 7 6 5 5 2 4 3 7 7 8 6 2 3 5 4 4 4 4 6 8 5 3 2 6 6 5 7 8 5 &gt; [817] 6 5 4 1 5 7 4 6 6 4 8 7 6 7 5 4 7 6 4 4 6 7 2 4 8 5 5 2 2 7 3 5 3 1 &gt; [851] 5 5 4 5 7 5 4 4 4 5 3 5 7 8 7 7 7 7 6 4 6 8 4 5 5 5 5 5 7 3 5 6 7 5 &gt; [885] 5 8 3 3 7 7 6 5 6 6 8 8 2 6 4 5 7 6 4 2 8 7 5 7 6 4 3 3 4 6 4 5 4 3 &gt; [919] 5 5 5 7 5 5 6 5 3 8 6 3 4 3 7 7 8 7 3 6 6 4 4 5 6 2 7 5 3 6 5 6 7 6 &gt; [953] 5 6 5 7 6 4 7 7 1 3 5 7 5 5 3 3 6 4 3 2 6 3 6 6 5 3 4 7 6 5 5 6 5 4 &gt; [987] 6 6 8 6 2 2 8 7 5 6 4 3 3 4 df$psych_cat &lt;- factor(df$psych, ordered=TRUE) mean(df$psych) &gt; [1] 5.062 mean(df$psych_cat) &gt; Warning in mean.default(df$psych_cat): argument is not numeric or logical: &gt; returning NA &gt; [1] NA hist(df$psych) hist(df$psych_cat) &gt; Error in hist.default(df$psych_cat): &#39;x&#39; must be numeric Naturligtvis är det på grund av att vi försöker skapa histogram och medelvärden på psych_cat som inte är en kvantitativ variabel. Titta återigen på ditt dataset. psych_cat är således kategorivariabel (factor) på ordinalskalnivå. str(df) &gt; &#39;data.frame&#39;: 1000 obs. of 19 variables: &gt; $ id : int 703699 692123 702781 692870 689627 25548 393 701579 21052 2848 ... &gt; $ year : int 1975 1975 1975 1975 1975 1961 1961 1975 1961 1961 ... &gt; $ height : int 170 189 174 179 183 179 175 168 177 183 ... &gt; $ weight : int 69 69 60 73 74 71 60 62 69 62 ... &gt; $ psych : int 5 7 3 5 2 6 4 5 5 4 ... &gt; $ muscle : int 5 6 6 9 7 6 6 6 4 3 ... &gt; $ armstrength : num 392 335 404 545 451 ... &gt; $ physical : int 8 8 6 8 6 7 5 6 7 5 ... &gt; $ gripstrength: num 554 701 562 693 619 ... &gt; $ legstrength : num 624 601 633 791 646 ... &gt; $ sbp : int 118 141 106 121 130 125 124 151 140 126 ... &gt; $ dbp : int 77 80 63 68 61 55 55 90 78 62 ... &gt; $ officer : int NA 9 0 9 9 8 0 0 0 0 ... &gt; $ testa : int 24 35 25 18 25 27 26 30 27 30 ... &gt; $ testb : int 16 26 24 28 24 20 19 34 26 29 ... &gt; $ testc : int 5 39 18 23 28 16 12 36 20 16 ... &gt; $ testd : int 19 0 24 30 25 37 28 34 26 26 ... &gt; $ newid : int 76440 64864 75522 65611 62368 25548 393 74320 21052 2848 ... &gt; $ psych_cat : Ord.factor w/ 9 levels &quot;1&quot;&lt;&quot;2&quot;&lt;&quot;3&quot;&lt;&quot;4&quot;&lt;..: 5 7 3 5 2 6 4 5 5 4 ... df$psych_cat &gt; [1] 5 7 3 5 2 6 4 5 5 4 3 6 6 6 5 8 1 4 6 3 8 8 5 5 6 8 6 6 3 2 8 4 7 5 &gt; [35] 2 5 6 9 5 2 5 6 3 4 5 7 2 6 5 5 6 7 2 4 3 5 5 2 4 7 7 5 6 3 5 3 7 6 &gt; [69] 6 2 5 5 3 3 7 3 7 8 6 2 3 5 2 2 6 7 1 6 5 7 7 3 3 6 4 4 6 9 5 7 4 8 &gt; [103] 6 8 4 6 8 2 7 3 7 2 6 6 4 3 6 5 7 3 3 8 5 3 5 5 6 4 5 5 5 7 5 4 6 5 &gt; [137] 2 2 7 5 4 1 5 6 9 2 3 9 3 6 6 7 7 3 3 5 8 4 3 6 6 6 8 3 6 5 7 5 6 4 &gt; [171] 7 6 4 3 5 5 6 8 1 5 5 7 3 6 3 3 4 3 9 5 6 6 4 5 7 3 7 7 6 6 5 7 6 6 &gt; [205] 5 7 1 5 4 3 8 6 2 7 7 5 3 5 2 7 6 4 4 7 5 5 7 3 6 5 6 3 4 4 4 4 3 6 &gt; [239] 4 5 4 9 5 7 8 7 2 2 3 5 5 6 5 7 4 7 3 4 7 4 6 5 4 6 5 5 5 6 2 5 2 8 &gt; [273] 5 2 6 4 8 6 6 7 5 4 5 7 6 4 2 4 6 6 6 3 4 2 3 4 4 3 3 4 7 2 7 6 4 2 &gt; [307] 7 4 7 6 7 4 4 6 5 5 8 6 5 6 6 3 2 6 5 5 6 6 7 7 6 6 3 5 4 3 3 1 5 6 &gt; [341] 3 4 6 5 2 5 4 5 7 6 8 3 8 3 8 7 6 5 6 6 5 8 6 7 5 8 6 5 4 4 3 4 6 7 &gt; [375] 5 5 7 7 4 8 7 7 6 9 7 6 6 4 8 1 2 6 2 4 4 6 6 5 6 3 1 6 6 6 3 7 7 6 &gt; [409] 6 7 5 6 3 5 5 7 5 7 3 1 5 3 6 6 6 2 8 5 4 7 7 5 5 2 5 5 6 4 3 7 8 4 &gt; [443] 3 4 3 6 8 5 6 5 2 3 7 7 9 6 7 5 3 7 1 8 5 2 5 3 6 3 3 6 5 7 3 3 6 6 &gt; [477] 5 6 5 3 5 5 3 4 4 6 4 3 4 3 6 4 4 5 5 3 5 4 5 7 2 7 8 3 5 6 5 6 5 6 &gt; [511] 7 6 1 7 5 6 6 4 6 7 5 6 4 6 6 2 1 6 8 8 2 4 4 1 5 5 6 5 6 7 5 5 4 3 &gt; [545] 7 5 4 3 6 4 2 6 6 3 3 6 9 6 5 5 5 3 8 4 7 6 5 6 7 6 5 7 6 2 5 3 3 5 &gt; [579] 5 6 6 6 8 7 5 6 5 1 5 7 7 4 5 4 6 7 4 8 6 5 7 3 4 5 4 2 4 5 9 2 7 5 &gt; [613] 5 4 5 4 4 4 5 7 2 3 5 2 5 5 4 5 4 8 3 3 4 7 3 5 9 5 3 4 4 7 9 2 6 4 &gt; [647] 3 2 7 3 6 5 2 8 5 1 4 5 8 7 5 5 5 5 4 5 4 4 5 5 3 7 6 5 6 6 8 4 6 4 &gt; [681] 4 4 7 6 4 4 6 7 5 4 7 6 3 5 7 4 2 7 8 4 3 4 7 6 6 4 3 7 4 5 6 6 8 4 &gt; [715] 8 4 7 7 8 6 3 7 3 4 5 8 8 7 6 5 2 5 3 5 6 6 7 4 5 5 6 4 6 8 2 6 5 7 &gt; [749] 5 2 5 3 4 8 3 5 5 2 7 5 4 4 7 6 7 8 5 4 1 5 2 3 7 4 2 3 5 6 6 8 6 2 &gt; [783] 5 7 7 8 4 7 6 5 5 2 4 3 7 7 8 6 2 3 5 4 4 4 4 6 8 5 3 2 6 6 5 7 8 5 &gt; [817] 6 5 4 1 5 7 4 6 6 4 8 7 6 7 5 4 7 6 4 4 6 7 2 4 8 5 5 2 2 7 3 5 3 1 &gt; [851] 5 5 4 5 7 5 4 4 4 5 3 5 7 8 7 7 7 7 6 4 6 8 4 5 5 5 5 5 7 3 5 6 7 5 &gt; [885] 5 8 3 3 7 7 6 5 6 6 8 8 2 6 4 5 7 6 4 2 8 7 5 7 6 4 3 3 4 6 4 5 4 3 &gt; [919] 5 5 5 7 5 5 6 5 3 8 6 3 4 3 7 7 8 7 3 6 6 4 4 5 6 2 7 5 3 6 5 6 7 6 &gt; [953] 5 6 5 7 6 4 7 7 1 3 5 7 5 5 3 3 6 4 3 2 6 3 6 6 5 3 4 7 6 5 5 6 5 4 &gt; [987] 6 6 8 6 2 2 8 7 5 6 4 3 3 4 &gt; Levels: 1 &lt; 2 &lt; 3 &lt; 4 &lt; 5 &lt; 6 &lt; 7 &lt; 8 &lt; 9 Faktorer består av olika nivåer, levels. Om variabeln är på ordinalskalenivå. För variabeln psych_cat står Levels: 1 &lt; 2 &lt; 3 &lt; 4 &lt; 5 &lt; 6 &lt; 7 &lt; 8 &lt; 9 som indikerar hur nivåerna är rangordnade. OBS! Trots att det är siffror i variabeln hanteras inte dessa som numeriska värden. Faktorernas nivåer kan anges med funktionen **levels*, se nedan. # Namn på nivåerna i faktorn psych_cat levels(df$psych_cat) &gt; [1] &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot; &quot;5&quot; &quot;6&quot; &quot;7&quot; &quot;8&quot; &quot;9&quot; # Ändra namn på nivåerna i psych_cat levels(df$psych_cat)[levels(df$psych_cat)==&quot;1&quot;] &lt;- &quot;A&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;2&quot;] &lt;- &quot;B&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;3&quot;] &lt;- &quot;C&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;4&quot;] &lt;- &quot;D&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;5&quot;] &lt;- &quot;E&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;6&quot;] &lt;- &quot;F&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;7&quot;] &lt;- &quot;G&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;8&quot;] &lt;- &quot;H&quot; levels(df$psych_cat)[levels(df$psych_cat)==&quot;9&quot;] &lt;- &quot;I&quot; levels(df$psych_cat) &gt; [1] &quot;A&quot; &quot;B&quot; &quot;C&quot; &quot;D&quot; &quot;E&quot; &quot;F&quot; &quot;G&quot; &quot;H&quot; &quot;I&quot; str(df$psych_cat) &gt; Ord.factor w/ 9 levels &quot;A&quot;&lt;&quot;B&quot;&lt;&quot;C&quot;&lt;&quot;D&quot;&lt;..: 5 7 3 5 2 6 4 5 5 4 ... För att ändra rangordningen används funktionen ordered() och argumentet levels. df$psych_cat &lt;- ordered(df$psych_cat, levels=c(&quot;I&quot;, &quot;H&quot;, &quot;G&quot;, &quot;F&quot;, &quot;E&quot;, &quot;D&quot;, &quot;C&quot;, &quot;B&quot;, &quot;A&quot;)) str(df$psych_cat) &gt; Ord.factor w/ 9 levels &quot;I&quot;&lt;&quot;H&quot;&lt;&quot;G&quot;&lt;&quot;F&quot;&lt;..: 5 3 7 5 8 4 6 5 5 6 ... I exemplet vänds rangordningen, men det går att ordna nivåerna i vilken ordning som helst. 7.2 Faktorer på nominalskala Faktorer på nominalskala innebär att kategorierna inte går att rangordna. 7.3 Faktorer kodade som numriska variabler "]
]
