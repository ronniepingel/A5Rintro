<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 10 Regressionsanalys | R på kursen Tillämpad statistik (A5)</title>
  <meta name="description" content="Kapitel 10 Regressionsanalys | R på kursen Tillämpad statistik (A5)" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 10 Regressionsanalys | R på kursen Tillämpad statistik (A5)" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 10 Regressionsanalys | R på kursen Tillämpad statistik (A5)" />
  
  
  

<meta name="author" content="Ronnie Pingel" />


<meta name="date" content="2019-12-08" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="figurer.html"/>
<link rel="next" href="regressionsanalys-1.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Förord</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#statistiska-program"><i class="fa fa-check"></i><b>1.1</b> Statistiska program</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#om-r"><i class="fa fa-check"></i><b>1.2</b> Om R</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#allmänna-tips-om-r-på-kursen"><i class="fa fa-check"></i><b>1.3</b> Allmänna tips om R på kursen</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#installation-av-r"><i class="fa fa-check"></i><b>2.1</b> Installation av R</a><ul>
<li class="chapter" data-level="2.1.1" data-path="installation.html"><a href="installation.html#installation-av-r-på-macos"><i class="fa fa-check"></i><b>2.1.1</b> Installation av R på MacOS</a></li>
<li class="chapter" data-level="2.1.2" data-path="installation.html"><a href="installation.html#installation-av-r-på-windows"><i class="fa fa-check"></i><b>2.1.2</b> Installation av R på Windows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#installation-av-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installation av RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#paket"><i class="fa fa-check"></i><b>2.3</b> Paket</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="första-sessionen.html"><a href="första-sessionen.html"><i class="fa fa-check"></i><b>3</b> Första sessionen</a></li>
<li class="chapter" data-level="4" data-path="objekt.html"><a href="objekt.html"><i class="fa fa-check"></i><b>4</b> Objekt</a><ul>
<li class="chapter" data-level="4.1" data-path="objekt.html"><a href="objekt.html#vektorer"><i class="fa fa-check"></i><b>4.1</b> Vektorer</a></li>
<li class="chapter" data-level="4.2" data-path="objekt.html"><a href="objekt.html#matriser"><i class="fa fa-check"></i><b>4.2</b> Matriser</a></li>
<li class="chapter" data-level="4.3" data-path="objekt.html"><a href="objekt.html#data-frames"><i class="fa fa-check"></i><b>4.3</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funktioner.html"><a href="funktioner.html"><i class="fa fa-check"></i><b>5</b> Funktioner</a></li>
<li class="chapter" data-level="6" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html"><i class="fa fa-check"></i><b>6</b> Läsa in och spara data</a><ul>
<li class="chapter" data-level="6.1" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#text--och-csv-filer"><i class="fa fa-check"></i><b>6.1</b> Text- och CSV-filer</a></li>
<li class="chapter" data-level="6.2" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#excel-filer"><i class="fa fa-check"></i><b>6.2</b> Excel-filer</a></li>
<li class="chapter" data-level="6.3" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övriga-format"><i class="fa fa-check"></i><b>6.3</b> Övriga format</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="variabeltyper.html"><a href="variabeltyper.html"><i class="fa fa-check"></i><b>7</b> Variabeltyper</a><ul>
<li class="chapter" data-level="7.1" data-path="variabeltyper.html"><a href="variabeltyper.html#faktorer"><i class="fa fa-check"></i><b>7.1</b> Faktorer</a><ul>
<li class="chapter" data-level="7.1.1" data-path="variabeltyper.html"><a href="variabeltyper.html#faktorer-på-ordinalskala"><i class="fa fa-check"></i><b>7.1.1</b> Faktorer på ordinalskala</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="variabeltyper.html"><a href="variabeltyper.html#faktorer-på-nominalskala"><i class="fa fa-check"></i><b>7.2</b> Faktorer på nominalskala</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tabeller.html"><a href="tabeller.html"><i class="fa fa-check"></i><b>8</b> Tabeller</a><ul>
<li class="chapter" data-level="8.1" data-path="tabeller.html"><a href="tabeller.html#frekvenstabeller"><i class="fa fa-check"></i><b>8.1</b> Frekvenstabeller</a><ul>
<li class="chapter" data-level="8.1.1" data-path="tabeller.html"><a href="tabeller.html#frekvenstabeller-med-table"><i class="fa fa-check"></i><b>8.1.1</b> Frekvenstabeller med table()</a></li>
<li class="chapter" data-level="8.1.2" data-path="tabeller.html"><a href="tabeller.html#frekvenstabeller-med-freq"><i class="fa fa-check"></i><b>8.1.2</b> Frekvenstabeller med freq()</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tabeller.html"><a href="tabeller.html#korstabeller"><i class="fa fa-check"></i><b>8.2</b> Korstabeller</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tabeller.html"><a href="tabeller.html#korstabeller-med-table"><i class="fa fa-check"></i><b>8.2.1</b> Korstabeller med table()</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tabeller.html"><a href="tabeller.html#exportera-tabeller-till-html"><i class="fa fa-check"></i><b>8.3</b> Exportera tabeller till html</a></li>
<li class="chapter" data-level="8.4" data-path="tabeller.html"><a href="tabeller.html#frekvent-förekommande-tabeller"><i class="fa fa-check"></i><b>8.4</b> Frekvent förekommande tabeller</a><ul>
<li class="chapter" data-level="8.4.1" data-path="tabeller.html"><a href="tabeller.html#tabell-för-att-beskriva-urvalet"><i class="fa fa-check"></i><b>8.4.1</b> Tabell för att beskriva urvalet</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tabeller.html"><a href="tabeller.html#statistisk-inferens-baserat-på-korstabeller"><i class="fa fa-check"></i><b>8.5</b> Statistisk inferens baserat på korstabeller</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="figurer.html"><a href="figurer.html"><i class="fa fa-check"></i><b>9</b> Figurer</a><ul>
<li class="chapter" data-level="9.1" data-path="figurer.html"><a href="figurer.html#typer-av-figurer"><i class="fa fa-check"></i><b>9.1</b> Typer av figurer</a><ul>
<li class="chapter" data-level="9.1.1" data-path="figurer.html"><a href="figurer.html#presentation-av-aggregerade-data"><i class="fa fa-check"></i><b>9.1.1</b> Presentation av aggregerade data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="figurer.html"><a href="figurer.html#lådagram"><i class="fa fa-check"></i><b>9.2</b> Lådagram</a></li>
<li class="chapter" data-level="9.3" data-path="figurer.html"><a href="figurer.html#histogram"><i class="fa fa-check"></i><b>9.3</b> Histogram</a></li>
<li class="chapter" data-level="9.4" data-path="figurer.html"><a href="figurer.html#spridningsdiagram"><i class="fa fa-check"></i><b>9.4</b> Spridningsdiagram</a></li>
<li class="chapter" data-level="9.5" data-path="figurer.html"><a href="figurer.html#några-frekvent-förekommande-diagram."><i class="fa fa-check"></i><b>9.5</b> Några frekvent förekommande diagram.</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="regressionsanalys.html"><a href="regressionsanalys.html"><i class="fa fa-check"></i><b>10</b> Regressionsanalys</a><ul>
<li class="chapter" data-level="10.1" data-path="regressionsanalys.html"><a href="regressionsanalys.html#inläsning-och-kodning-av-data"><i class="fa fa-check"></i><b>10.1</b> Inläsning och kodning av data</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="regressionsanalys-1.html"><a href="regressionsanalys-1.html"><i class="fa fa-check"></i><b>11</b> Regressionsanalys</a><ul>
<li class="chapter" data-level="11.1" data-path="regressionsanalys-1.html"><a href="regressionsanalys-1.html#inläsning-och-kodning-av-data-1"><i class="fa fa-check"></i><b>11.1</b> Inläsning och kodning av data</a></li>
<li class="chapter" data-level="11.2" data-path="regressionsanalys-1.html"><a href="regressionsanalys-1.html#enkel-linjär-regression-och-lm"><i class="fa fa-check"></i><b>11.2</b> Enkel linjär regression och <strong>lm()</strong></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html"><i class="fa fa-check"></i><b>12</b> Enkel linjär regression</a><ul>
<li class="chapter" data-level="12.1" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#funktionen-lm"><i class="fa fa-check"></i><b>12.1</b> Funktionen <strong>lm()</strong></a></li>
<li class="chapter" data-level="12.2" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#regression-och-summary"><i class="fa fa-check"></i><b>12.2</b> Regression och summary()</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html"><i class="fa fa-check"></i><b>13</b> Enkel linjär regression</a><ul>
<li class="chapter" data-level="13.1" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#regression-och-lm"><i class="fa fa-check"></i><b>13.1</b> Regression och <strong>lm()</strong></a></li>
<li class="chapter" data-level="13.2" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#regressions-resultat"><i class="fa fa-check"></i><b>13.2</b> Regressions resultat</a></li>
<li class="chapter" data-level="13.3" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#konfidensintervall"><i class="fa fa-check"></i><b>13.3</b> Konfidensintervall</a></li>
<li class="chapter" data-level="13.4" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#residualanalys"><i class="fa fa-check"></i><b>13.4</b> Residualanalys</a></li>
<li class="chapter" data-level="13.5" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#skattning-av-betingade-medelvärden"><i class="fa fa-check"></i><b>13.5</b> Skattning av betingade medelvärden</a></li>
<li class="chapter" data-level="13.6" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#prediktion"><i class="fa fa-check"></i><b>13.6</b> Prediktion</a></li>
<li class="chapter" data-level="13.7" data-path="enkel-linjär-regression-1.html"><a href="enkel-linjär-regression-1.html#binära-oberoende-variabler"><i class="fa fa-check"></i><b>13.7</b> Binära oberoende variabler</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html"><i class="fa fa-check"></i><b>14</b> Multipel linjär regression</a><ul>
<li class="chapter" data-level="14.1" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html#regression-och-lm-1"><i class="fa fa-check"></i><b>14.1</b> Regression och <strong>lm()</strong></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R på kursen Tillämpad statistik (A5)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="regressionsanalys" class="section level1">
<h1><span class="header-section-number">Kapitel 10</span> Regressionsanalys</h1>
<p>Detta avsnitt inleds med exempel på datainläsning följt av regressionsanalys. Det rekommenderas att ni använder samma eller snarlik kodning som den som används här, exempelvis kod för kodning av variabler, transformationer av variabler, hur data används i funktioner, objektnamn osv.</p>
<p>Detta innebär dock inte att koden som presenteras här är ‘’bättre’’ än all annan kod. Till exempel är koden i vissa avseenden något omständlig och skulle kunna förenklas och förbättras. I programmering gäller emellertid att innan man ger sig i kast med att effektivisera kod bör man vara helt säker på det man gör. Vänta därför med att skapa ditt eget sätt att strukturera upp en analys.</p>
<div id="inläsning-och-kodning-av-data" class="section level2">
<h2><span class="header-section-number">10.1</span> Inläsning och kodning av data</h2>
<p>Vi läser nu in data.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Rensa minnet</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="co"># Bestäm working directory. Det minskar sökvägarna och resultat/figurer sparas automatiskt i denna mapp.</span></a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="kw">setwd</span>(<span class="st">&quot;~/Dropbox/A5HT19/Lectures/Data&quot;</span>)</a>
<a class="sourceLine" id="cb1-5" data-line-number="5">df &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="st">&quot;conscriptiondata_sample.csv&quot;</span>)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"></a>
<a class="sourceLine" id="cb1-7" data-line-number="7"><span class="co">## 1. DATATVÄTT + KODNING AV VARIABLER</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># Skapa (numeriska) kategorier för födelseår (femårsintervall)</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">df<span class="op">$</span>year5 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10">df<span class="op">$</span>year5[(df<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1961</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1966</span>)] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">df<span class="op">$</span>year5[(df<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1966</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1970</span>)] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-12" data-line-number="12">df<span class="op">$</span>year5[(df<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1971</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1975</span>)] &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13"><span class="co"># Skapa en faktorvariabel för födelseår </span></a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co"># Beroende på analys kan en eller andra alternativet för variabelkodning var användbart och </span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co"># vi har därför båda versionerna i data frame</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16">df<span class="op">$</span>year5_cat  &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>year5)</a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="kw">levels</span>(df<span class="op">$</span>year5_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1961-1965&quot;</span>, <span class="st">&quot;1966-1970&quot;</span>, <span class="st">&quot;1970-1975&quot;</span>)</a>
<a class="sourceLine" id="cb1-18" data-line-number="18"></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co"># Skapa 4 (numeriska) kategorier för Test A </span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20">df<span class="op">$</span>testa4 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21">df<span class="op">$</span>testa4[df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22">df<span class="op">$</span>testa4[(df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23">df<span class="op">$</span>testa4[(df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  </a>
<a class="sourceLine" id="cb1-24" data-line-number="24">df<span class="op">$</span>testa4[(df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span>  </a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co"># Skapa en faktorvariabel för Testa A 4 kategorier</span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26">df<span class="op">$</span>testa_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testa4)</a>
<a class="sourceLine" id="cb1-27" data-line-number="27"></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co"># Skapa 4 (numeriska) kategorier för Test B </span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29">df<span class="op">$</span>testb4 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-30" data-line-number="30">df<span class="op">$</span>testb4[df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-31" data-line-number="31">df<span class="op">$</span>testb4[(df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-32" data-line-number="32">df<span class="op">$</span>testb4[(df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  </a>
<a class="sourceLine" id="cb1-33" data-line-number="33">df<span class="op">$</span>testb4[(df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span>  </a>
<a class="sourceLine" id="cb1-34" data-line-number="34"><span class="co"># Skapa en faktorvariabel för Testa B 4 kategorier</span></a>
<a class="sourceLine" id="cb1-35" data-line-number="35">df<span class="op">$</span>testb4 &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testb4)</a>
<a class="sourceLine" id="cb1-36" data-line-number="36"></a>
<a class="sourceLine" id="cb1-37" data-line-number="37"><span class="co"># Skapa 4 (numeriska) kategorier för Test C </span></a>
<a class="sourceLine" id="cb1-38" data-line-number="38">df<span class="op">$</span>testc4 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-39" data-line-number="39">df<span class="op">$</span>testc4[df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-40" data-line-number="40">df<span class="op">$</span>testc4[(df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-41" data-line-number="41">df<span class="op">$</span>testc4[(df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  </a>
<a class="sourceLine" id="cb1-42" data-line-number="42">df<span class="op">$</span>testc4[(df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span> </a>
<a class="sourceLine" id="cb1-43" data-line-number="43"><span class="co"># Skapa en faktorvariabel för Testa C 4 kategorier</span></a>
<a class="sourceLine" id="cb1-44" data-line-number="44">df<span class="op">$</span>testc_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testc4)</a>
<a class="sourceLine" id="cb1-45" data-line-number="45"></a>
<a class="sourceLine" id="cb1-46" data-line-number="46"><span class="co"># Skapa 4 (numeriska) kategorier för Test D </span></a>
<a class="sourceLine" id="cb1-47" data-line-number="47">df<span class="op">$</span>testd4 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-48" data-line-number="48">df<span class="op">$</span>testd4[df<span class="op">$</span>testd <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-49" data-line-number="49">df<span class="op">$</span>testd4[(df<span class="op">$</span>testd <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testd <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-50" data-line-number="50">df<span class="op">$</span>testd4[(df<span class="op">$</span>testd <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testd <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  </a>
<a class="sourceLine" id="cb1-51" data-line-number="51">df<span class="op">$</span>testd4[(df<span class="op">$</span>testd <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span>  </a>
<a class="sourceLine" id="cb1-52" data-line-number="52"><span class="co"># Skapa en faktorvariabel för Testa C 4 kategorier</span></a>
<a class="sourceLine" id="cb1-53" data-line-number="53">df<span class="op">$</span>testd_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testd4)</a>
<a class="sourceLine" id="cb1-54" data-line-number="54"></a>
<a class="sourceLine" id="cb1-55" data-line-number="55"><span class="co"># Skapa en indikator för Test A 30 poäng eller mer</span></a>
<a class="sourceLine" id="cb1-56" data-line-number="56">df<span class="op">$</span>testa30 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-57" data-line-number="57">df<span class="op">$</span>testa30[df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-58" data-line-number="58">df<span class="op">$</span>testa30[df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-59" data-line-number="59"><span class="co"># Skapa en faktorvariabel för höga poäng på test A</span></a>
<a class="sourceLine" id="cb1-60" data-line-number="60">df<span class="op">$</span>testa30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testa30)</a>
<a class="sourceLine" id="cb1-61" data-line-number="61"><span class="kw">levels</span>(df<span class="op">$</span>testa30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) </a>
<a class="sourceLine" id="cb1-62" data-line-number="62"></a>
<a class="sourceLine" id="cb1-63" data-line-number="63"><span class="co"># Skapa en indikator för Test B 30 poäng eller mer</span></a>
<a class="sourceLine" id="cb1-64" data-line-number="64">df<span class="op">$</span>testb30 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-65" data-line-number="65">df<span class="op">$</span>testb30[df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-66" data-line-number="66">df<span class="op">$</span>testb30[df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-67" data-line-number="67"><span class="co"># Skapa en faktorvariabel för höga poäng på test B</span></a>
<a class="sourceLine" id="cb1-68" data-line-number="68">df<span class="op">$</span>testb30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testb30)</a>
<a class="sourceLine" id="cb1-69" data-line-number="69"><span class="kw">levels</span>(df<span class="op">$</span>testb30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) </a>
<a class="sourceLine" id="cb1-70" data-line-number="70"></a>
<a class="sourceLine" id="cb1-71" data-line-number="71"><span class="co"># Skapa en indikator för Test C 30 poäng eller mer</span></a>
<a class="sourceLine" id="cb1-72" data-line-number="72">df<span class="op">$</span>testc30 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-73" data-line-number="73">df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-74" data-line-number="74">df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-75" data-line-number="75"><span class="co"># Skapa en faktorvariabel för höga poäng på test C</span></a>
<a class="sourceLine" id="cb1-76" data-line-number="76">df<span class="op">$</span>testc30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testc30)</a>
<a class="sourceLine" id="cb1-77" data-line-number="77"><span class="kw">levels</span>(df<span class="op">$</span>testc30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) </a>
<a class="sourceLine" id="cb1-78" data-line-number="78"></a>
<a class="sourceLine" id="cb1-79" data-line-number="79"><span class="co"># Skapa en indikator för Test D 30 poäng eller mer</span></a>
<a class="sourceLine" id="cb1-80" data-line-number="80">df<span class="op">$</span>testc30 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-81" data-line-number="81">df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-82" data-line-number="82">df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-83" data-line-number="83"><span class="co"># Skapa en faktorvariabel för höga poäng på test C</span></a>
<a class="sourceLine" id="cb1-84" data-line-number="84">df<span class="op">$</span>testc30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testc30)</a>
<a class="sourceLine" id="cb1-85" data-line-number="85"><span class="kw">levels</span>(df<span class="op">$</span>testc30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) </a>
<a class="sourceLine" id="cb1-86" data-line-number="86"></a>
<a class="sourceLine" id="cb1-87" data-line-number="87"><span class="co"># Skapa en variabel som indikerar högt systoliskt blodtryck 1 och annat 0</span></a>
<a class="sourceLine" id="cb1-88" data-line-number="88">df<span class="op">$</span>sbp130 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-89" data-line-number="89">df<span class="op">$</span>sbp130[df<span class="op">$</span>sbp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">130</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-90" data-line-number="90">df<span class="op">$</span>sbp130[df<span class="op">$</span>sbp <span class="op">&lt;</span><span class="st"> </span><span class="dv">130</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-91" data-line-number="91"><span class="co"># Skapa en faktorvariabel för högt systoliskt blodtryck </span></a>
<a class="sourceLine" id="cb1-92" data-line-number="92">df<span class="op">$</span>sbphigh &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>sbp130)</a>
<a class="sourceLine" id="cb1-93" data-line-number="93"><span class="kw">levels</span>(df<span class="op">$</span>sbphigh) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 130&quot;</span>, <span class="st">&quot;&gt;= 130&quot;</span>) </a>
<a class="sourceLine" id="cb1-94" data-line-number="94"></a>
<a class="sourceLine" id="cb1-95" data-line-number="95"><span class="co"># Skapa en variabel som indikerar högt diastoliskt blodtryck 1 och annat 0</span></a>
<a class="sourceLine" id="cb1-96" data-line-number="96">df<span class="op">$</span>dbp80 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-97" data-line-number="97">df<span class="op">$</span>dbp80[df<span class="op">$</span>dbp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">80</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-98" data-line-number="98">df<span class="op">$</span>dbp80[df<span class="op">$</span>dbp <span class="op">&lt;</span><span class="st"> </span><span class="dv">80</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb1-99" data-line-number="99"><span class="co"># Skapa en faktorvariabel för högt diastoliskt blodtryck </span></a>
<a class="sourceLine" id="cb1-100" data-line-number="100">df<span class="op">$</span>dbphigh &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>dbp80)</a>
<a class="sourceLine" id="cb1-101" data-line-number="101"><span class="kw">levels</span>(df<span class="op">$</span>dbphigh) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 80&quot;</span>, <span class="st">&quot;&gt;= 80&quot;</span>) </a>
<a class="sourceLine" id="cb1-102" data-line-number="102"></a>
<a class="sourceLine" id="cb1-103" data-line-number="103"><span class="co"># Skapa en variabel som indikerar psykologisk bedömning i tre nivåer</span></a>
<a class="sourceLine" id="cb1-104" data-line-number="104">df<span class="op">$</span>psych3 &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-105" data-line-number="105">df<span class="op">$</span>psych3[df<span class="op">$</span>psych <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb1-106" data-line-number="106">df<span class="op">$</span>psych3[(df<span class="op">$</span>psych <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>psych <span class="op">&lt;=</span><span class="st"> </span><span class="dv">7</span>)] &lt;-<span class="st"> </span><span class="dv">2</span></a>
<a class="sourceLine" id="cb1-107" data-line-number="107">df<span class="op">$</span>psych3[df<span class="op">$</span>psych <span class="op">&gt;=</span><span class="st"> </span><span class="dv">8</span>] &lt;-<span class="st"> </span><span class="dv">3</span></a>
<a class="sourceLine" id="cb1-108" data-line-number="108"><span class="co"># Skapa en faktorvariabel för psykologisk bedömning i tre nivåer</span></a>
<a class="sourceLine" id="cb1-109" data-line-number="109">df<span class="op">$</span>psych3_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>psych3)</a>
<a class="sourceLine" id="cb1-110" data-line-number="110"><span class="kw">levels</span>(df<span class="op">$</span>psych3_cat)  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Low (1-2)&quot;</span>, <span class="st">&quot;Medium (3-7)&quot;</span>, <span class="st">&quot;High (8-9&quot;</span>)</a>
<a class="sourceLine" id="cb1-111" data-line-number="111"></a>
<a class="sourceLine" id="cb1-112" data-line-number="112"><span class="kw">write.csv2</span>(df, <span class="st">&quot;~/Dropbox/A5HT19/Lectures/Data/conscriptiondata_sample_final.csv&quot;</span>)</a></code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="figurer.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="regressionsanalys-1.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
