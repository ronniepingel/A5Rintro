<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 4 Objekt | R på kursen Tillämpad statistik (A5)</title>
  <meta name="description" content="Kapitel 4 Objekt | R på kursen Tillämpad statistik (A5)" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 4 Objekt | R på kursen Tillämpad statistik (A5)" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 4 Objekt | R på kursen Tillämpad statistik (A5)" />
  
  
  

<meta name="author" content="Ronnie Pingel" />


<meta name="date" content="2019-11-24" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="första-sessionen.html"/>
<link rel="next" href="funktioner.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Förord</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#statistiska-program"><i class="fa fa-check"></i><b>1.1</b> Statistiska program</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#om-r"><i class="fa fa-check"></i><b>1.2</b> Om R</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#allmänna-tips-om-r-på-kursen"><i class="fa fa-check"></i><b>1.3</b> Allmänna tips om R på kursen</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#installation-av-r"><i class="fa fa-check"></i><b>2.1</b> Installation av R</a><ul>
<li class="chapter" data-level="2.1.1" data-path="installation.html"><a href="installation.html#installation-av-r-på-macos"><i class="fa fa-check"></i><b>2.1.1</b> Installation av R på MacOS</a></li>
<li class="chapter" data-level="2.1.2" data-path="installation.html"><a href="installation.html#installation-av-r-på-windows"><i class="fa fa-check"></i><b>2.1.2</b> Installation av R på Windows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#installation-av-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installation av RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#paket"><i class="fa fa-check"></i><b>2.3</b> Paket</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="första-sessionen.html"><a href="första-sessionen.html"><i class="fa fa-check"></i><b>3</b> Första sessionen</a></li>
<li class="chapter" data-level="4" data-path="objekt.html"><a href="objekt.html"><i class="fa fa-check"></i><b>4</b> Objekt</a><ul>
<li class="chapter" data-level="4.1" data-path="objekt.html"><a href="objekt.html#vektorer"><i class="fa fa-check"></i><b>4.1</b> Vektorer</a></li>
<li class="chapter" data-level="4.2" data-path="objekt.html"><a href="objekt.html#matriser"><i class="fa fa-check"></i><b>4.2</b> Matriser</a></li>
<li class="chapter" data-level="4.3" data-path="objekt.html"><a href="objekt.html#data-frames"><i class="fa fa-check"></i><b>4.3</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funktioner.html"><a href="funktioner.html"><i class="fa fa-check"></i><b>5</b> Funktioner</a></li>
<li class="chapter" data-level="6" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html"><i class="fa fa-check"></i><b>6</b> Läsa in och spara data</a><ul>
<li class="chapter" data-level="6.1" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#text--och-csv-filer"><i class="fa fa-check"></i><b>6.1</b> Text- och CSV-filer</a></li>
<li class="chapter" data-level="6.2" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#excel-filer"><i class="fa fa-check"></i><b>6.2</b> Excel-filer</a></li>
<li class="chapter" data-level="6.3" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övriga-format"><i class="fa fa-check"></i><b>6.3</b> Övriga format</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R på kursen Tillämpad statistik (A5)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="objekt" class="section level1">
<h1><span class="header-section-number">Kapitel 4</span> Objekt</h1>
<p>Data är grundläggande för nästan allt arbete i R. Data hanteras som objekt och objekten måste namnges. Objektnamn måste inledas med en bokstav och får endast innehålla bokstäver, siffror, _ och ..
Dessutom skiljer R på versaler och gemener. Det är inte alltid enkelt att namnge objekt, men det
viktigaste är att vara konsekvent. Som förslag kan följande principer tillämpas för objektnamn:</p>
<ul>
<li>Använd endast <strong>gemener</strong>.</li>
<li>Använd <strong>korta</strong> och <strong>logiska</strong> namn, t ex kan objektet <strong>population</strong> förkortas till <strong>pop</strong>.</li>
<li>Använd gärna _ för sammanbinda långa objektnamn. Objektet ålder för kvinnor skulle kunna betecknas <strong>age_women</strong> och motsvarande för män är då <strong>age_men</strong>.</li>
<li>Använd inte namn som redan är upptagna i R, t ex <strong>exp</strong>.</li>
</ul>
<p>För att skapa ett objekt används <strong>assignment</strong>-operatorn <strong>&lt;-</strong>. Ett skapat objekt sparas i minnet, men inget resultat redovisas i Console. För att redovisa objektet i Console måste objektet användas på något vis.</p>
<p>Det tre vanligaste objekten för hantering av data är:</p>
<ul>
<li>vektorer,</li>
<li>matriser,</li>
<li>data frames.</li>
</ul>
<div id="vektorer" class="section level2">
<h2><span class="header-section-number">4.1</span> Vektorer</h2>
<p>Objektet vektor är ett dataobjekt som är endimensionellt. En vektor skapas med <strong>c()</strong> (‘’Combine Values into a Vector’’). Nedanstående kod skapar ett antal vektorer som sparas som objekt. Genom att spara vektorerna kan dessa användas för andra beräkningar.</p>
<p>Skapa ett script som heter <strong>dataobjects.R</strong>, skriv koden nedan och spara. Studera koden och se hur vektorerna är skapade.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="co"># Skapar två numeriska vektorer</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">x &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">5</span>, <span class="dv">0</span>)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3">y &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">9</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># Kombinera vektorer till en ny vektor</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">z &lt;-<span class="st"> </span><span class="kw">c</span>(x, y)</a>
<a class="sourceLine" id="cb1-6" data-line-number="6"><span class="co"># Skapar en vektor med värden från 1:5</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">v &lt;-<span class="st"> </span><span class="dv">1</span><span class="op">:</span><span class="dv">5</span></a>
<a class="sourceLine" id="cb1-8" data-line-number="8"><span class="co"># Skapar en vektor med endast ett element</span></a>
<a class="sourceLine" id="cb1-9" data-line-number="9">n &lt;-<span class="st"> </span><span class="dv">150</span></a>
<a class="sourceLine" id="cb1-10" data-line-number="10"><span class="co"># Skapar en vektor med ord</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">nordic_countries &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Denmark&quot;</span>, <span class="st">&quot;Finland&quot;</span>, <span class="st">&quot;Iceland&quot;</span>, <span class="st">&quot;Norway&quot;</span>, <span class="st">&quot;Sweden&quot;</span>)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"><span class="co"># Skapar en vektor med ett bortfall. </span></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">ymis &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">3</span>, <span class="ot">NA</span>, <span class="dv">6</span>, <span class="dv">3</span>, <span class="dv">6</span>)</a></code></pre></div>
<p>Det finns nu ett antal sparade vektorer. Skriv in nedanstående kod i scriptet, spara och kör.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">x</a>
<a class="sourceLine" id="cb2-2" data-line-number="2">y</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">z</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">v</a>
<a class="sourceLine" id="cb2-5" data-line-number="5">n</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">nordic_countries</a>
<a class="sourceLine" id="cb2-7" data-line-number="7">ymis</a></code></pre></div>
<p>I Console presenteras resultaten. Det finns numeriska vektorer som enbart innehåller siffror och det finns vektorer som enbart innehåller bokstäver. Det finns vektorer som skapats genom räkneoperationer eller sekvenser. Vidare finns exempel på att bortfall anges med <code>NA</code> har även skapat en vektorer som innehåller bortfall.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span>x</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>z</a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="op">&gt;</span><span class="st">  </span>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">1</span> <span class="dv">1</span> <span class="dv">5</span> <span class="dv">0</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>v</a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">1</span> <span class="dv">2</span> <span class="dv">3</span> <span class="dv">4</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>n</a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">150</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>nordic_countries</a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="st">&quot;Denmark&quot;</span> <span class="st">&quot;Finland&quot;</span> <span class="st">&quot;Iceland&quot;</span> <span class="st">&quot;Norway&quot;</span>  <span class="st">&quot;Sweden&quot;</span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span>ymis</a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>]  <span class="dv">3</span> <span class="ot">NA</span>  <span class="dv">6</span>  <span class="dv">3</span>  <span class="dv">6</span></a></code></pre></div>
<p>I praktiken måste man nästan alltid på olika sätt anpassa data för planerade analyser. Detta kräver åtkomst till data som är lagrade i ett objekt.</p>
<p>En vektor består av ett antal element och varje element har en position. Med hakparenteser <code>[]</code> erhålls åtkomst till element i vektorn, antingen genom att direkt identifiera positionen i vektorn med en siffra eller genom logiska operatorer. Några logiska operatorer är:</p>
<ol style="list-style-type: decimal">
<li><code>&lt;</code> är mindre än.</li>
<li><code>&gt;</code> är mindre än.</li>
<li><code>&gt;=</code> större än eller lika med<br />
</li>
<li><code>&lt;=</code> mindre än eller lika med<br />
</li>
<li><code>==</code> exakt lika med.</li>
</ol>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element 2 i vektorn x </span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>x[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">1</span></a>
<a class="sourceLine" id="cb4-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element 2 och 3 i vektorn x</span></a>
<a class="sourceLine" id="cb4-5" data-line-number="5"><span class="er">&gt;</span><span class="st"> </span>y[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</a>
<a class="sourceLine" id="cb4-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb4-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element i vektor y som är större än eller lika med 4</span></a>
<a class="sourceLine" id="cb4-8" data-line-number="8"><span class="er">&gt;</span><span class="st"> </span>y[y <span class="op">&gt;=</span><span class="st"> </span><span class="dv">4</span>]</a>
<a class="sourceLine" id="cb4-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">5</span> <span class="dv">6</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb4-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element i vektor y från positioner där x har värden lika med 0. (Kräver att x och y har lika många element) </span></a>
<a class="sourceLine" id="cb4-11" data-line-number="11"><span class="er">&gt;</span><span class="st"> </span>y[x <span class="op">==</span><span class="st"> </span><span class="dv">1</span>]</a>
<a class="sourceLine" id="cb4-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb4-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element i vektor y från positioner där nordic_countries == &quot;Denmark&quot;</span></a>
<a class="sourceLine" id="cb4-14" data-line-number="14"><span class="er">&gt;</span><span class="st"> </span>y[nordic_countries <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>]</a>
<a class="sourceLine" id="cb4-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">2</span></a></code></pre></div>
<p>Efter det att åtkomst till element i vektorn har erhållit kan dessa elements sparas eller förändras.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Spara element 2, 3, 4 i en ny vektor ysub och visa vektorn</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>ysub &lt;-<span class="st"> </span>y[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>)]</a>
<a class="sourceLine" id="cb5-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>ysub</a>
<a class="sourceLine" id="cb5-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">3</span> <span class="dv">5</span> <span class="dv">6</span></a>
<a class="sourceLine" id="cb5-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Sätt värdet 0 i vektorn y där y är större än eller lika med 6</span></a>
<a class="sourceLine" id="cb5-6" data-line-number="6"><span class="er">&gt;</span><span class="st"> </span>ysub[ysub <span class="op">&gt;=</span><span class="st"> </span><span class="dv">6</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb5-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Sätt värdet 99 i vektorn y på positioner där nordic_countries är &quot;Denmark&quot;</span></a>
<a class="sourceLine" id="cb5-8" data-line-number="8"><span class="er">&gt;</span><span class="st"> </span>ysub[nordic_countries <span class="op">==</span><span class="st"> &quot;Finland&quot;</span>] &lt;-<span class="st"> </span><span class="dv">99</span></a></code></pre></div>
<p>Nya vektorer kan skapas med räkneoperationer. Beräkningarna sker då elementvis, till exempel adderas elementvärden i en vektor till elementvärden i en annan vektor som har motsvarade position. Nedan presenteras några vanliga räkneoperationer.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Addition av x och y</span></a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>]  <span class="dv">5</span>  <span class="dv">4</span>  <span class="dv">6</span> <span class="dv">11</span>  <span class="dv">9</span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Multiplikation av x och y</span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="er">&gt;</span><span class="st"> </span>x <span class="op">*</span><span class="st"> </span>y</a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>]  <span class="dv">6</span>  <span class="dv">3</span>  <span class="dv">5</span> <span class="dv">30</span>  <span class="dv">0</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Potenser skrivs med a^b</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="er">&gt;</span><span class="st"> </span>y<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>]  <span class="dv">4</span>  <span class="dv">9</span> <span class="dv">25</span> <span class="dv">36</span> <span class="dv">81</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="co"># En konstant adderas till alla element i vektorn</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="er">&gt;</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span>n </a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">153</span> <span class="dv">151</span> <span class="dv">151</span> <span class="dv">155</span> <span class="dv">150</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Räkneoperationer med NA ger NA</span></a>
<a class="sourceLine" id="cb6-14" data-line-number="14"><span class="er">&gt;</span><span class="st"> </span>x <span class="op">+</span><span class="st"> </span>ymis </a>
<a class="sourceLine" id="cb6-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>]  <span class="dv">6</span> <span class="ot">NA</span>  <span class="dv">7</span>  <span class="dv">8</span>  <span class="dv">6</span></a>
<a class="sourceLine" id="cb6-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Addera delar av vektorer</span></a>
<a class="sourceLine" id="cb6-17" data-line-number="17"><span class="er">&gt;</span><span class="st"> </span>x[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)] <span class="op">+</span><span class="st"> </span>y[<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)]</a>
<a class="sourceLine" id="cb6-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">4</span> <span class="dv">6</span></a>
<a class="sourceLine" id="cb6-19" data-line-number="19"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Division med 0 är ej definierat. R anger det som Inf (infinity) eller NaN (Not a Number) om det är 0/0.</span></a>
<a class="sourceLine" id="cb6-20" data-line-number="20"><span class="er">&gt;</span><span class="st"> </span>x<span class="op">/</span><span class="dv">0</span></a>
<a class="sourceLine" id="cb6-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="ot">Inf</span> <span class="ot">Inf</span> <span class="ot">Inf</span> <span class="ot">Inf</span> <span class="ot">NaN</span></a>
<a class="sourceLine" id="cb6-22" data-line-number="22"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Exempel på längre räkneoperationer</span></a>
<a class="sourceLine" id="cb6-23" data-line-number="23"><span class="er">&gt;</span><span class="st"> </span>z &lt;-<span class="st"> </span>x <span class="op">+</span><span class="st"> </span>(y<span class="op">^</span><span class="dv">2</span> <span class="op">-</span><span class="st"> </span>n)<span class="op">/</span>v</a>
<a class="sourceLine" id="cb6-24" data-line-number="24"><span class="op">&gt;</span><span class="st"> </span>z</a>
<a class="sourceLine" id="cb6-25" data-line-number="25"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="fl">-143.00000</span>  <span class="fl">-69.50000</span>  <span class="fl">-40.66667</span>  <span class="fl">-23.50000</span>  <span class="fl">-13.80000</span></a></code></pre></div>
<p>Spara <strong>dataobjects.R</strong>.</p>
</div>
<div id="matriser" class="section level2">
<h2><span class="header-section-number">4.2</span> Matriser</h2>
<p>En matris är ett tvådimensionellt dataobjekt bestående av <strong>rader</strong> och <strong>kolumn</strong>. Analogt med <strong>c()</strong>, som kombinerar element till en vektor, används <strong>rbind()</strong>
och <strong>cbind()</strong> för att binda ihop vektorer radvis eller kolumnvis till matriser. Det går <strong>inte</strong> att binda ihop numeriska vektorer som med vektorer som innehåller bokstäver. En matrix kan även skapas direkt med <strong>matrix()</strong> som transformerar en vektor till ett antal rader och kolumner. Skriv nedanstående kod i <strong>dataobjects.R</strong>.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en matrix genom att binda samman x och y radvis. Matrisen får 2 rader och 5 kolumner</span></a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>m1 &lt;-<span class="st"> </span><span class="kw">rbind</span>(x, y)</a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>m1</a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="op">&gt;</span><span class="st">   </span>[,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>x    <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">5</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span>y    <span class="dv">2</span>    <span class="dv">3</span>    <span class="dv">5</span>    <span class="dv">6</span>    <span class="dv">9</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en matrix genom att binda samman x, y, n och x radvis. Matrisen får 5 rader och 4 kolumner. </span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="er">&gt;</span><span class="st"> </span>m2 &lt;-<span class="st"> </span><span class="kw">cbind</span>(x, y, n, x)</a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>m2</a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="op">&gt;</span><span class="st">      </span>x y   n x</a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>,] <span class="dv">3</span> <span class="dv">2</span> <span class="dv">150</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">2</span>,] <span class="dv">1</span> <span class="dv">3</span> <span class="dv">150</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">3</span>,] <span class="dv">1</span> <span class="dv">5</span> <span class="dv">150</span> <span class="dv">1</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">4</span>,] <span class="dv">5</span> <span class="dv">6</span> <span class="dv">150</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">5</span>,] <span class="dv">0</span> <span class="dv">9</span> <span class="dv">150</span> <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en matrix genom att binda samman x och ymis radvis. Matrisen får 5 rader och 2 kolumner. </span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="er">&gt;</span><span class="st"> </span>m3 &lt;-<span class="st"> </span><span class="kw">rbind</span>(x, ymis)</a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span>m3</a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="op">&gt;</span><span class="st">      </span>[,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb7-20" data-line-number="20"><span class="op">&gt;</span><span class="st"> </span>x       <span class="dv">3</span>    <span class="dv">1</span>    <span class="dv">1</span>    <span class="dv">5</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb7-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span>ymis    <span class="dv">3</span>   <span class="ot">NA</span>    <span class="dv">6</span>    <span class="dv">3</span>    <span class="dv">6</span></a></code></pre></div>
<p>För åtkomst till element krävs nu, eftersom matriser består av rader och kolumner, att bägge dimensioner anges.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element på rad 2 och kolumn 3</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>m1[<span class="dv">2</span>,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>y </a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span></a>
<a class="sourceLine" id="cb8-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element på rad 2 och alla kolumner</span></a>
<a class="sourceLine" id="cb8-6" data-line-number="6"><span class="er">&gt;</span><span class="st"> </span>m1[<span class="dv">2</span>,]</a>
<a class="sourceLine" id="cb8-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">2</span> <span class="dv">3</span> <span class="dv">5</span> <span class="dv">6</span> <span class="dv">9</span></a>
<a class="sourceLine" id="cb8-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa element på alla rader och kolumner 3</span></a>
<a class="sourceLine" id="cb8-9" data-line-number="9"><span class="er">&gt;</span><span class="st"> </span>m1[,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb8-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>x y </a>
<a class="sourceLine" id="cb8-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb8-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa </span></a>
<a class="sourceLine" id="cb8-13" data-line-number="13"><span class="er">&gt;</span><span class="st"> </span>m2[<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>),]</a>
<a class="sourceLine" id="cb8-14" data-line-number="14"><span class="op">&gt;</span><span class="st">      </span>x y   n x</a>
<a class="sourceLine" id="cb8-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>,] <span class="dv">3</span> <span class="dv">2</span> <span class="dv">150</span> <span class="dv">3</span></a>
<a class="sourceLine" id="cb8-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">2</span>,] <span class="dv">1</span> <span class="dv">3</span> <span class="dv">150</span> <span class="dv">1</span></a></code></pre></div>
<p>Det går att utföra elementvisa beräkningar, vilket kräver att matriserna har samma antal rader och kolumner. Observera att elementvis multiplikation inte är samma som det som vanligtvis betecknas matrismultiplikation.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Addera element i matris 1 med element i matris 3</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>m1 <span class="op">+</span><span class="st"> </span>m3</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="op">&gt;</span><span class="st">   </span>[,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>x    <span class="dv">6</span>    <span class="dv">2</span>    <span class="dv">2</span>   <span class="dv">10</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>y    <span class="dv">5</span>   <span class="ot">NA</span>   <span class="dv">11</span>    <span class="dv">9</span>   <span class="dv">15</span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Multiplicera element i matris 1 med element i matris 3. OBS! Detta är inte matrismultiplikation!</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="er">&gt;</span><span class="st"> </span>m1 <span class="op">*</span><span class="st"> </span>m3</a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="op">&gt;</span><span class="st">   </span>[,<span class="dv">1</span>] [,<span class="dv">2</span>] [,<span class="dv">3</span>] [,<span class="dv">4</span>] [,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>x    <span class="dv">9</span>    <span class="dv">1</span>    <span class="dv">1</span>   <span class="dv">25</span>    <span class="dv">0</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>y    <span class="dv">6</span>   <span class="ot">NA</span>   <span class="dv">30</span>   <span class="dv">18</span>   <span class="dv">54</span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Dividera element i matris 1 med en konstant n</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="er">&gt;</span><span class="st"> </span>m1 <span class="op">/</span><span class="st"> </span>n</a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="op">&gt;</span><span class="st">         </span>[,<span class="dv">1</span>]        [,<span class="dv">2</span>]        [,<span class="dv">3</span>]       [,<span class="dv">4</span>] [,<span class="dv">5</span>]</a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span>x <span class="fl">0.02000000</span> <span class="fl">0.006666667</span> <span class="fl">0.006666667</span> <span class="fl">0.03333333</span> <span class="fl">0.00</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span>y <span class="fl">0.01333333</span> <span class="fl">0.020000000</span> <span class="fl">0.033333333</span> <span class="fl">0.04000000</span> <span class="fl">0.06</span></a></code></pre></div>
<p>Spara <strong>dataobjects.R</strong>.</p>
<p>Det går att tillämpa logiska operatorer även på matriser, men den extra dimensionen gör detta omständligt. Därför introduceras en tredje typ av dataobjekt som är enklare att arbeta med.</p>
</div>
<div id="data-frames" class="section level2">
<h2><span class="header-section-number">4.3</span> Data frames</h2>
<p>En <strong>data frame</strong> är det absolut vanligaste objektet för dataanlys. En data frame har likheter med matriser eftersom den har två dimensioner (rader och kolumner), men kan innehålla både numeriska värden och bokstäver. Vidare innehåller en data frame ytterligare information som <strong>variabelnamn</strong> och <strong>variabeltyp</strong>.</p>
<p>För att skapa en data frame används <strong>data.frame()</strong> och vi ska nu se på några exempel. Observera att en data frame även anger information om radnummer. Dessa nummer är dock inte definierade som en sepearat kolumn.</p>
<p>Skriv nedanstående kod i <strong>dataobjects.R</strong>.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en data frame genom att ange vektorer </span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>df &lt;-<span class="st"> </span><span class="kw">data.frame</span>(x, y, nordic_countries)</a>
<a class="sourceLine" id="cb10-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb10-4" data-line-number="4"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark</a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland</a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland</a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway</a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden</a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en data frame genom ange transformera en matris.</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="er">&gt;</span><span class="st"> </span><span class="kw">data.frame</span>(m1)</a>
<a class="sourceLine" id="cb10-12" data-line-number="12"><span class="op">&gt;</span><span class="st">   </span>X1 X2 X3 X4 X5</a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span>x  <span class="dv">3</span>  <span class="dv">1</span>  <span class="dv">1</span>  <span class="dv">5</span>  <span class="dv">0</span></a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span>y  <span class="dv">2</span>  <span class="dv">3</span>  <span class="dv">5</span>  <span class="dv">6</span>  <span class="dv">9</span></a></code></pre></div>
<p>För åtkomst till element finns nu flera alternativ. Dels kan används precis som förut ´[]´, dels finns nu möjlighet att använda <code>$</code> för att komma åt data genom att använda variabelnamn. I nedanstående kod jämförs de bägge metoderna.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa kolumn 3 </span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>df[<span class="dv">2</span>,<span class="dv">1</span>]</a>
<a class="sourceLine" id="cb11-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>x[<span class="dv">2</span>]</a>
<a class="sourceLine" id="cb11-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] <span class="dv">1</span></a>
<a class="sourceLine" id="cb11-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Visa värdet i rad 2 och kolumn 1 </span></a>
<a class="sourceLine" id="cb11-7" data-line-number="7"><span class="er">&gt;</span><span class="st"> </span>df[,<span class="dv">3</span>]</a>
<a class="sourceLine" id="cb11-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] Denmark Finland Iceland Norway  Sweden </a>
<a class="sourceLine" id="cb11-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span>Levels<span class="op">:</span><span class="st"> </span>Denmark Finland Iceland Norway Sweden</a>
<a class="sourceLine" id="cb11-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span>df<span class="op">$</span>nordic_countries</a>
<a class="sourceLine" id="cb11-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>[<span class="dv">1</span>] Denmark Finland Iceland Norway  Sweden </a>
<a class="sourceLine" id="cb11-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>Levels<span class="op">:</span><span class="st"> </span>Denmark Finland Iceland Norway Sweden</a></code></pre></div>
<p>Vi kan enkelt addera nya kolumner till en data frame.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Ursprungligt data frame</span></a>
<a class="sourceLine" id="cb12-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries</a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark</a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland</a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland</a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway</a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden</a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa variabeln sample_size baserat på n som bara har ett värde</span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="er">&gt;</span><span class="st"> </span>df<span class="op">$</span>sample_size &lt;-<span class="st"> </span>n</a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size</a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">150</span></a>
<a class="sourceLine" id="cb12-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland         <span class="dv">150</span></a>
<a class="sourceLine" id="cb12-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland         <span class="dv">150</span></a>
<a class="sourceLine" id="cb12-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span></a>
<a class="sourceLine" id="cb12-17" data-line-number="17"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden         <span class="dv">150</span></a>
<a class="sourceLine" id="cb12-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en variabel som heter ysq baserat på y i samma data frame.</span></a>
<a class="sourceLine" id="cb12-19" data-line-number="19"><span class="er">&gt;</span><span class="st"> </span>df<span class="op">$</span>ysq &lt;-<span class="st"> </span>df<span class="op">$</span>y<span class="op">^</span><span class="dv">2</span></a>
<a class="sourceLine" id="cb12-20" data-line-number="20"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb12-21" data-line-number="21"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size ysq</a>
<a class="sourceLine" id="cb12-22" data-line-number="22"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">150</span>   <span class="dv">4</span></a>
<a class="sourceLine" id="cb12-23" data-line-number="23"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland         <span class="dv">150</span>   <span class="dv">9</span></a>
<a class="sourceLine" id="cb12-24" data-line-number="24"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland         <span class="dv">150</span>  <span class="dv">25</span></a>
<a class="sourceLine" id="cb12-25" data-line-number="25"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span>  <span class="dv">36</span></a>
<a class="sourceLine" id="cb12-26" data-line-number="26"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden         <span class="dv">150</span>  <span class="dv">81</span></a>
<a class="sourceLine" id="cb12-27" data-line-number="27"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa en tom variabel som heter x_cat</span></a>
<a class="sourceLine" id="cb12-28" data-line-number="28"><span class="er">&gt;</span><span class="st"> </span>df<span class="op">$</span>x_cat &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb12-29" data-line-number="29"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb12-30" data-line-number="30"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size ysq x_cat</a>
<a class="sourceLine" id="cb12-31" data-line-number="31"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">150</span>   <span class="dv">4</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb12-32" data-line-number="32"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland         <span class="dv">150</span>   <span class="dv">9</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb12-33" data-line-number="33"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland         <span class="dv">150</span>  <span class="dv">25</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb12-34" data-line-number="34"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span>  <span class="dv">36</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb12-35" data-line-number="35"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden         <span class="dv">150</span>  <span class="dv">81</span>    <span class="ot">NA</span></a></code></pre></div>
<p>Genom att kombinera <code>$</code> förenklas användningen av de logiska operatorerna och det är enkelt att transformera variabler och även skapa mindre data frames.</p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Ändra värdet på sample_size för Danmark från 150 till 300</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="er">&gt;</span><span class="st"> </span>df<span class="op">$</span>sample_size[df<span class="op">$</span>nordic_countries <span class="op">==</span><span class="st"> &quot;Denmark&quot;</span>] &lt;-<span class="st"> </span><span class="dv">300</span></a>
<a class="sourceLine" id="cb13-3" data-line-number="3"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb13-4" data-line-number="4"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size ysq x_cat</a>
<a class="sourceLine" id="cb13-5" data-line-number="5"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">300</span>   <span class="dv">4</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-6" data-line-number="6"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland         <span class="dv">150</span>   <span class="dv">9</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-7" data-line-number="7"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland         <span class="dv">150</span>  <span class="dv">25</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-8" data-line-number="8"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span>  <span class="dv">36</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-9" data-line-number="9"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden         <span class="dv">150</span>  <span class="dv">81</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-10" data-line-number="10"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Ändra värden från NA till 1 i x_cat om x är större än 2</span></a>
<a class="sourceLine" id="cb13-11" data-line-number="11"><span class="er">&gt;</span><span class="st"> </span>df<span class="op">$</span>x_cat[x <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb13-12" data-line-number="12"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb13-13" data-line-number="13"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size ysq x_cat</a>
<a class="sourceLine" id="cb13-14" data-line-number="14"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">300</span>   <span class="dv">4</span>     <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-15" data-line-number="15"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland         <span class="dv">150</span>   <span class="dv">9</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-16" data-line-number="16"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland         <span class="dv">150</span>  <span class="dv">25</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-17" data-line-number="17"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span>  <span class="dv">36</span>     <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-18" data-line-number="18"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden         <span class="dv">150</span>  <span class="dv">81</span>    <span class="ot">NA</span></a>
<a class="sourceLine" id="cb13-19" data-line-number="19"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Ändra värden från NA till 0 i x_cat om x är mindre än eller lika 2</span></a>
<a class="sourceLine" id="cb13-20" data-line-number="20"><span class="er">&gt;</span><span class="st"> </span>df<span class="op">$</span>x_cat[x <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">0</span></a>
<a class="sourceLine" id="cb13-21" data-line-number="21"><span class="op">&gt;</span><span class="st"> </span>df</a>
<a class="sourceLine" id="cb13-22" data-line-number="22"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size ysq x_cat</a>
<a class="sourceLine" id="cb13-23" data-line-number="23"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">300</span>   <span class="dv">4</span>     <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-24" data-line-number="24"><span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span> <span class="dv">1</span> <span class="dv">3</span>          Finland         <span class="dv">150</span>   <span class="dv">9</span>     <span class="dv">0</span></a>
<a class="sourceLine" id="cb13-25" data-line-number="25"><span class="op">&gt;</span><span class="st"> </span><span class="dv">3</span> <span class="dv">1</span> <span class="dv">5</span>          Iceland         <span class="dv">150</span>  <span class="dv">25</span>     <span class="dv">0</span></a>
<a class="sourceLine" id="cb13-26" data-line-number="26"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span>  <span class="dv">36</span>     <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-27" data-line-number="27"><span class="op">&gt;</span><span class="st"> </span><span class="dv">5</span> <span class="dv">0</span> <span class="dv">9</span>           Sweden         <span class="dv">150</span>  <span class="dv">81</span>     <span class="dv">0</span></a>
<a class="sourceLine" id="cb13-28" data-line-number="28"><span class="op">&gt;</span><span class="st"> </span><span class="co"># Skapa ett nytt data frame bestående av bara rader där x_cat är lika med 1</span></a>
<a class="sourceLine" id="cb13-29" data-line-number="29"><span class="er">&gt;</span><span class="st"> </span>df1 &lt;-<span class="st"> </span>df[df<span class="op">$</span>x_cat <span class="op">==</span><span class="st"> </span><span class="dv">1</span>, ]</a>
<a class="sourceLine" id="cb13-30" data-line-number="30"><span class="op">&gt;</span><span class="st"> </span>df1</a>
<a class="sourceLine" id="cb13-31" data-line-number="31"><span class="op">&gt;</span><span class="st">   </span>x y nordic_countries sample_size ysq x_cat</a>
<a class="sourceLine" id="cb13-32" data-line-number="32"><span class="op">&gt;</span><span class="st"> </span><span class="dv">1</span> <span class="dv">3</span> <span class="dv">2</span>          Denmark         <span class="dv">300</span>   <span class="dv">4</span>     <span class="dv">1</span></a>
<a class="sourceLine" id="cb13-33" data-line-number="33"><span class="op">&gt;</span><span class="st"> </span><span class="dv">4</span> <span class="dv">5</span> <span class="dv">6</span>           Norway         <span class="dv">150</span>  <span class="dv">36</span>     <span class="dv">1</span></a></code></pre></div>
<p>Spara <strong>dataobjects.R</strong>.</p>
<p>Det finns alternativa sätt arbeta med data i R och ofta kan samma resultat erhållas med olika lösningar. Vad som presentas här är är ett alternativ. Datahanteringen är ofta en tidskrävande del i statistisk undersökning och stor noggrannhet är viktigt. Det går inte att tillräckligt betona hur betydelsefull datahanteringen är i en undersökning. En korrekt analys kräver ju korrekt data.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="första-sessionen.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="funktioner.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
