<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Kapitel 10 Inläsning, tvätt och kodning av data | R på kursen Tillämpad statistik (A5)</title>
  <meta name="description" content="Kapitel 10 Inläsning, tvätt och kodning av data | R på kursen Tillämpad statistik (A5)" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Kapitel 10 Inläsning, tvätt och kodning av data | R på kursen Tillämpad statistik (A5)" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Kapitel 10 Inläsning, tvätt och kodning av data | R på kursen Tillämpad statistik (A5)" />
  
  
  

<meta name="author" content="Ronnie Pingel" />


<meta name="date" content="2019-12-09" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="figurer.html"/>
<link rel="next" href="enkel-linjär-regression.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Förord</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#statistiska-program"><i class="fa fa-check"></i><b>1.1</b> Statistiska program</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#om-r"><i class="fa fa-check"></i><b>1.2</b> Om R</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#allmänna-tips-om-r-på-kursen"><i class="fa fa-check"></i><b>1.3</b> Allmänna tips om R på kursen</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="installation.html"><a href="installation.html"><i class="fa fa-check"></i><b>2</b> Installation</a><ul>
<li class="chapter" data-level="2.1" data-path="installation.html"><a href="installation.html#installation-av-r"><i class="fa fa-check"></i><b>2.1</b> Installation av R</a><ul>
<li class="chapter" data-level="2.1.1" data-path="installation.html"><a href="installation.html#installation-av-r-på-macos"><i class="fa fa-check"></i><b>2.1.1</b> Installation av R på MacOS</a></li>
<li class="chapter" data-level="2.1.2" data-path="installation.html"><a href="installation.html#installation-av-r-på-windows"><i class="fa fa-check"></i><b>2.1.2</b> Installation av R på Windows</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="installation.html"><a href="installation.html#installation-av-rstudio"><i class="fa fa-check"></i><b>2.2</b> Installation av RStudio</a></li>
<li class="chapter" data-level="2.3" data-path="installation.html"><a href="installation.html#paket"><i class="fa fa-check"></i><b>2.3</b> Paket</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="första-sessionen.html"><a href="första-sessionen.html"><i class="fa fa-check"></i><b>3</b> Första sessionen</a></li>
<li class="chapter" data-level="4" data-path="objekt.html"><a href="objekt.html"><i class="fa fa-check"></i><b>4</b> Objekt</a><ul>
<li class="chapter" data-level="4.1" data-path="objekt.html"><a href="objekt.html#vektorer"><i class="fa fa-check"></i><b>4.1</b> Vektorer</a></li>
<li class="chapter" data-level="4.2" data-path="objekt.html"><a href="objekt.html#matriser"><i class="fa fa-check"></i><b>4.2</b> Matriser</a></li>
<li class="chapter" data-level="4.3" data-path="objekt.html"><a href="objekt.html#data-frames"><i class="fa fa-check"></i><b>4.3</b> Data frames</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="funktioner.html"><a href="funktioner.html"><i class="fa fa-check"></i><b>5</b> Funktioner</a></li>
<li class="chapter" data-level="6" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html"><i class="fa fa-check"></i><b>6</b> Läsa in och spara data</a><ul>
<li class="chapter" data-level="6.1" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#text--och-csv-filer"><i class="fa fa-check"></i><b>6.1</b> Text- och CSV-filer</a></li>
<li class="chapter" data-level="6.2" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#excel-filer"><i class="fa fa-check"></i><b>6.2</b> Excel-filer</a></li>
<li class="chapter" data-level="6.3" data-path="läsa-in-och-spara-data.html"><a href="läsa-in-och-spara-data.html#övriga-format"><i class="fa fa-check"></i><b>6.3</b> Övriga format</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="variabeltyper.html"><a href="variabeltyper.html"><i class="fa fa-check"></i><b>7</b> Variabeltyper</a><ul>
<li class="chapter" data-level="7.1" data-path="variabeltyper.html"><a href="variabeltyper.html#faktorer"><i class="fa fa-check"></i><b>7.1</b> Faktorer</a><ul>
<li class="chapter" data-level="7.1.1" data-path="variabeltyper.html"><a href="variabeltyper.html#faktorer-på-ordinalskala"><i class="fa fa-check"></i><b>7.1.1</b> Faktorer på ordinalskala</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="variabeltyper.html"><a href="variabeltyper.html#faktorer-på-nominalskala"><i class="fa fa-check"></i><b>7.2</b> Faktorer på nominalskala</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="tabeller.html"><a href="tabeller.html"><i class="fa fa-check"></i><b>8</b> Tabeller</a><ul>
<li class="chapter" data-level="8.1" data-path="tabeller.html"><a href="tabeller.html#frekvenstabeller"><i class="fa fa-check"></i><b>8.1</b> Frekvenstabeller</a><ul>
<li class="chapter" data-level="8.1.1" data-path="tabeller.html"><a href="tabeller.html#frekvenstabeller-med-table"><i class="fa fa-check"></i><b>8.1.1</b> Frekvenstabeller med table()</a></li>
<li class="chapter" data-level="8.1.2" data-path="tabeller.html"><a href="tabeller.html#frekvenstabeller-med-freq"><i class="fa fa-check"></i><b>8.1.2</b> Frekvenstabeller med freq()</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="tabeller.html"><a href="tabeller.html#korstabeller"><i class="fa fa-check"></i><b>8.2</b> Korstabeller</a><ul>
<li class="chapter" data-level="8.2.1" data-path="tabeller.html"><a href="tabeller.html#korstabeller-med-table"><i class="fa fa-check"></i><b>8.2.1</b> Korstabeller med table()</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="tabeller.html"><a href="tabeller.html#exportera-tabeller-till-html"><i class="fa fa-check"></i><b>8.3</b> Exportera tabeller till html</a></li>
<li class="chapter" data-level="8.4" data-path="tabeller.html"><a href="tabeller.html#frekvent-förekommande-tabeller"><i class="fa fa-check"></i><b>8.4</b> Frekvent förekommande tabeller</a><ul>
<li class="chapter" data-level="8.4.1" data-path="tabeller.html"><a href="tabeller.html#tabell-för-att-beskriva-urvalet"><i class="fa fa-check"></i><b>8.4.1</b> Tabell för att beskriva urvalet</a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="tabeller.html"><a href="tabeller.html#statistisk-inferens-baserat-på-korstabeller"><i class="fa fa-check"></i><b>8.5</b> Statistisk inferens baserat på korstabeller</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="figurer.html"><a href="figurer.html"><i class="fa fa-check"></i><b>9</b> Figurer</a><ul>
<li class="chapter" data-level="9.1" data-path="figurer.html"><a href="figurer.html#typer-av-figurer"><i class="fa fa-check"></i><b>9.1</b> Typer av figurer</a><ul>
<li class="chapter" data-level="9.1.1" data-path="figurer.html"><a href="figurer.html#presentation-av-aggregerade-data"><i class="fa fa-check"></i><b>9.1.1</b> Presentation av aggregerade data</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="figurer.html"><a href="figurer.html#lådagram"><i class="fa fa-check"></i><b>9.2</b> Lådagram</a></li>
<li class="chapter" data-level="9.3" data-path="figurer.html"><a href="figurer.html#histogram"><i class="fa fa-check"></i><b>9.3</b> Histogram</a></li>
<li class="chapter" data-level="9.4" data-path="figurer.html"><a href="figurer.html#spridningsdiagram"><i class="fa fa-check"></i><b>9.4</b> Spridningsdiagram</a></li>
<li class="chapter" data-level="9.5" data-path="figurer.html"><a href="figurer.html#några-frekvent-förekommande-diagram."><i class="fa fa-check"></i><b>9.5</b> Några frekvent förekommande diagram.</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="inläsning-tvätt-och-kodning-av-data.html"><a href="inläsning-tvätt-och-kodning-av-data.html"><i class="fa fa-check"></i><b>10</b> Inläsning, tvätt och kodning av data</a></li>
<li class="chapter" data-level="11" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html"><i class="fa fa-check"></i><b>11</b> Enkel linjär regression</a><ul>
<li class="chapter" data-level="11.1" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#regression-och-lm"><i class="fa fa-check"></i><b>11.1</b> Regression och <strong>lm()</strong></a></li>
<li class="chapter" data-level="11.2" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#regressions-resultat"><i class="fa fa-check"></i><b>11.2</b> Regressions resultat</a></li>
<li class="chapter" data-level="11.3" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#konfidensintervall"><i class="fa fa-check"></i><b>11.3</b> Konfidensintervall</a></li>
<li class="chapter" data-level="11.4" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#residualanalys"><i class="fa fa-check"></i><b>11.4</b> Residualanalys</a></li>
<li class="chapter" data-level="11.5" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#skattning-av-betingade-medelvärden"><i class="fa fa-check"></i><b>11.5</b> Skattning av betingade medelvärden</a></li>
<li class="chapter" data-level="11.6" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#prediktion"><i class="fa fa-check"></i><b>11.6</b> Prediktion</a></li>
<li class="chapter" data-level="11.7" data-path="enkel-linjär-regression.html"><a href="enkel-linjär-regression.html#binära-oberoende-variabler"><i class="fa fa-check"></i><b>11.7</b> Binära oberoende variabler</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html"><i class="fa fa-check"></i><b>12</b> Multipel linjär regression</a><ul>
<li class="chapter" data-level="12.1" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html#multipel-linjär-regression-och-lm"><i class="fa fa-check"></i><b>12.1</b> Multipel linjär regression och <strong>lm()</strong></a></li>
<li class="chapter" data-level="12.2" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html#f-test-och-anova"><i class="fa fa-check"></i><b>12.2</b> <span class="math inline">\(F\)</span>-test och <strong>anova()</strong></a></li>
<li class="chapter" data-level="12.3" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html#variabler-med-flera-än-två-kategorier."><i class="fa fa-check"></i><b>12.3</b> Variabler med flera än två kategorier.</a><ul>
<li class="chapter" data-level="12.3.1" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html#dummy-variabler"><i class="fa fa-check"></i><b>12.3.1</b> Dummy-variabler</a></li>
<li class="chapter" data-level="12.3.2" data-path="multipel-linjär-regression.html"><a href="multipel-linjär-regression.html#faktor-variabler"><i class="fa fa-check"></i><b>12.3.2</b> Faktor-variabler</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="regression-med-binära-utfall.html"><a href="regression-med-binära-utfall.html"><i class="fa fa-check"></i><b>13</b> Regression med binära utfall</a><ul>
<li class="chapter" data-level="13.1" data-path="regression-med-binära-utfall.html"><a href="regression-med-binära-utfall.html#regression-och-lm-1"><i class="fa fa-check"></i><b>13.1</b> Regression och <strong>lm()</strong></a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">R på kursen Tillämpad statistik (A5)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="inläsning-tvätt-och-kodning-av-data" class="section level1">
<h1><span class="header-section-number">Kapitel 10</span> Inläsning, tvätt och kodning av data</h1>
<p>Detta avsnitt inleds med exempel på datainläsning följt av regressionsanalys. Det rekommenderas att ni använder samma eller snarlik kodning som den som används här, exempelvis kod för kodning av variabler, transformationer av variabler, hur data används i funktioner, objektnamn osv.</p>
<p>Detta innebär dock inte att koden som presenteras här är ‘’bättre’’ än all annan kod. Till exempel är koden i vissa avseenden något omständlig och skulle kunna förenklas och förbättras. I programmering gäller emellertid att innan man ger sig i kast med att effektivisera kod bör man vara helt säker på det man gör. Vänta därför med att skapa ditt eget sätt att strukturera upp en analys.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Rensa minnet</span>
<span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>())
<span class="co"># Bestäm working directory. Det minskar sökvägarna och resultat/figurer sparas automatiskt i denna mapp.</span>
<span class="kw">setwd</span>(<span class="st">&quot;D:/&quot;</span>)
df &lt;-<span class="st"> </span><span class="kw">read.csv2</span>(<span class="st">&quot;conscriptiondata_sample.csv&quot;</span>)

## 1. DATATVÄTT + KODNING AV VARIABLER
<span class="co"># Skapa (numeriska) kategorier för födelseår (femårsintervall)</span>
df<span class="op">$</span>year5 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>year5[(df<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1961</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1966</span>)] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>year5[(df<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1966</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1971</span>)] &lt;-<span class="st"> </span><span class="dv">2</span>
df<span class="op">$</span>year5[(df<span class="op">$</span>year <span class="op">&gt;=</span><span class="st"> </span><span class="dv">1971</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>year <span class="op">&lt;</span><span class="st"> </span><span class="dv">1976</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>
<span class="co"># Skapa en faktorvariabel för födelseår </span>
<span class="co"># Beroende på analys kan en eller andra alternativet för variabelkodning var användbart och </span>
<span class="co"># vi har därför båda versionerna i data frame</span>
df<span class="op">$</span>year5_cat  &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>year5)
<span class="kw">levels</span>(df<span class="op">$</span>year5_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;1961-1965&quot;</span>, <span class="st">&quot;1966-1970&quot;</span>, <span class="st">&quot;1970-1975&quot;</span>)

<span class="co"># Skapa 4 (numeriska) kategorier för Test A </span>
df<span class="op">$</span>testa4 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testa4[df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testa4[(df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span>
df<span class="op">$</span>testa4[(df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  
df<span class="op">$</span>testa4[(df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span>  
<span class="co"># Skapa en faktorvariabel för Testa A 4 kategorier</span>
df<span class="op">$</span>testa_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testa4)

<span class="co"># Skapa 4 (numeriska) kategorier för Test B </span>
df<span class="op">$</span>testb4 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testb4[df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testb4[(df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span>
df<span class="op">$</span>testb4[(df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  
df<span class="op">$</span>testb4[(df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span>  
<span class="co"># Skapa en faktorvariabel för Testa B 4 kategorier</span>
df<span class="op">$</span>testb4 &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testb4)

<span class="co"># Skapa 4 (numeriska) kategorier för Test C </span>
df<span class="op">$</span>testc4 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testc4[df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testc4[(df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span>
df<span class="op">$</span>testc4[(df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  
df<span class="op">$</span>testc4[(df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span> 
<span class="co"># Skapa en faktorvariabel för Testa C 4 kategorier</span>
df<span class="op">$</span>testc_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testc4)

<span class="co"># Skapa 4 (numeriska) kategorier för Test D </span>
df<span class="op">$</span>testd4 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testd4[df<span class="op">$</span>testd <span class="op">&lt;</span><span class="st"> </span><span class="dv">10</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testd4[(df<span class="op">$</span>testd <span class="op">&gt;=</span><span class="st"> </span><span class="dv">10</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testd <span class="op">&lt;</span><span class="st"> </span><span class="dv">20</span>)] &lt;-<span class="st"> </span><span class="dv">2</span>
df<span class="op">$</span>testd4[(df<span class="op">$</span>testd <span class="op">&gt;=</span><span class="st"> </span><span class="dv">20</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>testd <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">3</span>  
df<span class="op">$</span>testd4[(df<span class="op">$</span>testd <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>)] &lt;-<span class="st"> </span><span class="dv">4</span>  
<span class="co"># Skapa en faktorvariabel för Testa C 4 kategorier</span>
df<span class="op">$</span>testd_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>testd4)

<span class="co"># Skapa en indikator för Test A 30 poäng eller mer</span>
df<span class="op">$</span>testa30 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testa30[df<span class="op">$</span>testa <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testa30[df<span class="op">$</span>testa <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># Skapa en faktorvariabel för höga poäng på test A</span>
df<span class="op">$</span>testa30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testa30)
<span class="kw">levels</span>(df<span class="op">$</span>testa30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) 

<span class="co"># Skapa en indikator för Test B 30 poäng eller mer</span>
df<span class="op">$</span>testb30 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testb30[df<span class="op">$</span>testb <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testb30[df<span class="op">$</span>testb <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># Skapa en faktorvariabel för höga poäng på test B</span>
df<span class="op">$</span>testb30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testb30)
<span class="kw">levels</span>(df<span class="op">$</span>testb30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) 

<span class="co"># Skapa en indikator för Test C 30 poäng eller mer</span>
df<span class="op">$</span>testc30 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># Skapa en faktorvariabel för höga poäng på test C</span>
df<span class="op">$</span>testc30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testc30)
<span class="kw">levels</span>(df<span class="op">$</span>testc30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) 

<span class="co"># Skapa en indikator för Test D 30 poäng eller mer</span>
df<span class="op">$</span>testc30 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&gt;=</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>testc30[df<span class="op">$</span>testc <span class="op">&lt;</span><span class="st"> </span><span class="dv">30</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># Skapa en faktorvariabel för höga poäng på test C</span>
df<span class="op">$</span>testc30_cat &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>testc30)
<span class="kw">levels</span>(df<span class="op">$</span>testc30_cat) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 30&quot;</span>, <span class="st">&quot;&gt;= 30&quot;</span>) 

<span class="co"># Skapa en variabel som indikerar högt systoliskt blodtryck 1 och annat 0</span>
df<span class="op">$</span>sbp130 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>sbp130[df<span class="op">$</span>sbp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">130</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>sbp130[df<span class="op">$</span>sbp <span class="op">&lt;</span><span class="st"> </span><span class="dv">130</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># Skapa en faktorvariabel för högt systoliskt blodtryck </span>
df<span class="op">$</span>sbphigh &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>sbp130)
<span class="kw">levels</span>(df<span class="op">$</span>sbphigh) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 130&quot;</span>, <span class="st">&quot;&gt;= 130&quot;</span>) 

<span class="co"># Skapa en variabel som indikerar högt diastoliskt blodtryck 1 och annat 0</span>
df<span class="op">$</span>dbp80 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>dbp80[df<span class="op">$</span>dbp <span class="op">&gt;=</span><span class="st"> </span><span class="dv">80</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>dbp80[df<span class="op">$</span>dbp <span class="op">&lt;</span><span class="st"> </span><span class="dv">80</span>] &lt;-<span class="st"> </span><span class="dv">0</span>
<span class="co"># Skapa en faktorvariabel för högt diastoliskt blodtryck </span>
df<span class="op">$</span>dbphigh &lt;-<span class="st">  </span><span class="kw">factor</span>(df<span class="op">$</span>dbp80)
<span class="kw">levels</span>(df<span class="op">$</span>dbphigh) &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;&lt; 80&quot;</span>, <span class="st">&quot;&gt;= 80&quot;</span>) 

<span class="co"># Skapa en variabel som indikerar psykologisk bedömning i tre nivåer</span>
df<span class="op">$</span>psych3 &lt;-<span class="st"> </span><span class="ot">NA</span>
df<span class="op">$</span>psych3[df<span class="op">$</span>psych <span class="op">&lt;=</span><span class="st"> </span><span class="dv">2</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
df<span class="op">$</span>psych3[(df<span class="op">$</span>psych <span class="op">&gt;</span><span class="st"> </span><span class="dv">2</span>) <span class="op">&amp;</span><span class="st"> </span>(df<span class="op">$</span>psych <span class="op">&lt;=</span><span class="st"> </span><span class="dv">7</span>)] &lt;-<span class="st"> </span><span class="dv">2</span>
df<span class="op">$</span>psych3[df<span class="op">$</span>psych <span class="op">&gt;=</span><span class="st"> </span><span class="dv">8</span>] &lt;-<span class="st"> </span><span class="dv">3</span>
<span class="co"># Skapa en faktorvariabel för psykologisk bedömning i tre nivåer</span>
df<span class="op">$</span>psych3_cat &lt;-<span class="st"> </span><span class="kw">factor</span>(df<span class="op">$</span>psych3)
<span class="kw">levels</span>(df<span class="op">$</span>psych3_cat)  &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;Low (1-2)&quot;</span>, <span class="st">&quot;Medium (3-7)&quot;</span>, <span class="st">&quot;High (8-9&quot;</span>)

<span class="kw">write.csv2</span>(df, <span class="st">&quot;conscriptiondata_sample_final.csv&quot;</span>)</code></pre></div>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="figurer.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="enkel-linjär-regression.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
